(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Rh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bd={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function vN(){if(c0)return Il;c0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:a}}return Il.Fragment=e,Il.jsx=t,Il.jsxs=t,Il}var u0;function SN(){return u0||(u0=1,bd.exports=vN()),bd.exports}var y=SN(),xd={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function wN(){if(f0)return ge;f0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,N={};function C(O,$,ee){this.props=O,this.context=$,this.refs=N,this.updater=ee||S}C.prototype.isReactComponent={},C.prototype.setState=function(O,$){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,$,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function M(){}M.prototype=C.prototype;function _(O,$,ee){this.props=O,this.context=$,this.refs=N,this.updater=ee||S}var q=_.prototype=new M;q.constructor=_,v(q,C.prototype),q.isPureReactComponent=!0;var K=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function Y(O,$,ee,Q,ae,Ce){return ee=Ce.ref,{$$typeof:n,type:O,key:$,ref:ee!==void 0?ee:null,props:Ce}}function L(O,$){return Y(O.type,$,void 0,void 0,void 0,O.props)}function J(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function le(O){var $={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return $[ee]})}var re=/\/+/g;function ce(O,$){return typeof O=="object"&&O!==null&&O.key!=null?le(""+O.key):$.toString(36)}function He(){}function Je(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(He,He):(O.status="pending",O.then(function($){O.status==="pending"&&(O.status="fulfilled",O.value=$)},function($){O.status==="pending"&&(O.status="rejected",O.reason=$)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Ae(O,$,ee,Q,ae){var Ce=typeof O;(Ce==="undefined"||Ce==="boolean")&&(O=null);var pe=!1;if(O===null)pe=!0;else switch(Ce){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(O.$$typeof){case n:case e:pe=!0;break;case m:return pe=O._init,Ae(pe(O._payload),$,ee,Q,ae)}}if(pe)return ae=ae(O),pe=Q===""?"."+ce(O,0):Q,K(ae)?(ee="",pe!=null&&(ee=pe.replace(re,"$&/")+"/"),Ae(ae,$,ee,"",function(cr){return cr})):ae!=null&&(J(ae)&&(ae=L(ae,ee+(ae.key==null||O&&O.key===ae.key?"":(""+ae.key).replace(re,"$&/")+"/")+pe)),$.push(ae)),1;pe=0;var Pt=Q===""?".":Q+":";if(K(O))for(var qe=0;qe<O.length;qe++)Q=O[qe],Ce=Pt+ce(Q,qe),pe+=Ae(Q,$,ee,Ce,ae);else if(qe=x(O),typeof qe=="function")for(O=qe.call(O),qe=0;!(Q=O.next()).done;)Q=Q.value,Ce=Pt+ce(Q,qe++),pe+=Ae(Q,$,ee,Ce,ae);else if(Ce==="object"){if(typeof O.then=="function")return Ae(Je(O),$,ee,Q,ae);throw $=String(O),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return pe}function U(O,$,ee){if(O==null)return O;var Q=[],ae=0;return Ae(O,Q,"","",function(Ce){return $.call(ee,Ce,ae++)}),Q}function X(O){if(O._status===-1){var $=O._result;$=$(),$.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=$)}if(O._status===1)return O._result.default;throw O._result}var fe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function _e(){}return ge.Children={map:U,forEach:function(O,$,ee){U(O,function(){$.apply(this,arguments)},ee)},count:function(O){var $=0;return U(O,function(){$++}),$},toArray:function(O){return U(O,function($){return $})||[]},only:function(O){if(!J(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ge.Component=C,ge.Fragment=t,ge.Profiler=i,ge.PureComponent=_,ge.StrictMode=r,ge.Suspense=d,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return F.H.useMemoCache(O)}},ge.cache=function(O){return function(){return O.apply(null,arguments)}},ge.cloneElement=function(O,$,ee){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Q=v({},O.props),ae=O.key,Ce=void 0;if($!=null)for(pe in $.ref!==void 0&&(Ce=void 0),$.key!==void 0&&(ae=""+$.key),$)!Z.call($,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&$.ref===void 0||(Q[pe]=$[pe]);var pe=arguments.length-2;if(pe===1)Q.children=ee;else if(1<pe){for(var Pt=Array(pe),qe=0;qe<pe;qe++)Pt[qe]=arguments[qe+2];Q.children=Pt}return Y(O.type,ae,void 0,void 0,Ce,Q)},ge.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},ge.createElement=function(O,$,ee){var Q,ae={},Ce=null;if($!=null)for(Q in $.key!==void 0&&(Ce=""+$.key),$)Z.call($,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ae[Q]=$[Q]);var pe=arguments.length-2;if(pe===1)ae.children=ee;else if(1<pe){for(var Pt=Array(pe),qe=0;qe<pe;qe++)Pt[qe]=arguments[qe+2];ae.children=Pt}if(O&&O.defaultProps)for(Q in pe=O.defaultProps,pe)ae[Q]===void 0&&(ae[Q]=pe[Q]);return Y(O,Ce,void 0,void 0,null,ae)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(O){return{$$typeof:f,render:O}},ge.isValidElement=J,ge.lazy=function(O){return{$$typeof:m,_payload:{_status:-1,_result:O},_init:X}},ge.memo=function(O,$){return{$$typeof:h,type:O,compare:$===void 0?null:$}},ge.startTransition=function(O){var $=F.T,ee={};F.T=ee;try{var Q=O(),ae=F.S;ae!==null&&ae(ee,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(_e,fe)}catch(Ce){fe(Ce)}finally{F.T=$}},ge.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},ge.use=function(O){return F.H.use(O)},ge.useActionState=function(O,$,ee){return F.H.useActionState(O,$,ee)},ge.useCallback=function(O,$){return F.H.useCallback(O,$)},ge.useContext=function(O){return F.H.useContext(O)},ge.useDebugValue=function(){},ge.useDeferredValue=function(O,$){return F.H.useDeferredValue(O,$)},ge.useEffect=function(O,$,ee){var Q=F.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(O,$)},ge.useId=function(){return F.H.useId()},ge.useImperativeHandle=function(O,$,ee){return F.H.useImperativeHandle(O,$,ee)},ge.useInsertionEffect=function(O,$){return F.H.useInsertionEffect(O,$)},ge.useLayoutEffect=function(O,$){return F.H.useLayoutEffect(O,$)},ge.useMemo=function(O,$){return F.H.useMemo(O,$)},ge.useOptimistic=function(O,$){return F.H.useOptimistic(O,$)},ge.useReducer=function(O,$,ee){return F.H.useReducer(O,$,ee)},ge.useRef=function(O){return F.H.useRef(O)},ge.useState=function(O){return F.H.useState(O)},ge.useSyncExternalStore=function(O,$,ee){return F.H.useSyncExternalStore(O,$,ee)},ge.useTransition=function(){return F.H.useTransition()},ge.version="19.1.0",ge}var d0;function jh(){return d0||(d0=1,xd.exports=wN()),xd.exports}var T=jh();const Tt=Rh(T);var vd={exports:{}},Fl={},Sd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function NN(){return h0||(h0=1,function(n){function e(U,X){var fe=U.length;U.push(X);e:for(;0<fe;){var _e=fe-1>>>1,O=U[_e];if(0<i(O,X))U[_e]=X,U[fe]=O,fe=_e;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],fe=U.pop();if(fe!==X){U[0]=fe;e:for(var _e=0,O=U.length,$=O>>>1;_e<$;){var ee=2*(_e+1)-1,Q=U[ee],ae=ee+1,Ce=U[ae];if(0>i(Q,fe))ae<O&&0>i(Ce,Q)?(U[_e]=Ce,U[ae]=fe,_e=ae):(U[_e]=Q,U[ee]=fe,_e=ee);else if(ae<O&&0>i(Ce,fe))U[_e]=Ce,U[ae]=fe,_e=ae;else break e}}return X}function i(U,X){var fe=U.sortIndex-X.sortIndex;return fe!==0?fe:U.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],h=[],m=1,b=null,x=3,S=!1,v=!1,N=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function K(U){for(var X=t(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=U)r(h),X.sortIndex=X.expirationTime,e(d,X);else break;X=t(h)}}function F(U){if(N=!1,K(U),!v)if(t(d)!==null)v=!0,Z||(Z=!0,ce());else{var X=t(h);X!==null&&Ae(F,X.startTime-U)}}var Z=!1,Y=-1,L=5,J=-1;function le(){return C?!0:!(n.unstable_now()-J<L)}function re(){if(C=!1,Z){var U=n.unstable_now();J=U;var X=!0;try{e:{v=!1,N&&(N=!1,_(Y),Y=-1),S=!0;var fe=x;try{t:{for(K(U),b=t(d);b!==null&&!(b.expirationTime>U&&le());){var _e=b.callback;if(typeof _e=="function"){b.callback=null,x=b.priorityLevel;var O=_e(b.expirationTime<=U);if(U=n.unstable_now(),typeof O=="function"){b.callback=O,K(U),X=!0;break t}b===t(d)&&r(d),K(U)}else r(d);b=t(d)}if(b!==null)X=!0;else{var $=t(h);$!==null&&Ae(F,$.startTime-U),X=!1}}break e}finally{b=null,x=fe,S=!1}X=void 0}}finally{X?ce():Z=!1}}}var ce;if(typeof q=="function")ce=function(){q(re)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Je=He.port2;He.port1.onmessage=re,ce=function(){Je.postMessage(null)}}else ce=function(){M(re,0)};function Ae(U,X){Y=M(function(){U(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(U){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var fe=x;x=X;try{return U()}finally{x=fe}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var fe=x;x=U;try{return X()}finally{x=fe}},n.unstable_scheduleCallback=function(U,X,fe){var _e=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?_e+fe:_e):fe=_e,U){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=fe+O,U={id:m++,callback:X,priorityLevel:U,startTime:fe,expirationTime:O,sortIndex:-1},fe>_e?(U.sortIndex=fe,e(h,U),t(d)===null&&U===t(h)&&(N?(_(Y),Y=-1):N=!0,Ae(F,fe-_e))):(U.sortIndex=O,e(d,U),v||S||(v=!0,Z||(Z=!0,ce()))),U},n.unstable_shouldYield=le,n.unstable_wrapCallback=function(U){var X=x;return function(){var fe=x;x=X;try{return U.apply(this,arguments)}finally{x=fe}}}}(wd)),wd}var p0;function CN(){return p0||(p0=1,Sd.exports=NN()),Sd.exports}var Nd={exports:{}},St={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function EN(){if(m0)return St;m0=1;var n=jh();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,h,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:d,containerInfo:h,implementation:m}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,St.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,m)},St.flushSync=function(d){var h=c.T,m=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=h,r.p=m,r.d.f()}},St.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},St.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},St.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,b=f(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,S=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:S}):m==="script"&&r.d.X(d,{crossOrigin:b,integrity:x,fetchPriority:S,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},St.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=f(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},St.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,b=f(m,h.crossOrigin);r.d.L(d,m,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},St.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=f(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},St.requestFormReset=function(d){r.d.r(d)},St.unstable_batchedUpdates=function(d,h){return d(h)},St.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},St.useFormStatus=function(){return c.H.useHostTransitionStatus()},St.version="19.1.0",St}var g0;function lx(){if(g0)return Nd.exports;g0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nd.exports=EN(),Nd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function MN(){if(y0)return Fl;y0=1;var n=CN(),e=jh(),t=lx();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)l+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,o=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(o=l.return),s=l.return;while(s)}return l.tag===3?o:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var o=s,u=l;;){var p=o.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===o)return f(p),s;if(g===u)return f(p),l;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=p,u=g;else{for(var w=!1,E=p.child;E;){if(E===o){w=!0,o=p,u=g;break}if(E===u){w=!0,u=p,o=g;break}E=E.sibling}if(!w){for(E=g.child;E;){if(E===o){w=!0,o=g,u=p;break}if(E===u){w=!0,u=g,o=p;break}E=E.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),q=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var He=Symbol.for("react.client.reference");function Je(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===He?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case v:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case F:return"Suspense";case Z:return"SuspenseList";case J:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case q:return(s.displayName||"Context")+".Provider";case _:return(s._context.displayName||"Context")+".Consumer";case K:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Y:return l=s.displayName||null,l!==null?l:Je(s.type)||"Memo";case L:l=s._payload,s=s._init;try{return Je(s(l))}catch{}}return null}var Ae=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},_e=[],O=-1;function $(s){return{current:s}}function ee(s){0>O||(s.current=_e[O],_e[O]=null,O--)}function Q(s,l){O++,_e[O]=s.current,s.current=l}var ae=$(null),Ce=$(null),pe=$(null),Pt=$(null);function qe(s,l){switch(Q(pe,l),Q(Ce,s),Q(ae,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?Ly(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=Ly(l),s=Hy(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(ae),Q(ae,s)}function cr(){ee(ae),ee(Ce),ee(pe)}function nu(s){s.memoizedState!==null&&Q(Pt,s);var l=ae.current,o=Hy(l,s.type);l!==o&&(Q(Ce,s),Q(ae,o))}function Ta(s){Ce.current===s&&(ee(ae),ee(Ce)),Pt.current===s&&(ee(Pt),Hl._currentValue=fe)}var ru=Object.prototype.hasOwnProperty,su=n.unstable_scheduleCallback,iu=n.unstable_cancelCallback,Wv=n.unstable_shouldYield,Zv=n.unstable_requestPaint,Nn=n.unstable_now,eS=n.unstable_getCurrentPriorityLevel,yp=n.unstable_ImmediatePriority,bp=n.unstable_UserBlockingPriority,ka=n.unstable_NormalPriority,tS=n.unstable_LowPriority,xp=n.unstable_IdlePriority,nS=n.log,rS=n.unstable_setDisableYieldValue,Yi=null,It=null;function ur(s){if(typeof nS=="function"&&rS(s),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Yi,s)}catch{}}var Ft=Math.clz32?Math.clz32:lS,sS=Math.log,iS=Math.LN2;function lS(s){return s>>>=0,s===0?32:31-(sS(s)/iS|0)|0}var Oa=256,Aa=4194304;function Zr(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Da(s,l,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,g=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var E=u&134217727;return E!==0?(u=E&~g,u!==0?p=Zr(u):(w&=E,w!==0?p=Zr(w):o||(o=E&~s,o!==0&&(p=Zr(o))))):(E=u&~g,E!==0?p=Zr(E):w!==0?p=Zr(w):o||(o=u&~s,o!==0&&(p=Zr(o)))),p===0?0:l!==0&&l!==p&&(l&g)===0&&(g=p&-p,o=l&-l,g>=o||g===32&&(o&4194048)!==0)?l:p}function Gi(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function aS(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vp(){var s=Oa;return Oa<<=1,(Oa&4194048)===0&&(Oa=256),s}function Sp(){var s=Aa;return Aa<<=1,(Aa&62914560)===0&&(Aa=4194304),s}function lu(s){for(var l=[],o=0;31>o;o++)l.push(s);return l}function Ki(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function oS(s,l,o,u,p,g){var w=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var E=s.entanglements,k=s.expirationTimes,j=s.hiddenUpdates;for(o=w&~o;0<o;){var V=31-Ft(o),I=1<<V;E[V]=0,k[V]=-1;var B=j[V];if(B!==null)for(j[V]=null,V=0;V<B.length;V++){var z=B[V];z!==null&&(z.lane&=-536870913)}o&=~I}u!==0&&wp(s,u,0),g!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=g&~(w&~l))}function wp(s,l,o){s.pendingLanes|=l,s.suspendedLanes&=~l;var u=31-Ft(l);s.entangledLanes|=l,s.entanglements[u]=s.entanglements[u]|1073741824|o&4194090}function Np(s,l){var o=s.entangledLanes|=l;for(s=s.entanglements;o;){var u=31-Ft(o),p=1<<u;p&l|s[u]&l&&(s[u]|=l),o&=~p}}function au(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ou(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Cp(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:r0(s.type))}function cS(s,l){var o=X.p;try{return X.p=s,l()}finally{X.p=o}}var fr=Math.random().toString(36).slice(2),xt="__reactFiber$"+fr,jt="__reactProps$"+fr,Vs="__reactContainer$"+fr,cu="__reactEvents$"+fr,uS="__reactListeners$"+fr,fS="__reactHandles$"+fr,Ep="__reactResources$"+fr,Ji="__reactMarker$"+fr;function uu(s){delete s[xt],delete s[jt],delete s[cu],delete s[uS],delete s[fS]}function Ps(s){var l=s[xt];if(l)return l;for(var o=s.parentNode;o;){if(l=o[Vs]||o[xt]){if(o=l.alternate,l.child!==null||o!==null&&o.child!==null)for(s=Py(s);s!==null;){if(o=s[xt])return o;s=Py(s)}return l}s=o,o=s.parentNode}return null}function Is(s){if(s=s[xt]||s[Vs]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function Xi(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function Fs(s){var l=s[Ep];return l||(l=s[Ep]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function nt(s){s[Ji]=!0}var Mp=new Set,Tp={};function es(s,l){$s(s,l),$s(s+"Capture",l)}function $s(s,l){for(Tp[s]=l,s=0;s<l.length;s++)Mp.add(l[s])}var dS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kp={},Op={};function hS(s){return ru.call(Op,s)?!0:ru.call(kp,s)?!1:dS.test(s)?Op[s]=!0:(kp[s]=!0,!1)}function Ra(s,l,o){if(hS(l))if(o===null)s.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var u=l.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+o)}}function ja(s,l,o){if(o===null)s.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+o)}}function Hn(s,l,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(l,o,""+u)}}var fu,Ap;function Ys(s){if(fu===void 0)try{throw Error()}catch(o){var l=o.stack.trim().match(/\n( *(at )?)/);fu=l&&l[1]||"",Ap=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fu+s+Ap}var du=!1;function hu(s,l){if(!s||du)return"";du=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(l){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(z){var B=z}Reflect.construct(s,[],I)}else{try{I.call()}catch(z){B=z}s.call(I.prototype)}}else{try{throw Error()}catch(z){B=z}(I=s())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(z){if(z&&B&&typeof z.stack=="string")return[z.stack,B.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],E=g[1];if(w&&E){var k=w.split(`
`),j=E.split(`
`);for(p=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;p<j.length&&!j[p].includes("DetermineComponentFrameRoot");)p++;if(u===k.length||p===j.length)for(u=k.length-1,p=j.length-1;1<=u&&0<=p&&k[u]!==j[p];)p--;for(;1<=u&&0<=p;u--,p--)if(k[u]!==j[p]){if(u!==1||p!==1)do if(u--,p--,0>p||k[u]!==j[p]){var V=`
`+k[u].replace(" at new "," at ");return s.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",s.displayName)),V}while(1<=u&&0<=p);break}}}finally{du=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?Ys(o):""}function pS(s){switch(s.tag){case 26:case 27:case 5:return Ys(s.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 15:return hu(s.type,!1);case 11:return hu(s.type.render,!1);case 1:return hu(s.type,!0);case 31:return Ys("Activity");default:return""}}function Dp(s){try{var l="";do l+=pS(s),s=s.return;while(s);return l}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function tn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Rp(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function mS(s){var l=Rp(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),u=""+s[l];if(!s.hasOwnProperty(l)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,g=o.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return p.call(this)},set:function(w){u=""+w,g.call(this,w)}}),Object.defineProperty(s,l,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function _a(s){s._valueTracker||(s._valueTracker=mS(s))}function jp(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var o=l.getValue(),u="";return s&&(u=Rp(s)?s.checked?"true":"false":s.value),s=u,s!==o?(l.setValue(s),!0):!1}function Ba(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var gS=/[\n"\\]/g;function nn(s){return s.replace(gS,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function pu(s,l,o,u,p,g,w,E){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),l!=null?w==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+tn(l)):s.value!==""+tn(l)&&(s.value=""+tn(l)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),l!=null?mu(s,w,tn(l)):o!=null?mu(s,w,tn(o)):u!=null&&s.removeAttribute("value"),p==null&&g!=null&&(s.defaultChecked=!!g),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.name=""+tn(E):s.removeAttribute("name")}function _p(s,l,o,u,p,g,w,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),l!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||l!=null))return;o=o!=null?""+tn(o):"",l=l!=null?""+tn(l):o,E||l===s.value||(s.value=l),s.defaultValue=l}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=E?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function mu(s,l,o){l==="number"&&Ba(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Gs(s,l,o,u){if(s=s.options,l){l={};for(var p=0;p<o.length;p++)l["$"+o[p]]=!0;for(o=0;o<s.length;o++)p=l.hasOwnProperty("$"+s[o].value),s[o].selected!==p&&(s[o].selected=p),p&&u&&(s[o].defaultSelected=!0)}else{for(o=""+tn(o),l=null,p=0;p<s.length;p++){if(s[p].value===o){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}l!==null||s[p].disabled||(l=s[p])}l!==null&&(l.selected=!0)}}function Bp(s,l,o){if(l!=null&&(l=""+tn(l),l!==s.value&&(s.value=l),o==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=o!=null?""+tn(o):""}function zp(s,l,o,u){if(l==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ae(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),l=o}o=tn(l),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u)}function Ks(s,l){if(l){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=l;return}}s.textContent=l}var yS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lp(s,l,o){var u=l.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":u?s.setProperty(l,o):typeof o!="number"||o===0||yS.has(l)?l==="float"?s.cssFloat=o:s[l]=(""+o).trim():s[l]=o+"px"}function Hp(s,l,o){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||l!=null&&l.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in l)u=l[p],l.hasOwnProperty(p)&&o[p]!==u&&Lp(s,p,u)}else for(var g in l)l.hasOwnProperty(g)&&Lp(s,g,l[g])}function gu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(s){return xS.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var yu=null;function bu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Js=null,Xs=null;function Up(s){var l=Is(s);if(l&&(s=l.stateNode)){var o=s[jt]||null;e:switch(s=l.stateNode,l.type){case"input":if(pu(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),l=o.name,o.type==="radio"&&l!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+nn(""+l)+'"][type="radio"]'),l=0;l<o.length;l++){var u=o[l];if(u!==s&&u.form===s.form){var p=u[jt]||null;if(!p)throw Error(r(90));pu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(l=0;l<o.length;l++)u=o[l],u.form===s.form&&jp(u)}break e;case"textarea":Bp(s,o.value,o.defaultValue);break e;case"select":l=o.value,l!=null&&Gs(s,!!o.multiple,l,!1)}}}var xu=!1;function qp(s,l,o){if(xu)return s(l,o);xu=!0;try{var u=s(l);return u}finally{if(xu=!1,(Js!==null||Xs!==null)&&(wo(),Js&&(l=Js,s=Xs,Xs=Js=null,Up(l),s)))for(l=0;l<s.length;l++)Up(s[l])}}function Qi(s,l){var o=s.stateNode;if(o===null)return null;var u=o[jt]||null;if(u===null)return null;o=u[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,l,typeof o));return o}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=!1;if(Un)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){vu=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{vu=!1}var dr=null,Su=null,La=null;function Vp(){if(La)return La;var s,l=Su,o=l.length,u,p="value"in dr?dr.value:dr.textContent,g=p.length;for(s=0;s<o&&l[s]===p[s];s++);var w=o-s;for(u=1;u<=w&&l[o-u]===p[g-u];u++);return La=p.slice(s,1<u?1-u:void 0)}function Ha(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ua(){return!0}function Pp(){return!1}function _t(s){function l(o,u,p,g,w){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var E in s)s.hasOwnProperty(E)&&(o=s[E],this[E]=o?o(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ua:Pp,this.isPropagationStopped=Pp,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),l}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=_t(ts),Zi=m({},ts,{view:0,detail:0}),vS=_t(Zi),wu,Nu,el,Va=m({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==el&&(el&&s.type==="mousemove"?(wu=s.screenX-el.screenX,Nu=s.screenY-el.screenY):Nu=wu=0,el=s),wu)},movementY:function(s){return"movementY"in s?s.movementY:Nu}}),Ip=_t(Va),SS=m({},Va,{dataTransfer:0}),wS=_t(SS),NS=m({},Zi,{relatedTarget:0}),Cu=_t(NS),CS=m({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),ES=_t(CS),MS=m({},ts,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),TS=_t(MS),kS=m({},ts,{data:0}),Fp=_t(kS),OS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RS(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=DS[s])?!!l[s]:!1}function Eu(){return RS}var jS=m({},Zi,{key:function(s){if(s.key){var l=OS[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ha(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?AS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(s){return s.type==="keypress"?Ha(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ha(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_S=_t(jS),BS=m({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=_t(BS),zS=m({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),LS=_t(zS),HS=m({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),US=_t(HS),qS=m({},Va,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),VS=_t(qS),PS=m({},ts,{newState:0,oldState:0}),IS=_t(PS),FS=[9,13,27,32],Mu=Un&&"CompositionEvent"in window,tl=null;Un&&"documentMode"in document&&(tl=document.documentMode);var $S=Un&&"TextEvent"in window&&!tl,Yp=Un&&(!Mu||tl&&8<tl&&11>=tl),Gp=" ",Kp=!1;function Jp(s,l){switch(s){case"keyup":return FS.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Qs=!1;function YS(s,l){switch(s){case"compositionend":return Xp(l);case"keypress":return l.which!==32?null:(Kp=!0,Gp);case"textInput":return s=l.data,s===Gp&&Kp?null:s;default:return null}}function GS(s,l){if(Qs)return s==="compositionend"||!Mu&&Jp(s,l)?(s=Vp(),La=Su=dr=null,Qs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Yp&&l.locale!=="ko"?null:l.data;default:return null}}var KS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!KS[s.type]:l==="textarea"}function Wp(s,l,o,u){Js?Xs?Xs.push(u):Xs=[u]:Js=u,l=ko(l,"onChange"),0<l.length&&(o=new qa("onChange","change",null,o,u),s.push({event:o,listeners:l}))}var nl=null,rl=null;function JS(s){Ry(s,0)}function Pa(s){var l=Xi(s);if(jp(l))return s}function Zp(s,l){if(s==="change")return l}var em=!1;if(Un){var Tu;if(Un){var ku="oninput"in document;if(!ku){var tm=document.createElement("div");tm.setAttribute("oninput","return;"),ku=typeof tm.oninput=="function"}Tu=ku}else Tu=!1;em=Tu&&(!document.documentMode||9<document.documentMode)}function nm(){nl&&(nl.detachEvent("onpropertychange",rm),rl=nl=null)}function rm(s){if(s.propertyName==="value"&&Pa(rl)){var l=[];Wp(l,rl,s,bu(s)),qp(JS,l)}}function XS(s,l,o){s==="focusin"?(nm(),nl=l,rl=o,nl.attachEvent("onpropertychange",rm)):s==="focusout"&&nm()}function QS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Pa(rl)}function WS(s,l){if(s==="click")return Pa(l)}function ZS(s,l){if(s==="input"||s==="change")return Pa(l)}function ew(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var $t=typeof Object.is=="function"?Object.is:ew;function sl(s,l){if($t(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var o=Object.keys(s),u=Object.keys(l);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!ru.call(l,p)||!$t(s[p],l[p]))return!1}return!0}function sm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function im(s,l){var o=sm(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=l&&u>=l)return{node:o,offset:l-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sm(o)}}function lm(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?lm(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function am(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ba(s.document);l instanceof s.HTMLIFrameElement;){try{var o=typeof l.contentWindow.location.href=="string"}catch{o=!1}if(o)s=l.contentWindow;else break;l=Ba(s.document)}return l}function Ou(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var tw=Un&&"documentMode"in document&&11>=document.documentMode,Ws=null,Au=null,il=null,Du=!1;function om(s,l,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Du||Ws==null||Ws!==Ba(u)||(u=Ws,"selectionStart"in u&&Ou(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),il&&sl(il,u)||(il=u,u=ko(Au,"onSelect"),0<u.length&&(l=new qa("onSelect","select",null,l,o),s.push({event:l,listeners:u}),l.target=Ws)))}function ns(s,l){var o={};return o[s.toLowerCase()]=l.toLowerCase(),o["Webkit"+s]="webkit"+l,o["Moz"+s]="moz"+l,o}var Zs={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},Ru={},cm={};Un&&(cm=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function rs(s){if(Ru[s])return Ru[s];if(!Zs[s])return s;var l=Zs[s],o;for(o in l)if(l.hasOwnProperty(o)&&o in cm)return Ru[s]=l[o];return s}var um=rs("animationend"),fm=rs("animationiteration"),dm=rs("animationstart"),nw=rs("transitionrun"),rw=rs("transitionstart"),sw=rs("transitioncancel"),hm=rs("transitionend"),pm=new Map,ju="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ju.push("scrollEnd");function gn(s,l){pm.set(s,l),es(l,[s])}var mm=new WeakMap;function rn(s,l){if(typeof s=="object"&&s!==null){var o=mm.get(s);return o!==void 0?o:(l={value:s,source:l,stack:Dp(l)},mm.set(s,l),l)}return{value:s,source:l,stack:Dp(l)}}var sn=[],ei=0,_u=0;function Ia(){for(var s=ei,l=_u=ei=0;l<s;){var o=sn[l];sn[l++]=null;var u=sn[l];sn[l++]=null;var p=sn[l];sn[l++]=null;var g=sn[l];if(sn[l++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}g!==0&&gm(o,p,g)}}function Fa(s,l,o,u){sn[ei++]=s,sn[ei++]=l,sn[ei++]=o,sn[ei++]=u,_u|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Bu(s,l,o,u){return Fa(s,l,o,u),$a(s)}function ti(s,l){return Fa(s,null,null,l),$a(s)}function gm(s,l,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var p=!1,g=s.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(p=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,p&&l!==null&&(p=31-Ft(o),s=g.hiddenUpdates,u=s[p],u===null?s[p]=[l]:u.push(l),l.lane=o|536870912),g):null}function $a(s){if(50<Al)throw Al=0,Pf=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var ni={};function iw(s,l,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(s,l,o,u){return new iw(s,l,o,u)}function zu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function qn(s,l){var o=s.alternate;return o===null?(o=Yt(s.tag,l,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=l,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,l=s.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function ym(s,l){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,l=o.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Ya(s,l,o,u,p,g){var w=0;if(u=s,typeof s=="function")zu(s)&&(w=1);else if(typeof s=="string")w=aN(s,o,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case J:return s=Yt(31,o,l,p),s.elementType=J,s.lanes=g,s;case v:return ss(o.children,p,g,l);case N:w=8,p|=24;break;case C:return s=Yt(12,o,l,p|2),s.elementType=C,s.lanes=g,s;case F:return s=Yt(13,o,l,p),s.elementType=F,s.lanes=g,s;case Z:return s=Yt(19,o,l,p),s.elementType=Z,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case M:case q:w=10;break e;case _:w=9;break e;case K:w=11;break e;case Y:w=14;break e;case L:w=16,u=null;break e}w=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return l=Yt(w,o,l,p),l.elementType=s,l.type=u,l.lanes=g,l}function ss(s,l,o,u){return s=Yt(7,s,u,l),s.lanes=o,s}function Lu(s,l,o){return s=Yt(6,s,null,l),s.lanes=o,s}function Hu(s,l,o){return l=Yt(4,s.children!==null?s.children:[],s.key,l),l.lanes=o,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var ri=[],si=0,Ga=null,Ka=0,ln=[],an=0,is=null,Vn=1,Pn="";function ls(s,l){ri[si++]=Ka,ri[si++]=Ga,Ga=s,Ka=l}function bm(s,l,o){ln[an++]=Vn,ln[an++]=Pn,ln[an++]=is,is=s;var u=Vn;s=Pn;var p=32-Ft(u)-1;u&=~(1<<p),o+=1;var g=32-Ft(l)+p;if(30<g){var w=p-p%5;g=(u&(1<<w)-1).toString(32),u>>=w,p-=w,Vn=1<<32-Ft(l)+p|o<<p|u,Pn=g+s}else Vn=1<<g|o<<p|u,Pn=s}function Uu(s){s.return!==null&&(ls(s,1),bm(s,1,0))}function qu(s){for(;s===Ga;)Ga=ri[--si],ri[si]=null,Ka=ri[--si],ri[si]=null;for(;s===is;)is=ln[--an],ln[an]=null,Pn=ln[--an],ln[an]=null,Vn=ln[--an],ln[an]=null}var Mt=null,Fe=null,Me=!1,as=null,Cn=!1,Vu=Error(r(519));function cs(s){var l=Error(r(418,""));throw ol(rn(l,s)),Vu}function xm(s){var l=s.stateNode,o=s.type,u=s.memoizedProps;switch(l[xt]=s,l[jt]=u,o){case"dialog":we("cancel",l),we("close",l);break;case"iframe":case"object":case"embed":we("load",l);break;case"video":case"audio":for(o=0;o<Rl.length;o++)we(Rl[o],l);break;case"source":we("error",l);break;case"img":case"image":case"link":we("error",l),we("load",l);break;case"details":we("toggle",l);break;case"input":we("invalid",l),_p(l,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),_a(l);break;case"select":we("invalid",l);break;case"textarea":we("invalid",l),zp(l,u.value,u.defaultValue,u.children),_a(l)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||l.textContent===""+o||u.suppressHydrationWarning===!0||zy(l.textContent,o)?(u.popover!=null&&(we("beforetoggle",l),we("toggle",l)),u.onScroll!=null&&we("scroll",l),u.onScrollEnd!=null&&we("scrollend",l),u.onClick!=null&&(l.onclick=Oo),l=!0):l=!1,l||cs(s)}function vm(s){for(Mt=s.return;Mt;)switch(Mt.tag){case 5:case 13:Cn=!1;return;case 27:case 3:Cn=!0;return;default:Mt=Mt.return}}function ll(s){if(s!==Mt)return!1;if(!Me)return vm(s),Me=!0,!1;var l=s.tag,o;if((o=l!==3&&l!==27)&&((o=l===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||sd(s.type,s.memoizedProps)),o=!o),o&&Fe&&cs(s),vm(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(o=s.data,o==="/$"){if(l===0){Fe=bn(s.nextSibling);break e}l--}else o!=="$"&&o!=="$!"&&o!=="$?"||l++;s=s.nextSibling}Fe=null}}else l===27?(l=Fe,kr(s.type)?(s=od,od=null,Fe=s):Fe=l):Fe=Mt?bn(s.stateNode.nextSibling):null;return!0}function al(){Fe=Mt=null,Me=!1}function Sm(){var s=as;return s!==null&&(Lt===null?Lt=s:Lt.push.apply(Lt,s),as=null),s}function ol(s){as===null?as=[s]:as.push(s)}var Pu=$(null),us=null,In=null;function hr(s,l,o){Q(Pu,l._currentValue),l._currentValue=o}function Fn(s){s._currentValue=Pu.current,ee(Pu)}function Iu(s,l,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,u!==null&&(u.childLanes|=l)):u!==null&&(u.childLanes&l)!==l&&(u.childLanes|=l),s===o)break;s=s.return}}function Fu(s,l,o,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var g=p.dependencies;if(g!==null){var w=p.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=p;for(var k=0;k<l.length;k++)if(E.context===l[k]){g.lanes|=o,E=g.alternate,E!==null&&(E.lanes|=o),Iu(g.return,o,s),u||(w=null);break e}g=E.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(r(341));w.lanes|=o,g=w.alternate,g!==null&&(g.lanes|=o),Iu(w,o,s),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function cl(s,l,o,u){s=null;for(var p=l,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var E=p.type;$t(p.pendingProps.value,w.value)||(s!==null?s.push(E):s=[E])}}else if(p===Pt.current){if(w=p.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Hl):s=[Hl])}p=p.return}s!==null&&Fu(l,s,o,u),l.flags|=262144}function Ja(s){for(s=s.firstContext;s!==null;){if(!$t(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function fs(s){us=s,In=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function vt(s){return wm(us,s)}function Xa(s,l){return us===null&&fs(s),wm(s,l)}function wm(s,l){var o=l._currentValue;if(l={context:l,memoizedValue:o,next:null},In===null){if(s===null)throw Error(r(308));In=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else In=In.next=l;return o}var lw=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){l.aborted=!0,s.forEach(function(o){return o()})}},aw=n.unstable_scheduleCallback,ow=n.unstable_NormalPriority,Ze={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $u(){return{controller:new lw,data:new Map,refCount:0}}function ul(s){s.refCount--,s.refCount===0&&aw(ow,function(){s.controller.abort()})}var fl=null,Yu=0,ii=0,li=null;function cw(s,l){if(fl===null){var o=fl=[];Yu=0,ii=Jf(),li={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Yu++,l.then(Nm,Nm),l}function Nm(){if(--Yu===0&&fl!==null){li!==null&&(li.status="fulfilled");var s=fl;fl=null,ii=0,li=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function uw(s,l){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return s.then(function(){u.status="fulfilled",u.value=l;for(var p=0;p<o.length;p++)(0,o[p])(l)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var Cm=U.S;U.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&cw(s,l),Cm!==null&&Cm(s,l)};var ds=$(null);function Gu(){var s=ds.current;return s!==null?s:Le.pooledCache}function Qa(s,l){l===null?Q(ds,ds.current):Q(ds,l.pool)}function Em(){var s=Gu();return s===null?null:{parent:Ze._currentValue,pool:s}}var dl=Error(r(460)),Mm=Error(r(474)),Wa=Error(r(542)),Ku={then:function(){}};function Tm(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Za(){}function km(s,l,o){switch(o=s[o],o===void 0?s.push(l):o!==l&&(l.then(Za,Za),l=o),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Am(s),s;default:if(typeof l.status=="string")l.then(Za,Za);else{if(s=Le,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(u){if(l.status==="pending"){var p=l;p.status="fulfilled",p.value=u}},function(u){if(l.status==="pending"){var p=l;p.status="rejected",p.reason=u}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Am(s),s}throw hl=l,dl}}var hl=null;function Om(){if(hl===null)throw Error(r(459));var s=hl;return hl=null,s}function Am(s){if(s===dl||s===Wa)throw Error(r(483))}var pr=!1;function Ju(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xu(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function mr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gr(s,l,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Te&2)!==0){var p=u.pending;return p===null?l.next=l:(l.next=p.next,p.next=l),u.pending=l,l=$a(s),gm(s,null,o),l}return Fa(s,u,l,o),$a(s)}function pl(s,l,o){if(l=l.updateQueue,l!==null&&(l=l.shared,(o&4194048)!==0)){var u=l.lanes;u&=s.pendingLanes,o|=u,l.lanes=o,Np(s,o)}}function Qu(s,l){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?p=g=w:g=g.next=w,o=o.next}while(o!==null);g===null?p=g=l:g=g.next=l}else p=g=l;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=l:s.next=l,o.lastBaseUpdate=l}var Wu=!1;function ml(){if(Wu){var s=li;if(s!==null)throw s}}function gl(s,l,o,u){Wu=!1;var p=s.updateQueue;pr=!1;var g=p.firstBaseUpdate,w=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var k=E,j=k.next;k.next=null,w===null?g=j:w.next=j,w=k;var V=s.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==w&&(E===null?V.firstBaseUpdate=j:E.next=j,V.lastBaseUpdate=k))}if(g!==null){var I=p.baseState;w=0,V=j=k=null,E=g;do{var B=E.lane&-536870913,z=B!==E.lane;if(z?(Ne&B)===B:(u&B)===B){B!==0&&B===ii&&(Wu=!0),V!==null&&(V=V.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var de=s,oe=E;B=l;var je=o;switch(oe.tag){case 1:if(de=oe.payload,typeof de=="function"){I=de.call(je,I,B);break e}I=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=oe.payload,B=typeof de=="function"?de.call(je,I,B):de,B==null)break e;I=m({},I,B);break e;case 2:pr=!0}}B=E.callback,B!==null&&(s.flags|=64,z&&(s.flags|=8192),z=p.callbacks,z===null?p.callbacks=[B]:z.push(B))}else z={lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(j=V=z,k=I):V=V.next=z,w|=B;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;z=E,E=z.next,z.next=null,p.lastBaseUpdate=z,p.shared.pending=null}}while(!0);V===null&&(k=I),p.baseState=k,p.firstBaseUpdate=j,p.lastBaseUpdate=V,g===null&&(p.shared.lanes=0),Cr|=w,s.lanes=w,s.memoizedState=I}}function Dm(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function Rm(s,l){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Dm(o[s],l)}var ai=$(null),eo=$(0);function jm(s,l){s=Qn,Q(eo,s),Q(ai,l),Qn=s|l.baseLanes}function Zu(){Q(eo,Qn),Q(ai,ai.current)}function ef(){Qn=eo.current,ee(ai),ee(eo)}var yr=0,be=null,De=null,Xe=null,to=!1,oi=!1,hs=!1,no=0,yl=0,ci=null,fw=0;function Ge(){throw Error(r(321))}function tf(s,l){if(l===null)return!1;for(var o=0;o<l.length&&o<s.length;o++)if(!$t(s[o],l[o]))return!1;return!0}function nf(s,l,o,u,p,g){return yr=g,be=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U.H=s===null||s.memoizedState===null?gg:yg,hs=!1,g=o(u,p),hs=!1,oi&&(g=Bm(l,o,u,p)),_m(s),g}function _m(s){U.H=oo;var l=De!==null&&De.next!==null;if(yr=0,Xe=De=be=null,to=!1,yl=0,ci=null,l)throw Error(r(300));s===null||rt||(s=s.dependencies,s!==null&&Ja(s)&&(rt=!0))}function Bm(s,l,o,u){be=s;var p=0;do{if(oi&&(ci=null),yl=0,oi=!1,25<=p)throw Error(r(301));if(p+=1,Xe=De=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}U.H=bw,g=l(o,u)}while(oi);return g}function dw(){var s=U.H,l=s.useState()[0];return l=typeof l.then=="function"?bl(l):l,s=s.useState()[0],(De!==null?De.memoizedState:null)!==s&&(be.flags|=1024),l}function rf(){var s=no!==0;return no=0,s}function sf(s,l,o){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~o}function lf(s){if(to){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}to=!1}yr=0,Xe=De=be=null,oi=!1,yl=no=0,ci=null}function Bt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?be.memoizedState=Xe=s:Xe=Xe.next=s,Xe}function Qe(){if(De===null){var s=be.alternate;s=s!==null?s.memoizedState:null}else s=De.next;var l=Xe===null?be.memoizedState:Xe.next;if(l!==null)Xe=l,De=s;else{if(s===null)throw be.alternate===null?Error(r(467)):Error(r(310));De=s,s={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Xe===null?be.memoizedState=Xe=s:Xe=Xe.next=s}return Xe}function af(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(s){var l=yl;return yl+=1,ci===null&&(ci=[]),s=km(ci,s,l),l=be,(Xe===null?l.memoizedState:Xe.next)===null&&(l=l.alternate,U.H=l===null||l.memoizedState===null?gg:yg),s}function ro(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return bl(s);if(s.$$typeof===q)return vt(s)}throw Error(r(438,String(s)))}function of(s){var l=null,o=be.updateQueue;if(o!==null&&(l=o.memoCache),l==null){var u=be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(l={data:u.data.map(function(p){return p.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),o===null&&(o=af(),be.updateQueue=o),o.memoCache=l,o=l.data[l.index],o===void 0)for(o=l.data[l.index]=Array(s),u=0;u<s;u++)o[u]=le;return l.index++,o}function $n(s,l){return typeof l=="function"?l(s):l}function so(s){var l=Qe();return cf(l,De,s)}function cf(s,l,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var p=s.baseQueue,g=u.pending;if(g!==null){if(p!==null){var w=p.next;p.next=g.next,g.next=w}l.baseQueue=p=g,u.pending=null}if(g=s.baseState,p===null)s.memoizedState=g;else{l=p.next;var E=w=null,k=null,j=l,V=!1;do{var I=j.lane&-536870913;if(I!==j.lane?(Ne&I)===I:(yr&I)===I){var B=j.revertLane;if(B===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),I===ii&&(V=!0);else if((yr&B)===B){j=j.next,B===ii&&(V=!0);continue}else I={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(E=k=I,w=g):k=k.next=I,be.lanes|=B,Cr|=B;I=j.action,hs&&o(g,I),g=j.hasEagerState?j.eagerState:o(g,I)}else B={lane:I,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(E=k=B,w=g):k=k.next=B,be.lanes|=I,Cr|=I;j=j.next}while(j!==null&&j!==l);if(k===null?w=g:k.next=E,!$t(g,s.memoizedState)&&(rt=!0,V&&(o=li,o!==null)))throw o;s.memoizedState=g,s.baseState=w,s.baseQueue=k,u.lastRenderedState=g}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function uf(s){var l=Qe(),o=l.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,p=o.pending,g=l.memoizedState;if(p!==null){o.pending=null;var w=p=p.next;do g=s(g,w.action),w=w.next;while(w!==p);$t(g,l.memoizedState)||(rt=!0),l.memoizedState=g,l.baseQueue===null&&(l.baseState=g),o.lastRenderedState=g}return[g,u]}function zm(s,l,o){var u=be,p=Qe(),g=Me;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=l();var w=!$t((De||p).memoizedState,o);w&&(p.memoizedState=o,rt=!0),p=p.queue;var E=Um.bind(null,u,p,s);if(xl(2048,8,E,[s]),p.getSnapshot!==l||w||Xe!==null&&Xe.memoizedState.tag&1){if(u.flags|=2048,ui(9,io(),Hm.bind(null,u,p,o,l),null),Le===null)throw Error(r(349));g||(yr&124)!==0||Lm(u,l,o)}return o}function Lm(s,l,o){s.flags|=16384,s={getSnapshot:l,value:o},l=be.updateQueue,l===null?(l=af(),be.updateQueue=l,l.stores=[s]):(o=l.stores,o===null?l.stores=[s]:o.push(s))}function Hm(s,l,o,u){l.value=o,l.getSnapshot=u,qm(l)&&Vm(s)}function Um(s,l,o){return o(function(){qm(l)&&Vm(s)})}function qm(s){var l=s.getSnapshot;s=s.value;try{var o=l();return!$t(s,o)}catch{return!0}}function Vm(s){var l=ti(s,2);l!==null&&Qt(l,s,2)}function ff(s){var l=Bt();if(typeof s=="function"){var o=s;if(s=o(),hs){ur(!0);try{o()}finally{ur(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:s},l}function Pm(s,l,o,u){return s.baseState=o,cf(s,De,typeof u=="function"?u:$n)}function hw(s,l,o,u,p){if(ao(s))throw Error(r(485));if(s=l.action,s!==null){var g={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};U.T!==null?o(!0):g.isTransition=!1,u(g),o=l.pending,o===null?(g.next=l.pending=g,Im(l,g)):(g.next=o.next,l.pending=o.next=g)}}function Im(s,l){var o=l.action,u=l.payload,p=s.state;if(l.isTransition){var g=U.T,w={};U.T=w;try{var E=o(p,u),k=U.S;k!==null&&k(w,E),Fm(s,l,E)}catch(j){df(s,l,j)}finally{U.T=g}}else try{g=o(p,u),Fm(s,l,g)}catch(j){df(s,l,j)}}function Fm(s,l,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){$m(s,l,u)},function(u){return df(s,l,u)}):$m(s,l,o)}function $m(s,l,o){l.status="fulfilled",l.value=o,Ym(l),s.state=o,l=s.pending,l!==null&&(o=l.next,o===l?s.pending=null:(o=o.next,l.next=o,Im(s,o)))}function df(s,l,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do l.status="rejected",l.reason=o,Ym(l),l=l.next;while(l!==u)}s.action=null}function Ym(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function Gm(s,l){return l}function Km(s,l){if(Me){var o=Le.formState;if(o!==null){e:{var u=be;if(Me){if(Fe){t:{for(var p=Fe,g=Cn;p.nodeType!==8;){if(!g){p=null;break t}if(p=bn(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){Fe=bn(p.nextSibling),u=p.data==="F!";break e}}cs(u)}u=!1}u&&(l=o[0])}}return o=Bt(),o.memoizedState=o.baseState=l,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gm,lastRenderedState:l},o.queue=u,o=hg.bind(null,be,u),u.dispatch=o,u=ff(!1),g=yf.bind(null,be,!1,u.queue),u=Bt(),p={state:l,dispatch:null,action:s,pending:null},u.queue=p,o=hw.bind(null,be,p,g,o),p.dispatch=o,u.memoizedState=s,[l,o,!1]}function Jm(s){var l=Qe();return Xm(l,De,s)}function Xm(s,l,o){if(l=cf(s,l,Gm)[0],s=so($n)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var u=bl(l)}catch(w){throw w===dl?Wa:w}else u=l;l=Qe();var p=l.queue,g=p.dispatch;return o!==l.memoizedState&&(be.flags|=2048,ui(9,io(),pw.bind(null,p,o),null)),[u,g,s]}function pw(s,l){s.action=l}function Qm(s){var l=Qe(),o=De;if(o!==null)return Xm(l,o,s);Qe(),l=l.memoizedState,o=Qe();var u=o.queue.dispatch;return o.memoizedState=s,[l,u,!1]}function ui(s,l,o,u){return s={tag:s,create:o,deps:u,inst:l,next:null},l=be.updateQueue,l===null&&(l=af(),be.updateQueue=l),o=l.lastEffect,o===null?l.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,l.lastEffect=s),s}function io(){return{destroy:void 0,resource:void 0}}function Wm(){return Qe().memoizedState}function lo(s,l,o,u){var p=Bt();u=u===void 0?null:u,be.flags|=s,p.memoizedState=ui(1|l,io(),o,u)}function xl(s,l,o,u){var p=Qe();u=u===void 0?null:u;var g=p.memoizedState.inst;De!==null&&u!==null&&tf(u,De.memoizedState.deps)?p.memoizedState=ui(l,g,o,u):(be.flags|=s,p.memoizedState=ui(1|l,g,o,u))}function Zm(s,l){lo(8390656,8,s,l)}function eg(s,l){xl(2048,8,s,l)}function tg(s,l){return xl(4,2,s,l)}function ng(s,l){return xl(4,4,s,l)}function rg(s,l){if(typeof l=="function"){s=s();var o=l(s);return function(){typeof o=="function"?o():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function sg(s,l,o){o=o!=null?o.concat([s]):null,xl(4,4,rg.bind(null,l,s),o)}function hf(){}function ig(s,l){var o=Qe();l=l===void 0?null:l;var u=o.memoizedState;return l!==null&&tf(l,u[1])?u[0]:(o.memoizedState=[s,l],s)}function lg(s,l){var o=Qe();l=l===void 0?null:l;var u=o.memoizedState;if(l!==null&&tf(l,u[1]))return u[0];if(u=s(),hs){ur(!0);try{s()}finally{ur(!1)}}return o.memoizedState=[u,l],u}function pf(s,l,o){return o===void 0||(yr&1073741824)!==0?s.memoizedState=l:(s.memoizedState=o,s=cy(),be.lanes|=s,Cr|=s,o)}function ag(s,l,o,u){return $t(o,l)?o:ai.current!==null?(s=pf(s,o,u),$t(s,l)||(rt=!0),s):(yr&42)===0?(rt=!0,s.memoizedState=o):(s=cy(),be.lanes|=s,Cr|=s,l)}function og(s,l,o,u,p){var g=X.p;X.p=g!==0&&8>g?g:8;var w=U.T,E={};U.T=E,yf(s,!1,l,o);try{var k=p(),j=U.S;if(j!==null&&j(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var V=uw(k,u);vl(s,l,V,Xt(s))}else vl(s,l,u,Xt(s))}catch(I){vl(s,l,{then:function(){},status:"rejected",reason:I},Xt())}finally{X.p=g,U.T=w}}function mw(){}function mf(s,l,o,u){if(s.tag!==5)throw Error(r(476));var p=cg(s).queue;og(s,p,l,fe,o===null?mw:function(){return ug(s),o(u)})}function cg(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:fe},next:null};var o={};return l.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:o},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function ug(s){var l=cg(s).next.queue;vl(s,l,{},Xt())}function gf(){return vt(Hl)}function fg(){return Qe().memoizedState}function dg(){return Qe().memoizedState}function gw(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var o=Xt();s=mr(o);var u=gr(l,s,o);u!==null&&(Qt(u,l,o),pl(u,l,o)),l={cache:$u()},s.payload=l;return}l=l.return}}function yw(s,l,o){var u=Xt();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},ao(s)?pg(l,o):(o=Bu(s,l,o,u),o!==null&&(Qt(o,s,u),mg(o,l,u)))}function hg(s,l,o){var u=Xt();vl(s,l,o,u)}function vl(s,l,o,u){var p={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(ao(s))pg(l,p);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=l.lastRenderedReducer,g!==null))try{var w=l.lastRenderedState,E=g(w,o);if(p.hasEagerState=!0,p.eagerState=E,$t(E,w))return Fa(s,l,p,0),Le===null&&Ia(),!1}catch{}finally{}if(o=Bu(s,l,p,u),o!==null)return Qt(o,s,u),mg(o,l,u),!0}return!1}function yf(s,l,o,u){if(u={lane:2,revertLane:Jf(),action:u,hasEagerState:!1,eagerState:null,next:null},ao(s)){if(l)throw Error(r(479))}else l=Bu(s,o,u,2),l!==null&&Qt(l,s,2)}function ao(s){var l=s.alternate;return s===be||l!==null&&l===be}function pg(s,l){oi=to=!0;var o=s.pending;o===null?l.next=l:(l.next=o.next,o.next=l),s.pending=l}function mg(s,l,o){if((o&4194048)!==0){var u=l.lanes;u&=s.pendingLanes,o|=u,l.lanes=o,Np(s,o)}}var oo={readContext:vt,use:ro,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge},gg={readContext:vt,use:ro,useCallback:function(s,l){return Bt().memoizedState=[s,l===void 0?null:l],s},useContext:vt,useEffect:Zm,useImperativeHandle:function(s,l,o){o=o!=null?o.concat([s]):null,lo(4194308,4,rg.bind(null,l,s),o)},useLayoutEffect:function(s,l){return lo(4194308,4,s,l)},useInsertionEffect:function(s,l){lo(4,2,s,l)},useMemo:function(s,l){var o=Bt();l=l===void 0?null:l;var u=s();if(hs){ur(!0);try{s()}finally{ur(!1)}}return o.memoizedState=[u,l],u},useReducer:function(s,l,o){var u=Bt();if(o!==void 0){var p=o(l);if(hs){ur(!0);try{o(l)}finally{ur(!1)}}}else p=l;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=yw.bind(null,be,s),[u.memoizedState,s]},useRef:function(s){var l=Bt();return s={current:s},l.memoizedState=s},useState:function(s){s=ff(s);var l=s.queue,o=hg.bind(null,be,l);return l.dispatch=o,[s.memoizedState,o]},useDebugValue:hf,useDeferredValue:function(s,l){var o=Bt();return pf(o,s,l)},useTransition:function(){var s=ff(!1);return s=og.bind(null,be,s.queue,!0,!1),Bt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,o){var u=be,p=Bt();if(Me){if(o===void 0)throw Error(r(407));o=o()}else{if(o=l(),Le===null)throw Error(r(349));(Ne&124)!==0||Lm(u,l,o)}p.memoizedState=o;var g={value:o,getSnapshot:l};return p.queue=g,Zm(Um.bind(null,u,g,s),[s]),u.flags|=2048,ui(9,io(),Hm.bind(null,u,g,o,l),null),o},useId:function(){var s=Bt(),l=Le.identifierPrefix;if(Me){var o=Pn,u=Vn;o=(u&~(1<<32-Ft(u)-1)).toString(32)+o,l="«"+l+"R"+o,o=no++,0<o&&(l+="H"+o.toString(32)),l+="»"}else o=fw++,l="«"+l+"r"+o.toString(32)+"»";return s.memoizedState=l},useHostTransitionStatus:gf,useFormState:Km,useActionState:Km,useOptimistic:function(s){var l=Bt();l.memoizedState=l.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=o,l=yf.bind(null,be,!0,o),o.dispatch=l,[s,l]},useMemoCache:of,useCacheRefresh:function(){return Bt().memoizedState=gw.bind(null,be)}},yg={readContext:vt,use:ro,useCallback:ig,useContext:vt,useEffect:eg,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:lg,useReducer:so,useRef:Wm,useState:function(){return so($n)},useDebugValue:hf,useDeferredValue:function(s,l){var o=Qe();return ag(o,De.memoizedState,s,l)},useTransition:function(){var s=so($n)[0],l=Qe().memoizedState;return[typeof s=="boolean"?s:bl(s),l]},useSyncExternalStore:zm,useId:fg,useHostTransitionStatus:gf,useFormState:Jm,useActionState:Jm,useOptimistic:function(s,l){var o=Qe();return Pm(o,De,s,l)},useMemoCache:of,useCacheRefresh:dg},bw={readContext:vt,use:ro,useCallback:ig,useContext:vt,useEffect:eg,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:lg,useReducer:uf,useRef:Wm,useState:function(){return uf($n)},useDebugValue:hf,useDeferredValue:function(s,l){var o=Qe();return De===null?pf(o,s,l):ag(o,De.memoizedState,s,l)},useTransition:function(){var s=uf($n)[0],l=Qe().memoizedState;return[typeof s=="boolean"?s:bl(s),l]},useSyncExternalStore:zm,useId:fg,useHostTransitionStatus:gf,useFormState:Qm,useActionState:Qm,useOptimistic:function(s,l){var o=Qe();return De!==null?Pm(o,De,s,l):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:of,useCacheRefresh:dg},fi=null,Sl=0;function co(s){var l=Sl;return Sl+=1,fi===null&&(fi=[]),km(fi,s,l)}function wl(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function uo(s,l){throw l.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function bg(s){var l=s._init;return l(s._payload)}function xg(s){function l(D,A){if(s){var R=D.deletions;R===null?(D.deletions=[A],D.flags|=16):R.push(A)}}function o(D,A){if(!s)return null;for(;A!==null;)l(D,A),A=A.sibling;return null}function u(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function p(D,A){return D=qn(D,A),D.index=0,D.sibling=null,D}function g(D,A,R){return D.index=R,s?(R=D.alternate,R!==null?(R=R.index,R<A?(D.flags|=67108866,A):R):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function w(D){return s&&D.alternate===null&&(D.flags|=67108866),D}function E(D,A,R,P){return A===null||A.tag!==6?(A=Lu(R,D.mode,P),A.return=D,A):(A=p(A,R),A.return=D,A)}function k(D,A,R,P){var te=R.type;return te===v?V(D,A,R.props.children,P,R.key):A!==null&&(A.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===L&&bg(te)===A.type)?(A=p(A,R.props),wl(A,R),A.return=D,A):(A=Ya(R.type,R.key,R.props,null,D.mode,P),wl(A,R),A.return=D,A)}function j(D,A,R,P){return A===null||A.tag!==4||A.stateNode.containerInfo!==R.containerInfo||A.stateNode.implementation!==R.implementation?(A=Hu(R,D.mode,P),A.return=D,A):(A=p(A,R.children||[]),A.return=D,A)}function V(D,A,R,P,te){return A===null||A.tag!==7?(A=ss(R,D.mode,P,te),A.return=D,A):(A=p(A,R),A.return=D,A)}function I(D,A,R){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Lu(""+A,D.mode,R),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case x:return R=Ya(A.type,A.key,A.props,null,D.mode,R),wl(R,A),R.return=D,R;case S:return A=Hu(A,D.mode,R),A.return=D,A;case L:var P=A._init;return A=P(A._payload),I(D,A,R)}if(Ae(A)||ce(A))return A=ss(A,D.mode,R,null),A.return=D,A;if(typeof A.then=="function")return I(D,co(A),R);if(A.$$typeof===q)return I(D,Xa(D,A),R);uo(D,A)}return null}function B(D,A,R,P){var te=A!==null?A.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return te!==null?null:E(D,A,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case x:return R.key===te?k(D,A,R,P):null;case S:return R.key===te?j(D,A,R,P):null;case L:return te=R._init,R=te(R._payload),B(D,A,R,P)}if(Ae(R)||ce(R))return te!==null?null:V(D,A,R,P,null);if(typeof R.then=="function")return B(D,A,co(R),P);if(R.$$typeof===q)return B(D,A,Xa(D,R),P);uo(D,R)}return null}function z(D,A,R,P,te){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return D=D.get(R)||null,E(A,D,""+P,te);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case x:return D=D.get(P.key===null?R:P.key)||null,k(A,D,P,te);case S:return D=D.get(P.key===null?R:P.key)||null,j(A,D,P,te);case L:var ve=P._init;return P=ve(P._payload),z(D,A,R,P,te)}if(Ae(P)||ce(P))return D=D.get(R)||null,V(A,D,P,te,null);if(typeof P.then=="function")return z(D,A,R,co(P),te);if(P.$$typeof===q)return z(D,A,R,Xa(A,P),te);uo(A,P)}return null}function de(D,A,R,P){for(var te=null,ve=null,se=A,ue=A=0,it=null;se!==null&&ue<R.length;ue++){se.index>ue?(it=se,se=null):it=se.sibling;var Ee=B(D,se,R[ue],P);if(Ee===null){se===null&&(se=it);break}s&&se&&Ee.alternate===null&&l(D,se),A=g(Ee,A,ue),ve===null?te=Ee:ve.sibling=Ee,ve=Ee,se=it}if(ue===R.length)return o(D,se),Me&&ls(D,ue),te;if(se===null){for(;ue<R.length;ue++)se=I(D,R[ue],P),se!==null&&(A=g(se,A,ue),ve===null?te=se:ve.sibling=se,ve=se);return Me&&ls(D,ue),te}for(se=u(se);ue<R.length;ue++)it=z(se,D,ue,R[ue],P),it!==null&&(s&&it.alternate!==null&&se.delete(it.key===null?ue:it.key),A=g(it,A,ue),ve===null?te=it:ve.sibling=it,ve=it);return s&&se.forEach(function(jr){return l(D,jr)}),Me&&ls(D,ue),te}function oe(D,A,R,P){if(R==null)throw Error(r(151));for(var te=null,ve=null,se=A,ue=A=0,it=null,Ee=R.next();se!==null&&!Ee.done;ue++,Ee=R.next()){se.index>ue?(it=se,se=null):it=se.sibling;var jr=B(D,se,Ee.value,P);if(jr===null){se===null&&(se=it);break}s&&se&&jr.alternate===null&&l(D,se),A=g(jr,A,ue),ve===null?te=jr:ve.sibling=jr,ve=jr,se=it}if(Ee.done)return o(D,se),Me&&ls(D,ue),te;if(se===null){for(;!Ee.done;ue++,Ee=R.next())Ee=I(D,Ee.value,P),Ee!==null&&(A=g(Ee,A,ue),ve===null?te=Ee:ve.sibling=Ee,ve=Ee);return Me&&ls(D,ue),te}for(se=u(se);!Ee.done;ue++,Ee=R.next())Ee=z(se,D,ue,Ee.value,P),Ee!==null&&(s&&Ee.alternate!==null&&se.delete(Ee.key===null?ue:Ee.key),A=g(Ee,A,ue),ve===null?te=Ee:ve.sibling=Ee,ve=Ee);return s&&se.forEach(function(xN){return l(D,xN)}),Me&&ls(D,ue),te}function je(D,A,R,P){if(typeof R=="object"&&R!==null&&R.type===v&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case x:e:{for(var te=R.key;A!==null;){if(A.key===te){if(te=R.type,te===v){if(A.tag===7){o(D,A.sibling),P=p(A,R.props.children),P.return=D,D=P;break e}}else if(A.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===L&&bg(te)===A.type){o(D,A.sibling),P=p(A,R.props),wl(P,R),P.return=D,D=P;break e}o(D,A);break}else l(D,A);A=A.sibling}R.type===v?(P=ss(R.props.children,D.mode,P,R.key),P.return=D,D=P):(P=Ya(R.type,R.key,R.props,null,D.mode,P),wl(P,R),P.return=D,D=P)}return w(D);case S:e:{for(te=R.key;A!==null;){if(A.key===te)if(A.tag===4&&A.stateNode.containerInfo===R.containerInfo&&A.stateNode.implementation===R.implementation){o(D,A.sibling),P=p(A,R.children||[]),P.return=D,D=P;break e}else{o(D,A);break}else l(D,A);A=A.sibling}P=Hu(R,D.mode,P),P.return=D,D=P}return w(D);case L:return te=R._init,R=te(R._payload),je(D,A,R,P)}if(Ae(R))return de(D,A,R,P);if(ce(R)){if(te=ce(R),typeof te!="function")throw Error(r(150));return R=te.call(R),oe(D,A,R,P)}if(typeof R.then=="function")return je(D,A,co(R),P);if(R.$$typeof===q)return je(D,A,Xa(D,R),P);uo(D,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,A!==null&&A.tag===6?(o(D,A.sibling),P=p(A,R),P.return=D,D=P):(o(D,A),P=Lu(R,D.mode,P),P.return=D,D=P),w(D)):o(D,A)}return function(D,A,R,P){try{Sl=0;var te=je(D,A,R,P);return fi=null,te}catch(se){if(se===dl||se===Wa)throw se;var ve=Yt(29,se,null,D.mode);return ve.lanes=P,ve.return=D,ve}finally{}}}var di=xg(!0),vg=xg(!1),on=$(null),En=null;function br(s){var l=s.alternate;Q(et,et.current&1),Q(on,s),En===null&&(l===null||ai.current!==null||l.memoizedState!==null)&&(En=s)}function Sg(s){if(s.tag===22){if(Q(et,et.current),Q(on,s),En===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(En=s)}}else xr()}function xr(){Q(et,et.current),Q(on,on.current)}function Yn(s){ee(on),En===s&&(En=null),ee(et)}var et=$(0);function fo(s){for(var l=s;l!==null;){if(l.tag===13){var o=l.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ad(o)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function bf(s,l,o,u){l=s.memoizedState,o=o(u,l),o=o==null?l:m({},l,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var xf={enqueueSetState:function(s,l,o){s=s._reactInternals;var u=Xt(),p=mr(u);p.payload=l,o!=null&&(p.callback=o),l=gr(s,p,u),l!==null&&(Qt(l,s,u),pl(l,s,u))},enqueueReplaceState:function(s,l,o){s=s._reactInternals;var u=Xt(),p=mr(u);p.tag=1,p.payload=l,o!=null&&(p.callback=o),l=gr(s,p,u),l!==null&&(Qt(l,s,u),pl(l,s,u))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var o=Xt(),u=mr(o);u.tag=2,l!=null&&(u.callback=l),l=gr(s,u,o),l!==null&&(Qt(l,s,o),pl(l,s,o))}};function wg(s,l,o,u,p,g,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,g,w):l.prototype&&l.prototype.isPureReactComponent?!sl(o,u)||!sl(p,g):!0}function Ng(s,l,o,u){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(o,u),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(o,u),l.state!==s&&xf.enqueueReplaceState(l,l.state,null)}function ps(s,l){var o=l;if("ref"in l){o={};for(var u in l)u!=="ref"&&(o[u]=l[u])}if(s=s.defaultProps){o===l&&(o=m({},o));for(var p in s)o[p]===void 0&&(o[p]=s[p])}return o}var ho=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Cg(s){ho(s)}function Eg(s){console.error(s)}function Mg(s){ho(s)}function po(s,l){try{var o=s.onUncaughtError;o(l.value,{componentStack:l.stack})}catch(u){setTimeout(function(){throw u})}}function Tg(s,l,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function vf(s,l,o){return o=mr(o),o.tag=3,o.payload={element:null},o.callback=function(){po(s,l)},o}function kg(s){return s=mr(s),s.tag=3,s}function Og(s,l,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;s.payload=function(){return p(g)},s.callback=function(){Tg(l,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){Tg(l,o,u),typeof p!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function xw(s,l,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(l=o.alternate,l!==null&&cl(l,o,p,!0),o=on.current,o!==null){switch(o.tag){case 13:return En===null?Ff():o.alternate===null&&$e===0&&($e=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===Ku?o.flags|=16384:(l=o.updateQueue,l===null?o.updateQueue=new Set([u]):l.add(u),Yf(s,u,p)),!1;case 22:return o.flags|=65536,u===Ku?o.flags|=16384:(l=o.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=l):(o=l.retryQueue,o===null?l.retryQueue=new Set([u]):o.add(u)),Yf(s,u,p)),!1}throw Error(r(435,o.tag))}return Yf(s,u,p),Ff(),!1}if(Me)return l=on.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=p,u!==Vu&&(s=Error(r(422),{cause:u}),ol(rn(s,o)))):(u!==Vu&&(l=Error(r(423),{cause:u}),ol(rn(l,o))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=rn(u,o),p=vf(s.stateNode,u,p),Qu(s,p),$e!==4&&($e=2)),!1;var g=Error(r(520),{cause:u});if(g=rn(g,o),Ol===null?Ol=[g]:Ol.push(g),$e!==4&&($e=2),l===null)return!0;u=rn(u,o),o=l;do{switch(o.tag){case 3:return o.flags|=65536,s=p&-p,o.lanes|=s,s=vf(o.stateNode,u,s),Qu(o,s),!1;case 1:if(l=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Er===null||!Er.has(g))))return o.flags|=65536,p&=-p,o.lanes|=p,p=kg(p),Og(p,s,o,u),Qu(o,p),!1}o=o.return}while(o!==null);return!1}var Ag=Error(r(461)),rt=!1;function dt(s,l,o,u){l.child=s===null?vg(l,null,o,u):di(l,s.child,o,u)}function Dg(s,l,o,u,p){o=o.render;var g=l.ref;if("ref"in u){var w={};for(var E in u)E!=="ref"&&(w[E]=u[E])}else w=u;return fs(l),u=nf(s,l,o,w,g,p),E=rf(),s!==null&&!rt?(sf(s,l,p),Gn(s,l,p)):(Me&&E&&Uu(l),l.flags|=1,dt(s,l,u,p),l.child)}function Rg(s,l,o,u,p){if(s===null){var g=o.type;return typeof g=="function"&&!zu(g)&&g.defaultProps===void 0&&o.compare===null?(l.tag=15,l.type=g,jg(s,l,g,u,p)):(s=Ya(o.type,null,u,l,l.mode,p),s.ref=l.ref,s.return=l,l.child=s)}if(g=s.child,!kf(s,p)){var w=g.memoizedProps;if(o=o.compare,o=o!==null?o:sl,o(w,u)&&s.ref===l.ref)return Gn(s,l,p)}return l.flags|=1,s=qn(g,u),s.ref=l.ref,s.return=l,l.child=s}function jg(s,l,o,u,p){if(s!==null){var g=s.memoizedProps;if(sl(g,u)&&s.ref===l.ref)if(rt=!1,l.pendingProps=u=g,kf(s,p))(s.flags&131072)!==0&&(rt=!0);else return l.lanes=s.lanes,Gn(s,l,p)}return Sf(s,l,o,u,p)}function _g(s,l,o){var u=l.pendingProps,p=u.children,g=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((l.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,s!==null){for(p=l.child=s.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;l.childLanes=g&~u}else l.childLanes=0,l.child=null;return Bg(s,l,u,o)}if((o&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Qa(l,g!==null?g.cachePool:null),g!==null?jm(l,g):Zu(),Sg(l);else return l.lanes=l.childLanes=536870912,Bg(s,l,g!==null?g.baseLanes|o:o,o)}else g!==null?(Qa(l,g.cachePool),jm(l,g),xr(),l.memoizedState=null):(s!==null&&Qa(l,null),Zu(),xr());return dt(s,l,p,o),l.child}function Bg(s,l,o,u){var p=Gu();return p=p===null?null:{parent:Ze._currentValue,pool:p},l.memoizedState={baseLanes:o,cachePool:p},s!==null&&Qa(l,null),Zu(),Sg(l),s!==null&&cl(s,l,u,!0),null}function mo(s,l){var o=l.ref;if(o===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(l.flags|=4194816)}}function Sf(s,l,o,u,p){return fs(l),o=nf(s,l,o,u,void 0,p),u=rf(),s!==null&&!rt?(sf(s,l,p),Gn(s,l,p)):(Me&&u&&Uu(l),l.flags|=1,dt(s,l,o,p),l.child)}function zg(s,l,o,u,p,g){return fs(l),l.updateQueue=null,o=Bm(l,u,o,p),_m(s),u=rf(),s!==null&&!rt?(sf(s,l,g),Gn(s,l,g)):(Me&&u&&Uu(l),l.flags|=1,dt(s,l,o,g),l.child)}function Lg(s,l,o,u,p){if(fs(l),l.stateNode===null){var g=ni,w=o.contextType;typeof w=="object"&&w!==null&&(g=vt(w)),g=new o(u,g),l.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=xf,l.stateNode=g,g._reactInternals=l,g=l.stateNode,g.props=u,g.state=l.memoizedState,g.refs={},Ju(l),w=o.contextType,g.context=typeof w=="object"&&w!==null?vt(w):ni,g.state=l.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(bf(l,o,w,u),g.state=l.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&xf.enqueueReplaceState(g,g.state,null),gl(l,u,g,p),ml(),g.state=l.memoizedState),typeof g.componentDidMount=="function"&&(l.flags|=4194308),u=!0}else if(s===null){g=l.stateNode;var E=l.memoizedProps,k=ps(o,E);g.props=k;var j=g.context,V=o.contextType;w=ni,typeof V=="object"&&V!==null&&(w=vt(V));var I=o.getDerivedStateFromProps;V=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=l.pendingProps!==E,V||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||j!==w)&&Ng(l,g,u,w),pr=!1;var B=l.memoizedState;g.state=B,gl(l,u,g,p),ml(),j=l.memoizedState,E||B!==j||pr?(typeof I=="function"&&(bf(l,o,I,u),j=l.memoizedState),(k=pr||wg(l,o,k,u,B,j,w))?(V||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(l.flags|=4194308)):(typeof g.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=u,l.memoizedState=j),g.props=u,g.state=j,g.context=w,u=k):(typeof g.componentDidMount=="function"&&(l.flags|=4194308),u=!1)}else{g=l.stateNode,Xu(s,l),w=l.memoizedProps,V=ps(o,w),g.props=V,I=l.pendingProps,B=g.context,j=o.contextType,k=ni,typeof j=="object"&&j!==null&&(k=vt(j)),E=o.getDerivedStateFromProps,(j=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==I||B!==k)&&Ng(l,g,u,k),pr=!1,B=l.memoizedState,g.state=B,gl(l,u,g,p),ml();var z=l.memoizedState;w!==I||B!==z||pr||s!==null&&s.dependencies!==null&&Ja(s.dependencies)?(typeof E=="function"&&(bf(l,o,E,u),z=l.memoizedState),(V=pr||wg(l,o,V,u,B,z,k)||s!==null&&s.dependencies!==null&&Ja(s.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,z,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,z,k)),typeof g.componentDidUpdate=="function"&&(l.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===s.memoizedProps&&B===s.memoizedState||(l.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&B===s.memoizedState||(l.flags|=1024),l.memoizedProps=u,l.memoizedState=z),g.props=u,g.state=z,g.context=k,u=V):(typeof g.componentDidUpdate!="function"||w===s.memoizedProps&&B===s.memoizedState||(l.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&B===s.memoizedState||(l.flags|=1024),u=!1)}return g=u,mo(s,l),u=(l.flags&128)!==0,g||u?(g=l.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),l.flags|=1,s!==null&&u?(l.child=di(l,s.child,null,p),l.child=di(l,null,o,p)):dt(s,l,o,p),l.memoizedState=g.state,s=l.child):s=Gn(s,l,p),s}function Hg(s,l,o,u){return al(),l.flags|=256,dt(s,l,o,u),l.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(s){return{baseLanes:s,cachePool:Em()}}function Cf(s,l,o){return s=s!==null?s.childLanes&~o:0,l&&(s|=cn),s}function Ug(s,l,o){var u=l.pendingProps,p=!1,g=(l.flags&128)!==0,w;if((w=g)||(w=s!==null&&s.memoizedState===null?!1:(et.current&2)!==0),w&&(p=!0,l.flags&=-129),w=(l.flags&32)!==0,l.flags&=-33,s===null){if(Me){if(p?br(l):xr(),Me){var E=Fe,k;if(k=E){e:{for(k=E,E=Cn;k.nodeType!==8;){if(!E){E=null;break e}if(k=bn(k.nextSibling),k===null){E=null;break e}}E=k}E!==null?(l.memoizedState={dehydrated:E,treeContext:is!==null?{id:Vn,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},k=Yt(18,null,null,0),k.stateNode=E,k.return=l,l.child=k,Mt=l,Fe=null,k=!0):k=!1}k||cs(l)}if(E=l.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return ad(E)?l.lanes=32:l.lanes=536870912,null;Yn(l)}return E=u.children,u=u.fallback,p?(xr(),p=l.mode,E=go({mode:"hidden",children:E},p),u=ss(u,p,o,null),E.return=l,u.return=l,E.sibling=u,l.child=E,p=l.child,p.memoizedState=Nf(o),p.childLanes=Cf(s,w,o),l.memoizedState=wf,u):(br(l),Ef(l,E))}if(k=s.memoizedState,k!==null&&(E=k.dehydrated,E!==null)){if(g)l.flags&256?(br(l),l.flags&=-257,l=Mf(s,l,o)):l.memoizedState!==null?(xr(),l.child=s.child,l.flags|=128,l=null):(xr(),p=u.fallback,E=l.mode,u=go({mode:"visible",children:u.children},E),p=ss(p,E,o,null),p.flags|=2,u.return=l,p.return=l,u.sibling=p,l.child=u,di(l,s.child,null,o),u=l.child,u.memoizedState=Nf(o),u.childLanes=Cf(s,w,o),l.memoizedState=wf,l=p);else if(br(l),ad(E)){if(w=E.nextSibling&&E.nextSibling.dataset,w)var j=w.dgst;w=j,u=Error(r(419)),u.stack="",u.digest=w,ol({value:u,source:null,stack:null}),l=Mf(s,l,o)}else if(rt||cl(s,l,o,!1),w=(o&s.childLanes)!==0,rt||w){if(w=Le,w!==null&&(u=o&-o,u=(u&42)!==0?1:au(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==k.retryLane))throw k.retryLane=u,ti(s,u),Qt(w,s,u),Ag;E.data==="$?"||Ff(),l=Mf(s,l,o)}else E.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=k.treeContext,Fe=bn(E.nextSibling),Mt=l,Me=!0,as=null,Cn=!1,s!==null&&(ln[an++]=Vn,ln[an++]=Pn,ln[an++]=is,Vn=s.id,Pn=s.overflow,is=l),l=Ef(l,u.children),l.flags|=4096);return l}return p?(xr(),p=u.fallback,E=l.mode,k=s.child,j=k.sibling,u=qn(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,j!==null?p=qn(j,p):(p=ss(p,E,o,null),p.flags|=2),p.return=l,u.return=l,u.sibling=p,l.child=u,u=p,p=l.child,E=s.child.memoizedState,E===null?E=Nf(o):(k=E.cachePool,k!==null?(j=Ze._currentValue,k=k.parent!==j?{parent:j,pool:j}:k):k=Em(),E={baseLanes:E.baseLanes|o,cachePool:k}),p.memoizedState=E,p.childLanes=Cf(s,w,o),l.memoizedState=wf,u):(br(l),o=s.child,s=o.sibling,o=qn(o,{mode:"visible",children:u.children}),o.return=l,o.sibling=null,s!==null&&(w=l.deletions,w===null?(l.deletions=[s],l.flags|=16):w.push(s)),l.child=o,l.memoizedState=null,o)}function Ef(s,l){return l=go({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function go(s,l){return s=Yt(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Mf(s,l,o){return di(l,s.child,null,o),s=Ef(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function qg(s,l,o){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l),Iu(s.return,l,o)}function Tf(s,l,o,u,p){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p}:(g.isBackwards=l,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=p)}function Vg(s,l,o){var u=l.pendingProps,p=u.revealOrder,g=u.tail;if(dt(s,l,u.children,o),u=et.current,(u&2)!==0)u=u&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&qg(s,o,l);else if(s.tag===19)qg(s,o,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(Q(et,u),p){case"forwards":for(o=l.child,p=null;o!==null;)s=o.alternate,s!==null&&fo(s)===null&&(p=o),o=o.sibling;o=p,o===null?(p=l.child,l.child=null):(p=o.sibling,o.sibling=null),Tf(l,!1,p,o,g);break;case"backwards":for(o=null,p=l.child,l.child=null;p!==null;){if(s=p.alternate,s!==null&&fo(s)===null){l.child=p;break}s=p.sibling,p.sibling=o,o=p,p=s}Tf(l,!0,o,null,g);break;case"together":Tf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Gn(s,l,o){if(s!==null&&(l.dependencies=s.dependencies),Cr|=l.lanes,(o&l.childLanes)===0)if(s!==null){if(cl(s,l,o,!1),(o&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,o=qn(s,s.pendingProps),l.child=o,o.return=l;s.sibling!==null;)s=s.sibling,o=o.sibling=qn(s,s.pendingProps),o.return=l;o.sibling=null}return l.child}function kf(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Ja(s)))}function vw(s,l,o){switch(l.tag){case 3:qe(l,l.stateNode.containerInfo),hr(l,Ze,s.memoizedState.cache),al();break;case 27:case 5:nu(l);break;case 4:qe(l,l.stateNode.containerInfo);break;case 10:hr(l,l.type,l.memoizedProps.value);break;case 13:var u=l.memoizedState;if(u!==null)return u.dehydrated!==null?(br(l),l.flags|=128,null):(o&l.child.childLanes)!==0?Ug(s,l,o):(br(l),s=Gn(s,l,o),s!==null?s.sibling:null);br(l);break;case 19:var p=(s.flags&128)!==0;if(u=(o&l.childLanes)!==0,u||(cl(s,l,o,!1),u=(o&l.childLanes)!==0),p){if(u)return Vg(s,l,o);l.flags|=128}if(p=l.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(et,et.current),u)break;return null;case 22:case 23:return l.lanes=0,_g(s,l,o);case 24:hr(l,Ze,s.memoizedState.cache)}return Gn(s,l,o)}function Pg(s,l,o){if(s!==null)if(s.memoizedProps!==l.pendingProps)rt=!0;else{if(!kf(s,o)&&(l.flags&128)===0)return rt=!1,vw(s,l,o);rt=(s.flags&131072)!==0}else rt=!1,Me&&(l.flags&1048576)!==0&&bm(l,Ka,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var u=l.elementType,p=u._init;if(u=p(u._payload),l.type=u,typeof u=="function")zu(u)?(s=ps(u,s),l.tag=1,l=Lg(null,l,u,s,o)):(l.tag=0,l=Sf(null,l,u,s,o));else{if(u!=null){if(p=u.$$typeof,p===K){l.tag=11,l=Dg(null,l,u,s,o);break e}else if(p===Y){l.tag=14,l=Rg(null,l,u,s,o);break e}}throw l=Je(u)||u,Error(r(306,l,""))}}return l;case 0:return Sf(s,l,l.type,l.pendingProps,o);case 1:return u=l.type,p=ps(u,l.pendingProps),Lg(s,l,u,p,o);case 3:e:{if(qe(l,l.stateNode.containerInfo),s===null)throw Error(r(387));u=l.pendingProps;var g=l.memoizedState;p=g.element,Xu(s,l),gl(l,u,null,o);var w=l.memoizedState;if(u=w.cache,hr(l,Ze,u),u!==g.cache&&Fu(l,[Ze],o,!0),ml(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},l.updateQueue.baseState=g,l.memoizedState=g,l.flags&256){l=Hg(s,l,u,o);break e}else if(u!==p){p=rn(Error(r(424)),l),ol(p),l=Hg(s,l,u,o);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Fe=bn(s.firstChild),Mt=l,Me=!0,as=null,Cn=!0,o=vg(l,null,u,o),l.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(al(),u===p){l=Gn(s,l,o);break e}dt(s,l,u,o)}l=l.child}return l;case 26:return mo(s,l),s===null?(o=Yy(l.type,null,l.pendingProps,null))?l.memoizedState=o:Me||(o=l.type,s=l.pendingProps,u=Ao(pe.current).createElement(o),u[xt]=l,u[jt]=s,pt(u,o,s),nt(u),l.stateNode=u):l.memoizedState=Yy(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return nu(l),s===null&&Me&&(u=l.stateNode=Iy(l.type,l.pendingProps,pe.current),Mt=l,Cn=!0,p=Fe,kr(l.type)?(od=p,Fe=bn(u.firstChild)):Fe=p),dt(s,l,l.pendingProps.children,o),mo(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Me&&((p=u=Fe)&&(u=Kw(u,l.type,l.pendingProps,Cn),u!==null?(l.stateNode=u,Mt=l,Fe=bn(u.firstChild),Cn=!1,p=!0):p=!1),p||cs(l)),nu(l),p=l.type,g=l.pendingProps,w=s!==null?s.memoizedProps:null,u=g.children,sd(p,g)?u=null:w!==null&&sd(p,w)&&(l.flags|=32),l.memoizedState!==null&&(p=nf(s,l,dw,null,null,o),Hl._currentValue=p),mo(s,l),dt(s,l,u,o),l.child;case 6:return s===null&&Me&&((s=o=Fe)&&(o=Jw(o,l.pendingProps,Cn),o!==null?(l.stateNode=o,Mt=l,Fe=null,s=!0):s=!1),s||cs(l)),null;case 13:return Ug(s,l,o);case 4:return qe(l,l.stateNode.containerInfo),u=l.pendingProps,s===null?l.child=di(l,null,u,o):dt(s,l,u,o),l.child;case 11:return Dg(s,l,l.type,l.pendingProps,o);case 7:return dt(s,l,l.pendingProps,o),l.child;case 8:return dt(s,l,l.pendingProps.children,o),l.child;case 12:return dt(s,l,l.pendingProps.children,o),l.child;case 10:return u=l.pendingProps,hr(l,l.type,u.value),dt(s,l,u.children,o),l.child;case 9:return p=l.type._context,u=l.pendingProps.children,fs(l),p=vt(p),u=u(p),l.flags|=1,dt(s,l,u,o),l.child;case 14:return Rg(s,l,l.type,l.pendingProps,o);case 15:return jg(s,l,l.type,l.pendingProps,o);case 19:return Vg(s,l,o);case 31:return u=l.pendingProps,o=l.mode,u={mode:u.mode,children:u.children},s===null?(o=go(u,o),o.ref=l.ref,l.child=o,o.return=l,l=o):(o=qn(s.child,u),o.ref=l.ref,l.child=o,o.return=l,l=o),l;case 22:return _g(s,l,o);case 24:return fs(l),u=vt(Ze),s===null?(p=Gu(),p===null&&(p=Le,g=$u(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=o),p=g),l.memoizedState={parent:u,cache:p},Ju(l),hr(l,Ze,p)):((s.lanes&o)!==0&&(Xu(s,l),gl(l,null,null,o),ml()),p=s.memoizedState,g=l.memoizedState,p.parent!==u?(p={parent:u,cache:u},l.memoizedState=p,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=p),hr(l,Ze,u)):(u=g.cache,hr(l,Ze,u),u!==p.cache&&Fu(l,[Ze],o,!0))),dt(s,l,l.pendingProps.children,o),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Kn(s){s.flags|=4}function Ig(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Qy(l)){if(l=on.current,l!==null&&((Ne&4194048)===Ne?En!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||l!==En))throw hl=Ku,Mm;s.flags|=8192}}function yo(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Sp():536870912,s.lanes|=l,gi|=l)}function Nl(s,l){if(!Me)switch(s.tailMode){case"hidden":l=s.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Pe(s){var l=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(l)for(var p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=o,l}function Sw(s,l,o){var u=l.pendingProps;switch(qu(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(l),null;case 1:return Pe(l),null;case 3:return o=l.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Fn(Ze),cr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(ll(l)?Kn(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Sm())),Pe(l),null;case 26:return o=l.memoizedState,s===null?(Kn(l),o!==null?(Pe(l),Ig(l,o)):(Pe(l),l.flags&=-16777217)):o?o!==s.memoizedState?(Kn(l),Pe(l),Ig(l,o)):(Pe(l),l.flags&=-16777217):(s.memoizedProps!==u&&Kn(l),Pe(l),l.flags&=-16777217),null;case 27:Ta(l),o=pe.current;var p=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==u&&Kn(l);else{if(!u){if(l.stateNode===null)throw Error(r(166));return Pe(l),null}s=ae.current,ll(l)?xm(l):(s=Iy(p,u,o),l.stateNode=s,Kn(l))}return Pe(l),null;case 5:if(Ta(l),o=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==u&&Kn(l);else{if(!u){if(l.stateNode===null)throw Error(r(166));return Pe(l),null}if(s=ae.current,ll(l))xm(l);else{switch(p=Ao(pe.current),s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?p.createElement(o,{is:u.is}):p.createElement(o)}}s[xt]=l,s[jt]=u;e:for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break e;for(;p.sibling===null;){if(p.return===null||p.return===l)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}l.stateNode=s;e:switch(pt(s,o,u),o){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Kn(l)}}return Pe(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==u&&Kn(l);else{if(typeof u!="string"&&l.stateNode===null)throw Error(r(166));if(s=pe.current,ll(l)){if(s=l.stateNode,o=l.memoizedProps,u=null,p=Mt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[xt]=l,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||zy(s.nodeValue,o)),s||cs(l)}else s=Ao(s).createTextNode(u),s[xt]=l,l.stateNode=s}return Pe(l),null;case 13:if(u=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=ll(l),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=l.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[xt]=l}else al(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Pe(l),p=!1}else p=Sm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return l.flags&256?(Yn(l),l):(Yn(l),null)}if(Yn(l),(l.flags&128)!==0)return l.lanes=o,l;if(o=u!==null,s=s!==null&&s.memoizedState!==null,o){u=l.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)}return o!==s&&o&&(l.child.flags|=8192),yo(l,l.updateQueue),Pe(l),null;case 4:return cr(),s===null&&Zf(l.stateNode.containerInfo),Pe(l),null;case 10:return Fn(l.type),Pe(l),null;case 19:if(ee(et),p=l.memoizedState,p===null)return Pe(l),null;if(u=(l.flags&128)!==0,g=p.rendering,g===null)if(u)Nl(p,!1);else{if($e!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(g=fo(s),g!==null){for(l.flags|=128,Nl(p,!1),s=g.updateQueue,l.updateQueue=s,yo(l,s),l.subtreeFlags=0,s=o,o=l.child;o!==null;)ym(o,s),o=o.sibling;return Q(et,et.current&1|2),l.child}s=s.sibling}p.tail!==null&&Nn()>vo&&(l.flags|=128,u=!0,Nl(p,!1),l.lanes=4194304)}else{if(!u)if(s=fo(g),s!==null){if(l.flags|=128,u=!0,s=s.updateQueue,l.updateQueue=s,yo(l,s),Nl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!Me)return Pe(l),null}else 2*Nn()-p.renderingStartTime>vo&&o!==536870912&&(l.flags|=128,u=!0,Nl(p,!1),l.lanes=4194304);p.isBackwards?(g.sibling=l.child,l.child=g):(s=p.last,s!==null?s.sibling=g:l.child=g,p.last=g)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=Nn(),l.sibling=null,s=et.current,Q(et,u?s&1|2:s&1),l):(Pe(l),null);case 22:case 23:return Yn(l),ef(),u=l.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(l.flags|=8192):u&&(l.flags|=8192),u?(o&536870912)!==0&&(l.flags&128)===0&&(Pe(l),l.subtreeFlags&6&&(l.flags|=8192)):Pe(l),o=l.updateQueue,o!==null&&yo(l,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==o&&(l.flags|=2048),s!==null&&ee(ds),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),l.memoizedState.cache!==o&&(l.flags|=2048),Fn(Ze),Pe(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function ww(s,l){switch(qu(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Fn(Ze),cr(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ta(l),null;case 13:if(Yn(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));al()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return ee(et),null;case 4:return cr(),null;case 10:return Fn(l.type),null;case 22:case 23:return Yn(l),ef(),s!==null&&ee(ds),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Fn(Ze),null;case 25:return null;default:return null}}function Fg(s,l){switch(qu(l),l.tag){case 3:Fn(Ze),cr();break;case 26:case 27:case 5:Ta(l);break;case 4:cr();break;case 13:Yn(l);break;case 19:ee(et);break;case 10:Fn(l.type);break;case 22:case 23:Yn(l),ef(),s!==null&&ee(ds);break;case 24:Fn(Ze)}}function Cl(s,l){try{var o=l.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&s)===s){u=void 0;var g=o.create,w=o.inst;u=g(),w.destroy=u}o=o.next}while(o!==p)}}catch(E){Be(l,l.return,E)}}function vr(s,l,o){try{var u=l.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&s)===s){var w=u.inst,E=w.destroy;if(E!==void 0){w.destroy=void 0,p=l;var k=o,j=E;try{j()}catch(V){Be(p,k,V)}}}u=u.next}while(u!==g)}}catch(V){Be(l,l.return,V)}}function $g(s){var l=s.updateQueue;if(l!==null){var o=s.stateNode;try{Rm(l,o)}catch(u){Be(s,s.return,u)}}}function Yg(s,l,o){o.props=ps(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){Be(s,l,u)}}function El(s,l){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(p){Be(s,l,p)}}function Mn(s,l){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Be(s,l,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Be(s,l,p)}else o.current=null}function Gg(s){var l=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Be(s,s.return,p)}}function Of(s,l,o){try{var u=s.stateNode;Iw(u,s.type,o,l),u[jt]=l}catch(p){Be(s,s.return,p)}}function Kg(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&kr(s.type)||s.tag===4}function Af(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Kg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&kr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Df(s,l,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,l?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,l):(l=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.appendChild(s),o=o._reactRootContainer,o!=null||l.onclick!==null||(l.onclick=Oo));else if(u!==4&&(u===27&&kr(s.type)&&(o=s.stateNode,l=null),s=s.child,s!==null))for(Df(s,l,o),s=s.sibling;s!==null;)Df(s,l,o),s=s.sibling}function bo(s,l,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,l?o.insertBefore(s,l):o.appendChild(s);else if(u!==4&&(u===27&&kr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(bo(s,l,o),s=s.sibling;s!==null;)bo(s,l,o),s=s.sibling}function Jg(s){var l=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,p=l.attributes;p.length;)l.removeAttributeNode(p[0]);pt(l,u,o),l[xt]=s,l[jt]=o}catch(g){Be(s,s.return,g)}}var Jn=!1,Ke=!1,Rf=!1,Xg=typeof WeakSet=="function"?WeakSet:Set,st=null;function Nw(s,l){if(s=s.containerInfo,nd=zo,s=am(s),Ou(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var w=0,E=-1,k=-1,j=0,V=0,I=s,B=null;t:for(;;){for(var z;I!==o||p!==0&&I.nodeType!==3||(E=w+p),I!==g||u!==0&&I.nodeType!==3||(k=w+u),I.nodeType===3&&(w+=I.nodeValue.length),(z=I.firstChild)!==null;)B=I,I=z;for(;;){if(I===s)break t;if(B===o&&++j===p&&(E=w),B===g&&++V===u&&(k=w),(z=I.nextSibling)!==null)break;I=B,B=I.parentNode}I=z}o=E===-1||k===-1?null:{start:E,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(rd={focusedElem:s,selectionRange:o},zo=!1,st=l;st!==null;)if(l=st,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,st=s;else for(;st!==null;){switch(l=st,g=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,o=l,p=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var de=ps(o.type,p,o.elementType===o.type);s=u.getSnapshotBeforeUpdate(de,g),u.__reactInternalSnapshotBeforeUpdate=s}catch(oe){Be(o,o.return,oe)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,o=s.nodeType,o===9)ld(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ld(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,st=s;break}st=l.return}}function Qg(s,l,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Sr(s,o),u&4&&Cl(5,o);break;case 1:if(Sr(s,o),u&4)if(s=o.stateNode,l===null)try{s.componentDidMount()}catch(w){Be(o,o.return,w)}else{var p=ps(o.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(p,l,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Be(o,o.return,w)}}u&64&&$g(o),u&512&&El(o,o.return);break;case 3:if(Sr(s,o),u&64&&(s=o.updateQueue,s!==null)){if(l=null,o.child!==null)switch(o.child.tag){case 27:case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}try{Rm(s,l)}catch(w){Be(o,o.return,w)}}break;case 27:l===null&&u&4&&Jg(o);case 26:case 5:Sr(s,o),l===null&&u&4&&Gg(o),u&512&&El(o,o.return);break;case 12:Sr(s,o);break;case 13:Sr(s,o),u&4&&ey(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=Rw.bind(null,o),Xw(s,o))));break;case 22:if(u=o.memoizedState!==null||Jn,!u){l=l!==null&&l.memoizedState!==null||Ke,p=Jn;var g=Ke;Jn=u,(Ke=l)&&!g?wr(s,o,(o.subtreeFlags&8772)!==0):Sr(s,o),Jn=p,Ke=g}break;case 30:break;default:Sr(s,o)}}function Wg(s){var l=s.alternate;l!==null&&(s.alternate=null,Wg(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&uu(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ve=null,zt=!1;function Xn(s,l,o){for(o=o.child;o!==null;)Zg(s,l,o),o=o.sibling}function Zg(s,l,o){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Yi,o)}catch{}switch(o.tag){case 26:Ke||Mn(o,l),Xn(s,l,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ke||Mn(o,l);var u=Ve,p=zt;kr(o.type)&&(Ve=o.stateNode,zt=!1),Xn(s,l,o),_l(o.stateNode),Ve=u,zt=p;break;case 5:Ke||Mn(o,l);case 6:if(u=Ve,p=zt,Ve=null,Xn(s,l,o),Ve=u,zt=p,Ve!==null)if(zt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(o.stateNode)}catch(g){Be(o,l,g)}else try{Ve.removeChild(o.stateNode)}catch(g){Be(o,l,g)}break;case 18:Ve!==null&&(zt?(s=Ve,Vy(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),Pl(s)):Vy(Ve,o.stateNode));break;case 4:u=Ve,p=zt,Ve=o.stateNode.containerInfo,zt=!0,Xn(s,l,o),Ve=u,zt=p;break;case 0:case 11:case 14:case 15:Ke||vr(2,o,l),Ke||vr(4,o,l),Xn(s,l,o);break;case 1:Ke||(Mn(o,l),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Yg(o,l,u)),Xn(s,l,o);break;case 21:Xn(s,l,o);break;case 22:Ke=(u=Ke)||o.memoizedState!==null,Xn(s,l,o),Ke=u;break;default:Xn(s,l,o)}}function ey(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Pl(s)}catch(o){Be(l,l.return,o)}}function Cw(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new Xg),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new Xg),l;default:throw Error(r(435,s.tag))}}function jf(s,l){var o=Cw(s);l.forEach(function(u){var p=jw.bind(null,s,u);o.has(u)||(o.add(u),u.then(p,p))})}function Gt(s,l){var o=l.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],g=s,w=l,E=w;e:for(;E!==null;){switch(E.tag){case 27:if(kr(E.type)){Ve=E.stateNode,zt=!1;break e}break;case 5:Ve=E.stateNode,zt=!1;break e;case 3:case 4:Ve=E.stateNode.containerInfo,zt=!0;break e}E=E.return}if(Ve===null)throw Error(r(160));Zg(g,w,p),Ve=null,zt=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)ty(l,s),l=l.sibling}var yn=null;function ty(s,l){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Gt(l,s),Kt(s),u&4&&(vr(3,s,s.return),Cl(3,s),vr(5,s,s.return));break;case 1:Gt(l,s),Kt(s),u&512&&(Ke||o===null||Mn(o,o.return)),u&64&&Jn&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=yn;if(Gt(l,s),Kt(s),u&512&&(Ke||o===null||Mn(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Ji]||g[xt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),pt(g,u,o),g[xt]=s,nt(g),u=g;break e;case"link":var w=Jy("link","href",p).get(u+(o.href||""));if(w){for(var E=0;E<w.length;E++)if(g=w[E],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(E,1);break t}}g=p.createElement(u),pt(g,u,o),p.head.appendChild(g);break;case"meta":if(w=Jy("meta","content",p).get(u+(o.content||""))){for(E=0;E<w.length;E++)if(g=w[E],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(E,1);break t}}g=p.createElement(u),pt(g,u,o),p.head.appendChild(g);break;default:throw Error(r(468,u))}g[xt]=s,nt(g),u=g}s.stateNode=u}else Xy(p,s.type,s.stateNode);else s.stateNode=Ky(p,u,s.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?Xy(p,s.type,s.stateNode):Ky(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Of(s,s.memoizedProps,o.memoizedProps)}break;case 27:Gt(l,s),Kt(s),u&512&&(Ke||o===null||Mn(o,o.return)),o!==null&&u&4&&Of(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Gt(l,s),Kt(s),u&512&&(Ke||o===null||Mn(o,o.return)),s.flags&32){p=s.stateNode;try{Ks(p,"")}catch(z){Be(s,s.return,z)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,Of(s,p,o!==null?o.memoizedProps:p)),u&1024&&(Rf=!0);break;case 6:if(Gt(l,s),Kt(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(z){Be(s,s.return,z)}}break;case 3:if(jo=null,p=yn,yn=Do(l.containerInfo),Gt(l,s),yn=p,Kt(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pl(l.containerInfo)}catch(z){Be(s,s.return,z)}Rf&&(Rf=!1,ny(s));break;case 4:u=yn,yn=Do(s.stateNode.containerInfo),Gt(l,s),Kt(s),yn=u;break;case 12:Gt(l,s),Kt(s);break;case 13:Gt(l,s),Kt(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Uf=Nn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,jf(s,u)));break;case 22:p=s.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,j=Jn,V=Ke;if(Jn=j||p,Ke=V||k,Gt(l,s),Ke=V,Jn=j,Kt(s),u&8192)e:for(l=s.stateNode,l._visibility=p?l._visibility&-2:l._visibility|1,p&&(o===null||k||Jn||Ke||ms(s)),o=null,l=s;;){if(l.tag===5||l.tag===26){if(o===null){k=o=l;try{if(g=k.stateNode,p)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{E=k.stateNode;var I=k.memoizedProps.style,B=I!=null&&I.hasOwnProperty("display")?I.display:null;E.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(z){Be(k,k.return,z)}}}else if(l.tag===6){if(o===null){k=l;try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(z){Be(k,k.return,z)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;o===l&&(o=null),l=l.return}o===l&&(o=null),l.sibling.return=l.return,l=l.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,jf(s,o))));break;case 19:Gt(l,s),Kt(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,jf(s,u)));break;case 30:break;case 21:break;default:Gt(l,s),Kt(s)}}function Kt(s){var l=s.flags;if(l&2){try{for(var o,u=s.return;u!==null;){if(Kg(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var p=o.stateNode,g=Af(s);bo(s,g,p);break;case 5:var w=o.stateNode;o.flags&32&&(Ks(w,""),o.flags&=-33);var E=Af(s);bo(s,E,w);break;case 3:case 4:var k=o.stateNode.containerInfo,j=Af(s);Df(s,j,k);break;default:throw Error(r(161))}}catch(V){Be(s,s.return,V)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function ny(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;ny(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Sr(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Qg(s,l.alternate,l),l=l.sibling}function ms(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:vr(4,l,l.return),ms(l);break;case 1:Mn(l,l.return);var o=l.stateNode;typeof o.componentWillUnmount=="function"&&Yg(l,l.return,o),ms(l);break;case 27:_l(l.stateNode);case 26:case 5:Mn(l,l.return),ms(l);break;case 22:l.memoizedState===null&&ms(l);break;case 30:ms(l);break;default:ms(l)}s=s.sibling}}function wr(s,l,o){for(o=o&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var u=l.alternate,p=s,g=l,w=g.flags;switch(g.tag){case 0:case 11:case 15:wr(p,g,o),Cl(4,g);break;case 1:if(wr(p,g,o),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(j){Be(u,u.return,j)}if(u=g,p=u.updateQueue,p!==null){var E=u.stateNode;try{var k=p.shared.hiddenCallbacks;if(k!==null)for(p.shared.hiddenCallbacks=null,p=0;p<k.length;p++)Dm(k[p],E)}catch(j){Be(u,u.return,j)}}o&&w&64&&$g(g),El(g,g.return);break;case 27:Jg(g);case 26:case 5:wr(p,g,o),o&&u===null&&w&4&&Gg(g),El(g,g.return);break;case 12:wr(p,g,o);break;case 13:wr(p,g,o),o&&w&4&&ey(p,g);break;case 22:g.memoizedState===null&&wr(p,g,o),El(g,g.return);break;case 30:break;default:wr(p,g,o)}l=l.sibling}}function _f(s,l){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&ul(o))}function Bf(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&ul(s))}function Tn(s,l,o,u){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ry(s,l,o,u),l=l.sibling}function ry(s,l,o,u){var p=l.flags;switch(l.tag){case 0:case 11:case 15:Tn(s,l,o,u),p&2048&&Cl(9,l);break;case 1:Tn(s,l,o,u);break;case 3:Tn(s,l,o,u),p&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&ul(s)));break;case 12:if(p&2048){Tn(s,l,o,u),s=l.stateNode;try{var g=l.memoizedProps,w=g.id,E=g.onPostCommit;typeof E=="function"&&E(w,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){Be(l,l.return,k)}}else Tn(s,l,o,u);break;case 13:Tn(s,l,o,u);break;case 23:break;case 22:g=l.stateNode,w=l.alternate,l.memoizedState!==null?g._visibility&2?Tn(s,l,o,u):Ml(s,l):g._visibility&2?Tn(s,l,o,u):(g._visibility|=2,hi(s,l,o,u,(l.subtreeFlags&10256)!==0)),p&2048&&_f(w,l);break;case 24:Tn(s,l,o,u),p&2048&&Bf(l.alternate,l);break;default:Tn(s,l,o,u)}}function hi(s,l,o,u,p){for(p=p&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var g=s,w=l,E=o,k=u,j=w.flags;switch(w.tag){case 0:case 11:case 15:hi(g,w,E,k,p),Cl(8,w);break;case 23:break;case 22:var V=w.stateNode;w.memoizedState!==null?V._visibility&2?hi(g,w,E,k,p):Ml(g,w):(V._visibility|=2,hi(g,w,E,k,p)),p&&j&2048&&_f(w.alternate,w);break;case 24:hi(g,w,E,k,p),p&&j&2048&&Bf(w.alternate,w);break;default:hi(g,w,E,k,p)}l=l.sibling}}function Ml(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var o=s,u=l,p=u.flags;switch(u.tag){case 22:Ml(o,u),p&2048&&_f(u.alternate,u);break;case 24:Ml(o,u),p&2048&&Bf(u.alternate,u);break;default:Ml(o,u)}l=l.sibling}}var Tl=8192;function pi(s){if(s.subtreeFlags&Tl)for(s=s.child;s!==null;)sy(s),s=s.sibling}function sy(s){switch(s.tag){case 26:pi(s),s.flags&Tl&&s.memoizedState!==null&&cN(yn,s.memoizedState,s.memoizedProps);break;case 5:pi(s);break;case 3:case 4:var l=yn;yn=Do(s.stateNode.containerInfo),pi(s),yn=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Tl,Tl=16777216,pi(s),Tl=l):pi(s));break;default:pi(s)}}function iy(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function kl(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var u=l[o];st=u,ay(u,s)}iy(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ly(s),s=s.sibling}function ly(s){switch(s.tag){case 0:case 11:case 15:kl(s),s.flags&2048&&vr(9,s,s.return);break;case 3:kl(s);break;case 12:kl(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,xo(s)):kl(s);break;default:kl(s)}}function xo(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var u=l[o];st=u,ay(u,s)}iy(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:vr(8,l,l.return),xo(l);break;case 22:o=l.stateNode,o._visibility&2&&(o._visibility&=-3,xo(l));break;default:xo(l)}s=s.sibling}}function ay(s,l){for(;st!==null;){var o=st;switch(o.tag){case 0:case 11:case 15:vr(8,o,l);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ul(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,st=u;else e:for(o=s;st!==null;){u=st;var p=u.sibling,g=u.return;if(Wg(u),u===o){st=null;break e}if(p!==null){p.return=g,st=p;break e}st=g}}}var Ew={getCacheForType:function(s){var l=vt(Ze),o=l.data.get(s);return o===void 0&&(o=s(),l.data.set(s,o)),o}},Mw=typeof WeakMap=="function"?WeakMap:Map,Te=0,Le=null,Se=null,Ne=0,ke=0,Jt=null,Nr=!1,mi=!1,zf=!1,Qn=0,$e=0,Cr=0,gs=0,Lf=0,cn=0,gi=0,Ol=null,Lt=null,Hf=!1,Uf=0,vo=1/0,So=null,Er=null,ht=0,Mr=null,yi=null,bi=0,qf=0,Vf=null,oy=null,Al=0,Pf=null;function Xt(){if((Te&2)!==0&&Ne!==0)return Ne&-Ne;if(U.T!==null){var s=ii;return s!==0?s:Jf()}return Cp()}function cy(){cn===0&&(cn=(Ne&536870912)===0||Me?vp():536870912);var s=on.current;return s!==null&&(s.flags|=32),cn}function Qt(s,l,o){(s===Le&&(ke===2||ke===9)||s.cancelPendingCommit!==null)&&(xi(s,0),Tr(s,Ne,cn,!1)),Ki(s,o),((Te&2)===0||s!==Le)&&(s===Le&&((Te&2)===0&&(gs|=o),$e===4&&Tr(s,Ne,cn,!1)),kn(s))}function uy(s,l,o){if((Te&6)!==0)throw Error(r(327));var u=!o&&(l&124)===0&&(l&s.expiredLanes)===0||Gi(s,l),p=u?Ow(s,l):$f(s,l,!0),g=u;do{if(p===0){mi&&!u&&Tr(s,l,0,!1);break}else{if(o=s.current.alternate,g&&!Tw(o)){p=$f(s,l,!1),g=!1;continue}if(p===2){if(g=l,s.errorRecoveryDisabledLanes&g)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){l=w;e:{var E=s;p=Ol;var k=E.current.memoizedState.isDehydrated;if(k&&(xi(E,w).flags|=256),w=$f(E,w,!1),w!==2){if(zf&&!k){E.errorRecoveryDisabledLanes|=g,gs|=g,p=4;break e}g=Lt,Lt=p,g!==null&&(Lt===null?Lt=g:Lt.push.apply(Lt,g))}p=w}if(g=!1,p!==2)continue}}if(p===1){xi(s,0),Tr(s,l,0,!0);break}e:{switch(u=s,g=p,g){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Tr(u,l,cn,!Nr);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(p=Uf+300-Nn(),10<p)){if(Tr(u,l,cn,!Nr),Da(u,0,!0)!==0)break e;u.timeoutHandle=Uy(fy.bind(null,u,o,Lt,So,Hf,l,cn,gs,gi,Nr,g,2,-0,0),p);break e}fy(u,o,Lt,So,Hf,l,cn,gs,gi,Nr,g,0,-0,0)}}break}while(!0);kn(s)}function fy(s,l,o,u,p,g,w,E,k,j,V,I,B,z){if(s.timeoutHandle=-1,I=l.subtreeFlags,(I&8192||(I&16785408)===16785408)&&(Ll={stylesheets:null,count:0,unsuspend:oN},sy(l),I=uN(),I!==null)){s.cancelPendingCommit=I(by.bind(null,s,l,g,o,u,p,w,E,k,V,1,B,z)),Tr(s,g,w,!j);return}by(s,l,g,o,u,p,w,E,k)}function Tw(s){for(var l=s;;){var o=l.tag;if((o===0||o===11||o===15)&&l.flags&16384&&(o=l.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],g=p.getSnapshot;p=p.value;try{if(!$t(g(),p))return!1}catch{return!1}}if(o=l.child,l.subtreeFlags&16384&&o!==null)o.return=l,l=o;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Tr(s,l,o,u){l&=~Lf,l&=~gs,s.suspendedLanes|=l,s.pingedLanes&=~l,u&&(s.warmLanes|=l),u=s.expirationTimes;for(var p=l;0<p;){var g=31-Ft(p),w=1<<g;u[g]=-1,p&=~w}o!==0&&wp(s,o,l)}function wo(){return(Te&6)===0?(Dl(0),!1):!0}function If(){if(Se!==null){if(ke===0)var s=Se.return;else s=Se,In=us=null,lf(s),fi=null,Sl=0,s=Se;for(;s!==null;)Fg(s.alternate,s),s=s.return;Se=null}}function xi(s,l){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,$w(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),If(),Le=s,Se=o=qn(s.current,null),Ne=l,ke=0,Jt=null,Nr=!1,mi=Gi(s,l),zf=!1,gi=cn=Lf=gs=Cr=$e=0,Lt=Ol=null,Hf=!1,(l&8)!==0&&(l|=l&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=l;0<u;){var p=31-Ft(u),g=1<<p;l|=s[p],u&=~g}return Qn=l,Ia(),o}function dy(s,l){be=null,U.H=oo,l===dl||l===Wa?(l=Om(),ke=3):l===Mm?(l=Om(),ke=4):ke=l===Ag?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Jt=l,Se===null&&($e=1,po(s,rn(l,s.current)))}function hy(){var s=U.H;return U.H=oo,s===null?oo:s}function py(){var s=U.A;return U.A=Ew,s}function Ff(){$e=4,Nr||(Ne&4194048)!==Ne&&on.current!==null||(mi=!0),(Cr&134217727)===0&&(gs&134217727)===0||Le===null||Tr(Le,Ne,cn,!1)}function $f(s,l,o){var u=Te;Te|=2;var p=hy(),g=py();(Le!==s||Ne!==l)&&(So=null,xi(s,l)),l=!1;var w=$e;e:do try{if(ke!==0&&Se!==null){var E=Se,k=Jt;switch(ke){case 8:If(),w=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(l=!0);var j=ke;if(ke=0,Jt=null,vi(s,E,k,j),o&&mi){w=0;break e}break;default:j=ke,ke=0,Jt=null,vi(s,E,k,j)}}kw(),w=$e;break}catch(V){dy(s,V)}while(!0);return l&&s.shellSuspendCounter++,In=us=null,Te=u,U.H=p,U.A=g,Se===null&&(Le=null,Ne=0,Ia()),w}function kw(){for(;Se!==null;)my(Se)}function Ow(s,l){var o=Te;Te|=2;var u=hy(),p=py();Le!==s||Ne!==l?(So=null,vo=Nn()+500,xi(s,l)):mi=Gi(s,l);e:do try{if(ke!==0&&Se!==null){l=Se;var g=Jt;t:switch(ke){case 1:ke=0,Jt=null,vi(s,l,g,1);break;case 2:case 9:if(Tm(g)){ke=0,Jt=null,gy(l);break}l=function(){ke!==2&&ke!==9||Le!==s||(ke=7),kn(s)},g.then(l,l);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Tm(g)?(ke=0,Jt=null,gy(l)):(ke=0,Jt=null,vi(s,l,g,7));break;case 5:var w=null;switch(Se.tag){case 26:w=Se.memoizedState;case 5:case 27:var E=Se;if(!w||Qy(w)){ke=0,Jt=null;var k=E.sibling;if(k!==null)Se=k;else{var j=E.return;j!==null?(Se=j,No(j)):Se=null}break t}}ke=0,Jt=null,vi(s,l,g,5);break;case 6:ke=0,Jt=null,vi(s,l,g,6);break;case 8:If(),$e=6;break e;default:throw Error(r(462))}}Aw();break}catch(V){dy(s,V)}while(!0);return In=us=null,U.H=u,U.A=p,Te=o,Se!==null?0:(Le=null,Ne=0,Ia(),$e)}function Aw(){for(;Se!==null&&!Wv();)my(Se)}function my(s){var l=Pg(s.alternate,s,Qn);s.memoizedProps=s.pendingProps,l===null?No(s):Se=l}function gy(s){var l=s,o=l.alternate;switch(l.tag){case 15:case 0:l=zg(o,l,l.pendingProps,l.type,void 0,Ne);break;case 11:l=zg(o,l,l.pendingProps,l.type.render,l.ref,Ne);break;case 5:lf(l);default:Fg(o,l),l=Se=ym(l,Qn),l=Pg(o,l,Qn)}s.memoizedProps=s.pendingProps,l===null?No(s):Se=l}function vi(s,l,o,u){In=us=null,lf(l),fi=null,Sl=0;var p=l.return;try{if(xw(s,p,l,o,Ne)){$e=1,po(s,rn(o,s.current)),Se=null;return}}catch(g){if(p!==null)throw Se=p,g;$e=1,po(s,rn(o,s.current)),Se=null;return}l.flags&32768?(Me||u===1?s=!0:mi||(Ne&536870912)!==0?s=!1:(Nr=s=!0,(u===2||u===9||u===3||u===6)&&(u=on.current,u!==null&&u.tag===13&&(u.flags|=16384))),yy(l,s)):No(l)}function No(s){var l=s;do{if((l.flags&32768)!==0){yy(l,Nr);return}s=l.return;var o=Sw(l.alternate,l,Qn);if(o!==null){Se=o;return}if(l=l.sibling,l!==null){Se=l;return}Se=l=s}while(l!==null);$e===0&&($e=5)}function yy(s,l){do{var o=ww(s.alternate,s);if(o!==null){o.flags&=32767,Se=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!l&&(s=s.sibling,s!==null)){Se=s;return}Se=s=o}while(s!==null);$e=6,Se=null}function by(s,l,o,u,p,g,w,E,k){s.cancelPendingCommit=null;do Co();while(ht!==0);if((Te&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(g=l.lanes|l.childLanes,g|=_u,oS(s,o,g,w,E,k),s===Le&&(Se=Le=null,Ne=0),yi=l,Mr=s,bi=o,qf=g,Vf=p,oy=u,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,_w(ka,function(){return Ny(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,p=X.p,X.p=2,w=Te,Te|=4;try{Nw(s,l,o)}finally{Te=w,X.p=p,U.T=u}}ht=1,xy(),vy(),Sy()}}function xy(){if(ht===1){ht=0;var s=Mr,l=yi,o=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var u=X.p;X.p=2;var p=Te;Te|=4;try{ty(l,s);var g=rd,w=am(s.containerInfo),E=g.focusedElem,k=g.selectionRange;if(w!==E&&E&&E.ownerDocument&&lm(E.ownerDocument.documentElement,E)){if(k!==null&&Ou(E)){var j=k.start,V=k.end;if(V===void 0&&(V=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(V,E.value.length);else{var I=E.ownerDocument||document,B=I&&I.defaultView||window;if(B.getSelection){var z=B.getSelection(),de=E.textContent.length,oe=Math.min(k.start,de),je=k.end===void 0?oe:Math.min(k.end,de);!z.extend&&oe>je&&(w=je,je=oe,oe=w);var D=im(E,oe),A=im(E,je);if(D&&A&&(z.rangeCount!==1||z.anchorNode!==D.node||z.anchorOffset!==D.offset||z.focusNode!==A.node||z.focusOffset!==A.offset)){var R=I.createRange();R.setStart(D.node,D.offset),z.removeAllRanges(),oe>je?(z.addRange(R),z.extend(A.node,A.offset)):(R.setEnd(A.node,A.offset),z.addRange(R))}}}}for(I=[],z=E;z=z.parentNode;)z.nodeType===1&&I.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<I.length;E++){var P=I[E];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}zo=!!nd,rd=nd=null}finally{Te=p,X.p=u,U.T=o}}s.current=l,ht=2}}function vy(){if(ht===2){ht=0;var s=Mr,l=yi,o=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var u=X.p;X.p=2;var p=Te;Te|=4;try{Qg(s,l.alternate,l)}finally{Te=p,X.p=u,U.T=o}}ht=3}}function Sy(){if(ht===4||ht===3){ht=0,Zv();var s=Mr,l=yi,o=bi,u=oy;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ht=5:(ht=0,yi=Mr=null,wy(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Er=null),ou(o),l=l.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Yi,l,void 0,(l.current.flags&128)===128)}catch{}if(u!==null){l=U.T,p=X.p,X.p=2,U.T=null;try{for(var g=s.onRecoverableError,w=0;w<u.length;w++){var E=u[w];g(E.value,{componentStack:E.stack})}}finally{U.T=l,X.p=p}}(bi&3)!==0&&Co(),kn(s),p=s.pendingLanes,(o&4194090)!==0&&(p&42)!==0?s===Pf?Al++:(Al=0,Pf=s):Al=0,Dl(0)}}function wy(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,ul(l)))}function Co(s){return xy(),vy(),Sy(),Ny()}function Ny(){if(ht!==5)return!1;var s=Mr,l=qf;qf=0;var o=ou(bi),u=U.T,p=X.p;try{X.p=32>o?32:o,U.T=null,o=Vf,Vf=null;var g=Mr,w=bi;if(ht=0,yi=Mr=null,bi=0,(Te&6)!==0)throw Error(r(331));var E=Te;if(Te|=4,ly(g.current),ry(g,g.current,w,o),Te=E,Dl(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Yi,g)}catch{}return!0}finally{X.p=p,U.T=u,wy(s,l)}}function Cy(s,l,o){l=rn(o,l),l=vf(s.stateNode,l,2),s=gr(s,l,2),s!==null&&(Ki(s,2),kn(s))}function Be(s,l,o){if(s.tag===3)Cy(s,s,o);else for(;l!==null;){if(l.tag===3){Cy(l,s,o);break}else if(l.tag===1){var u=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Er===null||!Er.has(u))){s=rn(o,s),o=kg(2),u=gr(l,o,2),u!==null&&(Og(o,u,l,s),Ki(u,2),kn(u));break}}l=l.return}}function Yf(s,l,o){var u=s.pingCache;if(u===null){u=s.pingCache=new Mw;var p=new Set;u.set(l,p)}else p=u.get(l),p===void 0&&(p=new Set,u.set(l,p));p.has(o)||(zf=!0,p.add(o),s=Dw.bind(null,s,l,o),l.then(s,s))}function Dw(s,l,o){var u=s.pingCache;u!==null&&u.delete(l),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Le===s&&(Ne&o)===o&&($e===4||$e===3&&(Ne&62914560)===Ne&&300>Nn()-Uf?(Te&2)===0&&xi(s,0):Lf|=o,gi===Ne&&(gi=0)),kn(s)}function Ey(s,l){l===0&&(l=Sp()),s=ti(s,l),s!==null&&(Ki(s,l),kn(s))}function Rw(s){var l=s.memoizedState,o=0;l!==null&&(o=l.retryLane),Ey(s,o)}function jw(s,l){var o=0;switch(s.tag){case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(l),Ey(s,o)}function _w(s,l){return su(s,l)}var Eo=null,Si=null,Gf=!1,Mo=!1,Kf=!1,ys=0;function kn(s){s!==Si&&s.next===null&&(Si===null?Eo=Si=s:Si=Si.next=s),Mo=!0,Gf||(Gf=!0,zw())}function Dl(s,l){if(!Kf&&Mo){Kf=!0;do for(var o=!1,u=Eo;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var w=u.suspendedLanes,E=u.pingedLanes;g=(1<<31-Ft(42|s)+1)-1,g&=p&~(w&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Oy(u,g))}else g=Ne,g=Da(u,u===Le?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Gi(u,g)||(o=!0,Oy(u,g));u=u.next}while(o);Kf=!1}}function Bw(){My()}function My(){Mo=Gf=!1;var s=0;ys!==0&&(Fw()&&(s=ys),ys=0);for(var l=Nn(),o=null,u=Eo;u!==null;){var p=u.next,g=Ty(u,l);g===0?(u.next=null,o===null?Eo=p:o.next=p,p===null&&(Si=o)):(o=u,(s!==0||(g&3)!==0)&&(Mo=!0)),u=p}Dl(s)}function Ty(s,l){for(var o=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var w=31-Ft(g),E=1<<w,k=p[w];k===-1?((E&o)===0||(E&u)!==0)&&(p[w]=aS(E,l)):k<=l&&(s.expiredLanes|=E),g&=~E}if(l=Le,o=Ne,o=Da(s,s===l?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===l&&(ke===2||ke===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&iu(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Gi(s,o)){if(l=o&-o,l===s.callbackPriority)return l;switch(u!==null&&iu(u),ou(o)){case 2:case 8:o=bp;break;case 32:o=ka;break;case 268435456:o=xp;break;default:o=ka}return u=ky.bind(null,s),o=su(o,u),s.callbackPriority=l,s.callbackNode=o,l}return u!==null&&u!==null&&iu(u),s.callbackPriority=2,s.callbackNode=null,2}function ky(s,l){if(ht!==0&&ht!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Co()&&s.callbackNode!==o)return null;var u=Ne;return u=Da(s,s===Le?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(uy(s,u,l),Ty(s,Nn()),s.callbackNode!=null&&s.callbackNode===o?ky.bind(null,s):null)}function Oy(s,l){if(Co())return null;uy(s,l,!0)}function zw(){Yw(function(){(Te&6)!==0?su(yp,Bw):My()})}function Jf(){return ys===0&&(ys=vp()),ys}function Ay(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:za(""+s)}function Dy(s,l){var o=l.ownerDocument.createElement("input");return o.name=l.name,o.value=l.value,s.id&&o.setAttribute("form",s.id),l.parentNode.insertBefore(o,l),s=new FormData(s),o.parentNode.removeChild(o),s}function Lw(s,l,o,u,p){if(l==="submit"&&o&&o.stateNode===p){var g=Ay((p[jt]||null).action),w=u.submitter;w&&(l=(l=w[jt]||null)?Ay(l.formAction):w.getAttribute("formAction"),l!==null&&(g=l,w=null));var E=new qa("action","action",null,u,p);s.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ys!==0){var k=w?Dy(p,w):new FormData(p);mf(o,{pending:!0,data:k,method:p.method,action:g},null,k)}}else typeof g=="function"&&(E.preventDefault(),k=w?Dy(p,w):new FormData(p),mf(o,{pending:!0,data:k,method:p.method,action:g},g,k))},currentTarget:p}]})}}for(var Xf=0;Xf<ju.length;Xf++){var Qf=ju[Xf],Hw=Qf.toLowerCase(),Uw=Qf[0].toUpperCase()+Qf.slice(1);gn(Hw,"on"+Uw)}gn(um,"onAnimationEnd"),gn(fm,"onAnimationIteration"),gn(dm,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(nw,"onTransitionRun"),gn(rw,"onTransitionStart"),gn(sw,"onTransitionCancel"),gn(hm,"onTransitionEnd"),$s("onMouseEnter",["mouseout","mouseover"]),$s("onMouseLeave",["mouseout","mouseover"]),$s("onPointerEnter",["pointerout","pointerover"]),$s("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function Ry(s,l){l=(l&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],p=u.event;u=u.listeners;e:{var g=void 0;if(l)for(var w=u.length-1;0<=w;w--){var E=u[w],k=E.instance,j=E.currentTarget;if(E=E.listener,k!==g&&p.isPropagationStopped())break e;g=E,p.currentTarget=j;try{g(p)}catch(V){ho(V)}p.currentTarget=null,g=k}else for(w=0;w<u.length;w++){if(E=u[w],k=E.instance,j=E.currentTarget,E=E.listener,k!==g&&p.isPropagationStopped())break e;g=E,p.currentTarget=j;try{g(p)}catch(V){ho(V)}p.currentTarget=null,g=k}}}}function we(s,l){var o=l[cu];o===void 0&&(o=l[cu]=new Set);var u=s+"__bubble";o.has(u)||(jy(l,s,2,!1),o.add(u))}function Wf(s,l,o){var u=0;l&&(u|=4),jy(o,s,u,l)}var To="_reactListening"+Math.random().toString(36).slice(2);function Zf(s){if(!s[To]){s[To]=!0,Mp.forEach(function(o){o!=="selectionchange"&&(qw.has(o)||Wf(o,!1,s),Wf(o,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[To]||(l[To]=!0,Wf("selectionchange",!1,l))}}function jy(s,l,o,u){switch(r0(l)){case 2:var p=hN;break;case 8:p=pN;break;default:p=hd}o=p.bind(null,l,o,s),p=void 0,!vu||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(l,o,{capture:!0,passive:p}):s.addEventListener(l,o,!0):p!==void 0?s.addEventListener(l,o,{passive:p}):s.addEventListener(l,o,!1)}function ed(s,l,o,u,p){var g=u;if((l&1)===0&&(l&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var E=u.stateNode.containerInfo;if(E===p)break;if(w===4)for(w=u.return;w!==null;){var k=w.tag;if((k===3||k===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;E!==null;){if(w=Ps(E),w===null)return;if(k=w.tag,k===5||k===6||k===26||k===27){u=g=w;continue e}E=E.parentNode}}u=u.return}qp(function(){var j=g,V=bu(o),I=[];e:{var B=pm.get(s);if(B!==void 0){var z=qa,de=s;switch(s){case"keypress":if(Ha(o)===0)break e;case"keydown":case"keyup":z=_S;break;case"focusin":de="focus",z=Cu;break;case"focusout":de="blur",z=Cu;break;case"beforeblur":case"afterblur":z=Cu;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=wS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=LS;break;case um:case fm:case dm:z=ES;break;case hm:z=US;break;case"scroll":case"scrollend":z=vS;break;case"wheel":z=VS;break;case"copy":case"cut":case"paste":z=TS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=$p;break;case"toggle":case"beforetoggle":z=IS}var oe=(l&4)!==0,je=!oe&&(s==="scroll"||s==="scrollend"),D=oe?B!==null?B+"Capture":null:B;oe=[];for(var A=j,R;A!==null;){var P=A;if(R=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||R===null||D===null||(P=Qi(A,D),P!=null&&oe.push(jl(A,P,R))),je)break;A=A.return}0<oe.length&&(B=new z(B,de,null,o,V),I.push({event:B,listeners:oe}))}}if((l&7)===0){e:{if(B=s==="mouseover"||s==="pointerover",z=s==="mouseout"||s==="pointerout",B&&o!==yu&&(de=o.relatedTarget||o.fromElement)&&(Ps(de)||de[Vs]))break e;if((z||B)&&(B=V.window===V?V:(B=V.ownerDocument)?B.defaultView||B.parentWindow:window,z?(de=o.relatedTarget||o.toElement,z=j,de=de?Ps(de):null,de!==null&&(je=a(de),oe=de.tag,de!==je||oe!==5&&oe!==27&&oe!==6)&&(de=null)):(z=null,de=j),z!==de)){if(oe=Ip,P="onMouseLeave",D="onMouseEnter",A="mouse",(s==="pointerout"||s==="pointerover")&&(oe=$p,P="onPointerLeave",D="onPointerEnter",A="pointer"),je=z==null?B:Xi(z),R=de==null?B:Xi(de),B=new oe(P,A+"leave",z,o,V),B.target=je,B.relatedTarget=R,P=null,Ps(V)===j&&(oe=new oe(D,A+"enter",de,o,V),oe.target=R,oe.relatedTarget=je,P=oe),je=P,z&&de)t:{for(oe=z,D=de,A=0,R=oe;R;R=wi(R))A++;for(R=0,P=D;P;P=wi(P))R++;for(;0<A-R;)oe=wi(oe),A--;for(;0<R-A;)D=wi(D),R--;for(;A--;){if(oe===D||D!==null&&oe===D.alternate)break t;oe=wi(oe),D=wi(D)}oe=null}else oe=null;z!==null&&_y(I,B,z,oe,!1),de!==null&&je!==null&&_y(I,je,de,oe,!0)}}e:{if(B=j?Xi(j):window,z=B.nodeName&&B.nodeName.toLowerCase(),z==="select"||z==="input"&&B.type==="file")var te=Zp;else if(Qp(B))if(em)te=ZS;else{te=QS;var ve=XS}else z=B.nodeName,!z||z.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?j&&gu(j.elementType)&&(te=Zp):te=WS;if(te&&(te=te(s,j))){Wp(I,te,o,V);break e}ve&&ve(s,B,j),s==="focusout"&&j&&B.type==="number"&&j.memoizedProps.value!=null&&mu(B,"number",B.value)}switch(ve=j?Xi(j):window,s){case"focusin":(Qp(ve)||ve.contentEditable==="true")&&(Ws=ve,Au=j,il=null);break;case"focusout":il=Au=Ws=null;break;case"mousedown":Du=!0;break;case"contextmenu":case"mouseup":case"dragend":Du=!1,om(I,o,V);break;case"selectionchange":if(tw)break;case"keydown":case"keyup":om(I,o,V)}var se;if(Mu)e:{switch(s){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Qs?Jp(s,o)&&(ue="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(ue="onCompositionStart");ue&&(Yp&&o.locale!=="ko"&&(Qs||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Qs&&(se=Vp()):(dr=V,Su="value"in dr?dr.value:dr.textContent,Qs=!0)),ve=ko(j,ue),0<ve.length&&(ue=new Fp(ue,s,null,o,V),I.push({event:ue,listeners:ve}),se?ue.data=se:(se=Xp(o),se!==null&&(ue.data=se)))),(se=$S?YS(s,o):GS(s,o))&&(ue=ko(j,"onBeforeInput"),0<ue.length&&(ve=new Fp("onBeforeInput","beforeinput",null,o,V),I.push({event:ve,listeners:ue}),ve.data=se)),Lw(I,s,j,o,V)}Ry(I,l)})}function jl(s,l,o){return{instance:s,listener:l,currentTarget:o}}function ko(s,l){for(var o=l+"Capture",u=[];s!==null;){var p=s,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Qi(s,o),p!=null&&u.unshift(jl(s,p,g)),p=Qi(s,l),p!=null&&u.push(jl(s,p,g))),s.tag===3)return u;s=s.return}return[]}function wi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function _y(s,l,o,u,p){for(var g=l._reactName,w=[];o!==null&&o!==u;){var E=o,k=E.alternate,j=E.stateNode;if(E=E.tag,k!==null&&k===u)break;E!==5&&E!==26&&E!==27||j===null||(k=j,p?(j=Qi(o,g),j!=null&&w.unshift(jl(o,j,k))):p||(j=Qi(o,g),j!=null&&w.push(jl(o,j,k)))),o=o.return}w.length!==0&&s.push({event:l,listeners:w})}var Vw=/\r\n?/g,Pw=/\u0000|\uFFFD/g;function By(s){return(typeof s=="string"?s:""+s).replace(Vw,`
`).replace(Pw,"")}function zy(s,l){return l=By(l),By(s)===l}function Oo(){}function Re(s,l,o,u,p,g){switch(o){case"children":typeof u=="string"?l==="body"||l==="textarea"&&u===""||Ks(s,u):(typeof u=="number"||typeof u=="bigint")&&l!=="body"&&Ks(s,""+u);break;case"className":ja(s,"class",u);break;case"tabIndex":ja(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ja(s,o,u);break;case"style":Hp(s,u,g);break;case"data":if(l!=="object"){ja(s,"data",u);break}case"src":case"href":if(u===""&&(l!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=za(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(l!=="input"&&Re(s,l,"name",p.name,p,null),Re(s,l,"formEncType",p.formEncType,p,null),Re(s,l,"formMethod",p.formMethod,p,null),Re(s,l,"formTarget",p.formTarget,p,null)):(Re(s,l,"encType",p.encType,p,null),Re(s,l,"method",p.method,p,null),Re(s,l,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=za(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Oo);break;case"onScroll":u!=null&&we("scroll",s);break;case"onScrollEnd":u!=null&&we("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=za(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":we("beforetoggle",s),we("toggle",s),Ra(s,"popover",u);break;case"xlinkActuate":Hn(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Hn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Hn(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Hn(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Hn(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Hn(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Hn(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Hn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Hn(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ra(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=bS.get(o)||o,Ra(s,o,u))}}function td(s,l,o,u,p,g){switch(o){case"style":Hp(s,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Ks(s,u):(typeof u=="number"||typeof u=="bigint")&&Ks(s,""+u);break;case"onScroll":u!=null&&we("scroll",s);break;case"onScrollEnd":u!=null&&we("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Oo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tp.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),l=o.slice(2,p?o.length-7:void 0),g=s[jt]||null,g=g!=null?g[o]:null,typeof g=="function"&&s.removeEventListener(l,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(l,u,p);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Ra(s,o,u)}}}function pt(s,l,o){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",s),we("load",s);var u=!1,p=!1,g;for(g in o)if(o.hasOwnProperty(g)){var w=o[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Re(s,l,g,w,o,null)}}p&&Re(s,l,"srcSet",o.srcSet,o,null),u&&Re(s,l,"src",o.src,o,null);return;case"input":we("invalid",s);var E=g=w=p=null,k=null,j=null;for(u in o)if(o.hasOwnProperty(u)){var V=o[u];if(V!=null)switch(u){case"name":p=V;break;case"type":w=V;break;case"checked":k=V;break;case"defaultChecked":j=V;break;case"value":g=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,l));break;default:Re(s,l,u,V,o,null)}}_p(s,g,E,k,j,w,p,!1),_a(s);return;case"select":we("invalid",s),u=w=g=null;for(p in o)if(o.hasOwnProperty(p)&&(E=o[p],E!=null))switch(p){case"value":g=E;break;case"defaultValue":w=E;break;case"multiple":u=E;default:Re(s,l,p,E,o,null)}l=g,o=w,s.multiple=!!u,l!=null?Gs(s,!!u,l,!1):o!=null&&Gs(s,!!u,o,!0);return;case"textarea":we("invalid",s),g=p=u=null;for(w in o)if(o.hasOwnProperty(w)&&(E=o[w],E!=null))switch(w){case"value":u=E;break;case"defaultValue":p=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Re(s,l,w,E,o,null)}zp(s,u,p,g),_a(s);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Re(s,l,k,u,o,null)}return;case"dialog":we("beforetoggle",s),we("toggle",s),we("cancel",s),we("close",s);break;case"iframe":case"object":we("load",s);break;case"video":case"audio":for(u=0;u<Rl.length;u++)we(Rl[u],s);break;case"image":we("error",s),we("load",s);break;case"details":we("toggle",s);break;case"embed":case"source":case"link":we("error",s),we("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Re(s,l,j,u,o,null)}return;default:if(gu(l)){for(V in o)o.hasOwnProperty(V)&&(u=o[V],u!==void 0&&td(s,l,V,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&Re(s,l,E,u,o,null))}function Iw(s,l,o,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,w=null,E=null,k=null,j=null,V=null;for(z in o){var I=o[z];if(o.hasOwnProperty(z)&&I!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":k=I;default:u.hasOwnProperty(z)||Re(s,l,z,null,u,I)}}for(var B in u){var z=u[B];if(I=o[B],u.hasOwnProperty(B)&&(z!=null||I!=null))switch(B){case"type":g=z;break;case"name":p=z;break;case"checked":j=z;break;case"defaultChecked":V=z;break;case"value":w=z;break;case"defaultValue":E=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,l));break;default:z!==I&&Re(s,l,B,z,u,I)}}pu(s,w,E,k,j,V,g,p);return;case"select":z=w=E=B=null;for(g in o)if(k=o[g],o.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":z=k;default:u.hasOwnProperty(g)||Re(s,l,g,null,u,k)}for(p in u)if(g=u[p],k=o[p],u.hasOwnProperty(p)&&(g!=null||k!=null))switch(p){case"value":B=g;break;case"defaultValue":E=g;break;case"multiple":w=g;default:g!==k&&Re(s,l,p,g,u,k)}l=E,o=w,u=z,B!=null?Gs(s,!!o,B,!1):!!u!=!!o&&(l!=null?Gs(s,!!o,l,!0):Gs(s,!!o,o?[]:"",!1));return;case"textarea":z=B=null;for(E in o)if(p=o[E],o.hasOwnProperty(E)&&p!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Re(s,l,E,null,u,p)}for(w in u)if(p=u[w],g=o[w],u.hasOwnProperty(w)&&(p!=null||g!=null))switch(w){case"value":B=p;break;case"defaultValue":z=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==g&&Re(s,l,w,p,u,g)}Bp(s,B,z);return;case"option":for(var de in o)if(B=o[de],o.hasOwnProperty(de)&&B!=null&&!u.hasOwnProperty(de))switch(de){case"selected":s.selected=!1;break;default:Re(s,l,de,null,u,B)}for(k in u)if(B=u[k],z=o[k],u.hasOwnProperty(k)&&B!==z&&(B!=null||z!=null))switch(k){case"selected":s.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Re(s,l,k,B,u,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in o)B=o[oe],o.hasOwnProperty(oe)&&B!=null&&!u.hasOwnProperty(oe)&&Re(s,l,oe,null,u,B);for(j in u)if(B=u[j],z=o[j],u.hasOwnProperty(j)&&B!==z&&(B!=null||z!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,l));break;default:Re(s,l,j,B,u,z)}return;default:if(gu(l)){for(var je in o)B=o[je],o.hasOwnProperty(je)&&B!==void 0&&!u.hasOwnProperty(je)&&td(s,l,je,void 0,u,B);for(V in u)B=u[V],z=o[V],!u.hasOwnProperty(V)||B===z||B===void 0&&z===void 0||td(s,l,V,B,u,z);return}}for(var D in o)B=o[D],o.hasOwnProperty(D)&&B!=null&&!u.hasOwnProperty(D)&&Re(s,l,D,null,u,B);for(I in u)B=u[I],z=o[I],!u.hasOwnProperty(I)||B===z||B==null&&z==null||Re(s,l,I,B,u,z)}var nd=null,rd=null;function Ao(s){return s.nodeType===9?s:s.ownerDocument}function Ly(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hy(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function sd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var id=null;function Fw(){var s=window.event;return s&&s.type==="popstate"?s===id?!1:(id=s,!0):(id=null,!1)}var Uy=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(s){return qy.resolve(null).then(s).catch(Gw)}:Uy;function Gw(s){setTimeout(function(){throw s})}function kr(s){return s==="head"}function Vy(s,l){var o=l,u=0,p=0;do{var g=o.nextSibling;if(s.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var w=s.ownerDocument;if(o&1&&_l(w.documentElement),o&2&&_l(w.body),o&4)for(o=w.head,_l(o),w=o.firstChild;w;){var E=w.nextSibling,k=w.nodeName;w[Ji]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=E}}if(p===0){s.removeChild(g),Pl(l);return}p--}else o==="$"||o==="$?"||o==="$!"?p++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Pl(l)}function ld(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var o=l;switch(l=l.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ld(o),uu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function Kw(s,l,o,u){for(;s.nodeType===1;){var p=o;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Ji])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=bn(s.nextSibling),s===null)break}return null}function Jw(s,l,o){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=bn(s.nextSibling),s===null))return null;return s}function ad(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Xw(s,l){var o=s.ownerDocument;if(s.data!=="$?"||o.readyState==="complete")l();else{var u=function(){l(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function bn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var od=null;function Py(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(l===0)return s;l--}else o==="/$"&&l++}s=s.previousSibling}return null}function Iy(s,l,o){switch(l=Ao(o),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function _l(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);uu(s)}var un=new Map,Fy=new Set;function Do(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Wn=X.d;X.d={f:Qw,r:Ww,D:Zw,C:eN,L:tN,m:nN,X:sN,S:rN,M:iN};function Qw(){var s=Wn.f(),l=wo();return s||l}function Ww(s){var l=Is(s);l!==null&&l.tag===5&&l.type==="form"?ug(l):Wn.r(s)}var Ni=typeof document>"u"?null:document;function $y(s,l,o){var u=Ni;if(u&&typeof l=="string"&&l){var p=nn(l);p='link[rel="'+s+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Fy.has(p)||(Fy.add(p),s={rel:s,crossOrigin:o,href:l},u.querySelector(p)===null&&(l=u.createElement("link"),pt(l,"link",s),nt(l),u.head.appendChild(l)))}}function Zw(s){Wn.D(s),$y("dns-prefetch",s,null)}function eN(s,l){Wn.C(s,l),$y("preconnect",s,l)}function tN(s,l,o){Wn.L(s,l,o);var u=Ni;if(u&&s&&l){var p='link[rel="preload"][as="'+nn(l)+'"]';l==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+nn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+nn(o.imageSizes)+'"]')):p+='[href="'+nn(s)+'"]';var g=p;switch(l){case"style":g=Ci(s);break;case"script":g=Ei(s)}un.has(g)||(s=m({rel:"preload",href:l==="image"&&o&&o.imageSrcSet?void 0:s,as:l},o),un.set(g,s),u.querySelector(p)!==null||l==="style"&&u.querySelector(Bl(g))||l==="script"&&u.querySelector(zl(g))||(l=u.createElement("link"),pt(l,"link",s),nt(l),u.head.appendChild(l)))}}function nN(s,l){Wn.m(s,l);var o=Ni;if(o&&s){var u=l&&typeof l.as=="string"?l.as:"script",p='link[rel="modulepreload"][as="'+nn(u)+'"][href="'+nn(s)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ei(s)}if(!un.has(g)&&(s=m({rel:"modulepreload",href:s},l),un.set(g,s),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zl(g)))return}u=o.createElement("link"),pt(u,"link",s),nt(u),o.head.appendChild(u)}}}function rN(s,l,o){Wn.S(s,l,o);var u=Ni;if(u&&s){var p=Fs(u).hoistableStyles,g=Ci(s);l=l||"default";var w=p.get(g);if(!w){var E={loading:0,preload:null};if(w=u.querySelector(Bl(g)))E.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":l},o),(o=un.get(g))&&cd(s,o);var k=w=u.createElement("link");nt(k),pt(k,"link",s),k._p=new Promise(function(j,V){k.onload=j,k.onerror=V}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ro(w,l,u)}w={type:"stylesheet",instance:w,count:1,state:E},p.set(g,w)}}}function sN(s,l){Wn.X(s,l);var o=Ni;if(o&&s){var u=Fs(o).hoistableScripts,p=Ei(s),g=u.get(p);g||(g=o.querySelector(zl(p)),g||(s=m({src:s,async:!0},l),(l=un.get(p))&&ud(s,l),g=o.createElement("script"),nt(g),pt(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function iN(s,l){Wn.M(s,l);var o=Ni;if(o&&s){var u=Fs(o).hoistableScripts,p=Ei(s),g=u.get(p);g||(g=o.querySelector(zl(p)),g||(s=m({src:s,async:!0,type:"module"},l),(l=un.get(p))&&ud(s,l),g=o.createElement("script"),nt(g),pt(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function Yy(s,l,o,u){var p=(p=pe.current)?Do(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(l=Ci(o.href),o=Fs(p).hoistableStyles,u=o.get(l),u||(u={type:"style",instance:null,count:0,state:null},o.set(l,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Ci(o.href);var g=Fs(p).hoistableStyles,w=g.get(s);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,w),(g=p.querySelector(Bl(s)))&&!g._p&&(w.instance=g,w.state.loading=5),un.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},un.set(s,o),g||lN(p,s,o,w.state))),l&&u===null)throw Error(r(528,""));return w}if(l&&u!==null)throw Error(r(529,""));return null;case"script":return l=o.async,o=o.src,typeof o=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ei(o),o=Fs(p).hoistableScripts,u=o.get(l),u||(u={type:"script",instance:null,count:0,state:null},o.set(l,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ci(s){return'href="'+nn(s)+'"'}function Bl(s){return'link[rel="stylesheet"]['+s+"]"}function Gy(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function lN(s,l,o,u){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?u.loading=1:(l=s.createElement("link"),u.preload=l,l.addEventListener("load",function(){return u.loading|=1}),l.addEventListener("error",function(){return u.loading|=2}),pt(l,"link",o),nt(l),s.head.appendChild(l))}function Ei(s){return'[src="'+nn(s)+'"]'}function zl(s){return"script[async]"+s}function Ky(s,l,o){if(l.count++,l.instance===null)switch(l.type){case"style":var u=s.querySelector('style[data-href~="'+nn(o.href)+'"]');if(u)return l.instance=u,nt(u),u;var p=m({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),nt(u),pt(u,"style",p),Ro(u,o.precedence,s),l.instance=u;case"stylesheet":p=Ci(o.href);var g=s.querySelector(Bl(p));if(g)return l.state.loading|=4,l.instance=g,nt(g),g;u=Gy(o),(p=un.get(p))&&cd(u,p),g=(s.ownerDocument||s).createElement("link"),nt(g);var w=g;return w._p=new Promise(function(E,k){w.onload=E,w.onerror=k}),pt(g,"link",u),l.state.loading|=4,Ro(g,o.precedence,s),l.instance=g;case"script":return g=Ei(o.src),(p=s.querySelector(zl(g)))?(l.instance=p,nt(p),p):(u=o,(p=un.get(g))&&(u=m({},o),ud(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),nt(p),pt(p,"link",u),s.head.appendChild(p),l.instance=p);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(u=l.instance,l.state.loading|=4,Ro(u,o.precedence,s));return l.instance}function Ro(s,l,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,w=0;w<u.length;w++){var E=u[w];if(E.dataset.precedence===l)g=E;else if(g!==p)break}g?g.parentNode.insertBefore(s,g.nextSibling):(l=o.nodeType===9?o.head:o,l.insertBefore(s,l.firstChild))}function cd(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function ud(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var jo=null;function Jy(s,l,o){if(jo===null){var u=new Map,p=jo=new Map;p.set(o,u)}else p=jo,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),p=0;p<o.length;p++){var g=o[p];if(!(g[Ji]||g[xt]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(l)||"";w=s+w;var E=u.get(w);E?E.push(g):u.set(w,[g])}}return u}function Xy(s,l,o){s=s.ownerDocument||s,s.head.insertBefore(o,l==="title"?s.querySelector("head > title"):null)}function aN(s,l,o){if(o===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Qy(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ll=null;function oN(){}function cN(s,l,o){if(Ll===null)throw Error(r(475));var u=Ll;if(l.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ci(o.href),g=s.querySelector(Bl(p));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=_o.bind(u),s.then(u,u)),l.state.loading|=4,l.instance=g,nt(g);return}g=s.ownerDocument||s,o=Gy(o),(p=un.get(p))&&cd(o,p),g=g.createElement("link"),nt(g);var w=g;w._p=new Promise(function(E,k){w.onload=E,w.onerror=k}),pt(g,"link",o),l.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(u.count++,l=_o.bind(u),s.addEventListener("load",l),s.addEventListener("error",l))}}function uN(){if(Ll===null)throw Error(r(475));var s=Ll;return s.stylesheets&&s.count===0&&fd(s,s.stylesheets),0<s.count?function(l){var o=setTimeout(function(){if(s.stylesheets&&fd(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(o)}}:null}function _o(){if(this.count--,this.count===0){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Bo=null;function fd(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Bo=new Map,l.forEach(fN,s),Bo=null,_o.call(s))}function fN(s,l){if(!(l.state.loading&4)){var o=Bo.get(s);if(o)var u=o.get(null);else{o=new Map,Bo.set(s,o);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var w=p[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}p=l.instance,w=p.getAttribute("data-precedence"),g=o.get(w)||u,g===u&&o.set(null,p),o.set(w,p),this.count++,u=_o.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),l.state.loading|=4}}var Hl={$$typeof:q,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function dN(s,l,o,u,p,g,w,E){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.hiddenUpdates=lu(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Wy(s,l,o,u,p,g,w,E,k,j,V,I){return s=new dN(s,l,o,w,E,k,j,I),l=1,g===!0&&(l|=24),g=Yt(3,null,null,l),s.current=g,g.stateNode=s,l=$u(),l.refCount++,s.pooledCache=l,l.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:l},Ju(g),s}function Zy(s){return s?(s=ni,s):ni}function e0(s,l,o,u,p,g){p=Zy(p),u.context===null?u.context=p:u.pendingContext=p,u=mr(l),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=gr(s,u,l),o!==null&&(Qt(o,s,l),pl(o,s,l))}function t0(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<l?o:l}}function dd(s,l){t0(s,l),(s=s.alternate)&&t0(s,l)}function n0(s){if(s.tag===13){var l=ti(s,67108864);l!==null&&Qt(l,s,67108864),dd(s,67108864)}}var zo=!0;function hN(s,l,o,u){var p=U.T;U.T=null;var g=X.p;try{X.p=2,hd(s,l,o,u)}finally{X.p=g,U.T=p}}function pN(s,l,o,u){var p=U.T;U.T=null;var g=X.p;try{X.p=8,hd(s,l,o,u)}finally{X.p=g,U.T=p}}function hd(s,l,o,u){if(zo){var p=pd(u);if(p===null)ed(s,l,u,Lo,o),s0(s,u);else if(gN(p,s,l,o,u))u.stopPropagation();else if(s0(s,u),l&4&&-1<mN.indexOf(s)){for(;p!==null;){var g=Is(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=Zr(g.pendingLanes);if(w!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;w;){var k=1<<31-Ft(w);E.entanglements[1]|=k,w&=~k}kn(g),(Te&6)===0&&(vo=Nn()+500,Dl(0))}}break;case 13:E=ti(g,2),E!==null&&Qt(E,g,2),wo(),dd(g,2)}if(g=pd(u),g===null&&ed(s,l,u,Lo,o),g===p)break;p=g}p!==null&&u.stopPropagation()}else ed(s,l,u,null,o)}}function pd(s){return s=bu(s),md(s)}var Lo=null;function md(s){if(Lo=null,s=Ps(s),s!==null){var l=a(s);if(l===null)s=null;else{var o=l.tag;if(o===13){if(s=c(l),s!==null)return s;s=null}else if(o===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Lo=s,null}function r0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eS()){case yp:return 2;case bp:return 8;case ka:case tS:return 32;case xp:return 268435456;default:return 32}default:return 32}}var gd=!1,Or=null,Ar=null,Dr=null,Ul=new Map,ql=new Map,Rr=[],mN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s0(s,l){switch(s){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Ul.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(l.pointerId)}}function Vl(s,l,o,u,p,g){return s===null||s.nativeEvent!==g?(s={blockedOn:l,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},l!==null&&(l=Is(l),l!==null&&n0(l)),s):(s.eventSystemFlags|=u,l=s.targetContainers,p!==null&&l.indexOf(p)===-1&&l.push(p),s)}function gN(s,l,o,u,p){switch(l){case"focusin":return Or=Vl(Or,s,l,o,u,p),!0;case"dragenter":return Ar=Vl(Ar,s,l,o,u,p),!0;case"mouseover":return Dr=Vl(Dr,s,l,o,u,p),!0;case"pointerover":var g=p.pointerId;return Ul.set(g,Vl(Ul.get(g)||null,s,l,o,u,p)),!0;case"gotpointercapture":return g=p.pointerId,ql.set(g,Vl(ql.get(g)||null,s,l,o,u,p)),!0}return!1}function i0(s){var l=Ps(s.target);if(l!==null){var o=a(l);if(o!==null){if(l=o.tag,l===13){if(l=c(o),l!==null){s.blockedOn=l,cS(s.priority,function(){if(o.tag===13){var u=Xt();u=au(u);var p=ti(o,u);p!==null&&Qt(p,o,u),dd(o,u)}});return}}else if(l===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ho(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var o=pd(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);yu=u,o.target.dispatchEvent(u),yu=null}else return l=Is(o),l!==null&&n0(l),s.blockedOn=o,!1;l.shift()}return!0}function l0(s,l,o){Ho(s)&&o.delete(l)}function yN(){gd=!1,Or!==null&&Ho(Or)&&(Or=null),Ar!==null&&Ho(Ar)&&(Ar=null),Dr!==null&&Ho(Dr)&&(Dr=null),Ul.forEach(l0),ql.forEach(l0)}function Uo(s,l){s.blockedOn===l&&(s.blockedOn=null,gd||(gd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yN)))}var qo=null;function a0(s){qo!==s&&(qo=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qo===s&&(qo=null);for(var l=0;l<s.length;l+=3){var o=s[l],u=s[l+1],p=s[l+2];if(typeof u!="function"){if(md(u||o)===null)continue;break}var g=Is(o);g!==null&&(s.splice(l,3),l-=3,mf(g,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Pl(s){function l(k){return Uo(k,s)}Or!==null&&Uo(Or,s),Ar!==null&&Uo(Ar,s),Dr!==null&&Uo(Dr,s),Ul.forEach(l),ql.forEach(l);for(var o=0;o<Rr.length;o++){var u=Rr[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Rr.length&&(o=Rr[0],o.blockedOn===null);)i0(o),o.blockedOn===null&&Rr.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],g=o[u+1],w=p[jt]||null;if(typeof g=="function")w||a0(o);else if(w){var E=null;if(g&&g.hasAttribute("formAction")){if(p=g,w=g[jt]||null)E=w.formAction;else if(md(p)!==null)continue}else E=w.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),a0(o)}}}function yd(s){this._internalRoot=s}Vo.prototype.render=yd.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var o=l.current,u=Xt();e0(o,u,s,l,null,null)},Vo.prototype.unmount=yd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;e0(s.current,2,null,s,null,null),wo(),l[Vs]=null}};function Vo(s){this._internalRoot=s}Vo.prototype.unstable_scheduleHydration=function(s){if(s){var l=Cp();s={blockedOn:null,target:s,priority:l};for(var o=0;o<Rr.length&&l!==0&&l<Rr[o].priority;o++);Rr.splice(o,0,s),o===0&&i0(s)}};var o0=e.version;if(o0!=="19.1.0")throw Error(r(527,o0,"19.1.0"));X.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var bN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Po.isDisabled&&Po.supportsFiber)try{Yi=Po.inject(bN),It=Po}catch{}}return Fl.createRoot=function(s,l){if(!i(s))throw Error(r(299));var o=!1,u="",p=Cg,g=Eg,w=Mg,E=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(u=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(g=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(E=l.unstable_transitionCallbacks)),l=Wy(s,1,!1,null,null,o,u,p,g,w,E,null),s[Vs]=l.current,Zf(s),new yd(l)},Fl.hydrateRoot=function(s,l,o){if(!i(s))throw Error(r(299));var u=!1,p="",g=Cg,w=Eg,E=Mg,k=null,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(j=o.formState)),l=Wy(s,1,!0,l,o??null,u,p,g,w,E,k,j),l.context=Zy(null),o=l.current,u=Xt(),u=au(u),p=mr(u),p.callback=null,gr(o,p,u),o=u,l.current.lanes=o,Ki(l,o),kn(l),s[Vs]=l.current,Zf(s),new Vo(l)},Fl.version="19.1.0",Fl}var b0;function TN(){if(b0)return vd.exports;b0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vd.exports=MN(),vd.exports}var kN=TN();const ON=Rh(kN);var $l={},x0;function AN(){if(x0)return $l;x0=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.parse=c,$l.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function c(x,S){const v=new a,N=x.length;if(N<2)return v;const C=S?.decode||m;let M=0;do{const _=x.indexOf("=",M);if(_===-1)break;const q=x.indexOf(";",M),K=q===-1?N:q;if(_>K){M=x.lastIndexOf(";",_-1)+1;continue}const F=f(x,M,_),Z=d(x,_,F),Y=x.slice(F,Z);if(v[Y]===void 0){let L=f(x,_+1,K),J=d(x,K,L);const le=C(x.slice(L,J));v[Y]=le}M=K+1}while(M<N);return v}function f(x,S,v){do{const N=x.charCodeAt(S);if(N!==32&&N!==9)return S}while(++S<v);return v}function d(x,S,v){for(;S>v;){const N=x.charCodeAt(--S);if(N!==32&&N!==9)return S+1}return v}function h(x,S,v){const N=v?.encode||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const C=N(S);if(!e.test(C))throw new TypeError(`argument val is invalid: ${S}`);let M=x+"="+C;if(!v)return M;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);M+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);M+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);M+="; Path="+v.path}if(v.expires){if(!b(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);M+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(M+="; HttpOnly"),v.secure&&(M+="; Secure"),v.partitioned&&(M+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return M}function m(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function b(x){return i.call(x)==="[object Date]"}return $l}AN();var v0="popstate";function DN(n={}){function e(r,i){let{pathname:a,search:c,hash:f}=r.location;return rh("",{pathname:a,search:c,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:la(i)}return jN(e,t,null,n)}function Ie(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Rn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RN(){return Math.random().toString(36).substring(2,10)}function S0(n,e){return{usr:n.state,key:n.key,idx:e}}function rh(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vi(e):e,state:t,key:e&&e.key||r||RN()}}function la({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vi(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function jN(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,f="POP",d=null,h=m();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function m(){return(c.state||{idx:null}).idx}function b(){f="POP";let C=m(),M=C==null?null:C-h;h=C,d&&d({action:f,location:N.location,delta:M})}function x(C,M){f="PUSH";let _=rh(N.location,C,M);h=m()+1;let q=S0(_,h),K=N.createHref(_);try{c.pushState(q,"",K)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(K)}a&&d&&d({action:f,location:N.location,delta:1})}function S(C,M){f="REPLACE";let _=rh(N.location,C,M);h=m();let q=S0(_,h),K=N.createHref(_);c.replaceState(q,"",K),a&&d&&d({action:f,location:N.location,delta:0})}function v(C){return _N(C)}let N={get action(){return f},get location(){return n(i,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(v0,b),d=C,()=>{i.removeEventListener(v0,b),d=null}},createHref(C){return e(i,C)},createURL:v,encodeLocation(C){let M=v(C);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:S,go(C){return c.go(C)}};return N}function _N(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ie(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:la(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function ax(n,e,t="/"){return BN(n,e,t,!1)}function BN(n,e,t,r){let i=typeof e=="string"?Vi(e):e,a=lr(i.pathname||"/",t);if(a==null)return null;let c=ox(n);zN(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let h=GN(a);f=$N(c[d],h,r)}return f}function ox(n,e=[],t=[],r=""){let i=(a,c,f)=>{let d={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Ie(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let h=rr([r,d.relativePath]),m=t.concat(d);a.children&&a.children.length>0&&(Ie(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),ox(a.children,e,m,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:IN(h,a.index),routesMeta:m})};return n.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))i(a,c);else for(let f of cx(a.path))i(a,c,f)}),e}function cx(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=cx(r.join("/")),f=[];return f.push(...c.map(d=>d===""?a:[a,d].join("/"))),i&&f.push(...c),f.map(d=>n.startsWith("/")&&d===""?"/":d)}function zN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:FN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var LN=/^:[\w-]+$/,HN=3,UN=2,qN=1,VN=10,PN=-2,w0=n=>n==="*";function IN(n,e){let t=n.split("/"),r=t.length;return t.some(w0)&&(r+=PN),e&&(r+=UN),t.filter(i=>!w0(i)).reduce((i,a)=>i+(LN.test(a)?HN:a===""?qN:VN),r)}function FN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function $N(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",c=[];for(let f=0;f<r.length;++f){let d=r[f],h=f===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",b=hc({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),x=d.route;if(!b&&h&&t&&!r[r.length-1].route.index&&(b=hc({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:rr([a,b.pathname]),pathnameBase:QN(rr([a,b.pathnameBase])),route:x}),b.pathnameBase!=="/"&&(a=rr([a,b.pathnameBase]))}return c}function hc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=YN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:b},x)=>{if(m==="*"){let v=f[x]||"";c=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const S=f[x];return b&&!S?h[m]=void 0:h[m]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:c,pattern:n}}function YN(n,e=!1,t=!0){Rn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function lr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function KN(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Vi(n):n;return{pathname:t?t.startsWith("/")?t:JN(t,e):e,search:WN(r),hash:ZN(i)}}function JN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Cd(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ux(n){let e=XN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function fx(n,e,t,r=!1){let i;typeof n=="string"?i=Vi(n):(i={...n},Ie(!i.pathname||!i.pathname.includes("?"),Cd("?","pathname","search",i)),Ie(!i.pathname||!i.pathname.includes("#"),Cd("#","pathname","hash",i)),Ie(!i.search||!i.search.includes("#"),Cd("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,f;if(c==null)f=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),b-=1;i.pathname=x.join("/")}f=b>=0?e[b]:"/"}let d=KN(i,f),h=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var rr=n=>n.join("/").replace(/\/\/+/g,"/"),QN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),WN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function eC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var dx=["POST","PUT","PATCH","DELETE"];new Set(dx);var tC=["GET",...dx];new Set(tC);var Pi=T.createContext(null);Pi.displayName="DataRouter";var Rc=T.createContext(null);Rc.displayName="DataRouterState";var hx=T.createContext({isTransitioning:!1});hx.displayName="ViewTransition";var nC=T.createContext(new Map);nC.displayName="Fetchers";var rC=T.createContext(null);rC.displayName="Await";var zn=T.createContext(null);zn.displayName="Navigation";var xa=T.createContext(null);xa.displayName="Location";var ar=T.createContext({outlet:null,matches:[],isDataRoute:!1});ar.displayName="Route";var _h=T.createContext(null);_h.displayName="RouteError";function sC(n,{relative:e}={}){Ie(va(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=T.useContext(zn),{hash:i,pathname:a,search:c}=Sa(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:rr([t,a])),r.createHref({pathname:f,search:c,hash:i})}function va(){return T.useContext(xa)!=null}function or(){return Ie(va(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(xa).location}var px="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mx(n){T.useContext(zn).static||T.useLayoutEffect(n)}function Us(){let{isDataRoute:n}=T.useContext(ar);return n?yC():iC()}function iC(){Ie(va(),"useNavigate() may be used only in the context of a <Router> component.");let n=T.useContext(Pi),{basename:e,navigator:t}=T.useContext(zn),{matches:r}=T.useContext(ar),{pathname:i}=or(),a=JSON.stringify(ux(r)),c=T.useRef(!1);return mx(()=>{c.current=!0}),T.useCallback((d,h={})=>{if(Rn(c.current,px),!c.current)return;if(typeof d=="number"){t.go(d);return}let m=fx(d,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:rr([e,m.pathname])),(h.replace?t.replace:t.push)(m,h.state,h)},[e,t,a,i,n])}T.createContext(null);function Sa(n,{relative:e}={}){let{matches:t}=T.useContext(ar),{pathname:r}=or(),i=JSON.stringify(ux(t));return T.useMemo(()=>fx(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function lC(n,e){return gx(n,e)}function gx(n,e,t,r){Ie(va(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=T.useContext(zn),{matches:a}=T.useContext(ar),c=a[a.length-1],f=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let M=m&&m.path||"";yx(d,!m||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let b=or(),x;if(e){let M=typeof e=="string"?Vi(e):e;Ie(h==="/"||M.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${M.pathname}" was given in the \`location\` prop.`),x=M}else x=b;let S=x.pathname||"/",v=S;if(h!=="/"){let M=h.replace(/^\//,"").split("/");v="/"+S.replace(/^\//,"").split("/").slice(M.length).join("/")}let N=ax(n,{pathname:v});Rn(m||N!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Rn(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=fC(N&&N.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:rr([h,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?h:rr([h,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,t,r);return e&&C?T.createElement(xa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function aC(){let n=gC(),e=eC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=T.createElement(T.Fragment,null,T.createElement("p",null,"💿 Hey developer 👋"),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),t?T.createElement("pre",{style:i},t):null,c)}var oC=T.createElement(aC,null),cC=class extends T.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?T.createElement(ar.Provider,{value:this.props.routeContext},T.createElement(_h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uC({routeContext:n,match:e,children:t}){let r=T.useContext(Pi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(ar.Provider,{value:n},t)}function fC(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t?.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);Ie(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,f=-1;if(t)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=d),h.route.id){let{loaderData:m,errors:b}=t,x=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||x){c=!0,f>=0?i=i.slice(0,f+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let b,x=!1,S=null,v=null;t&&(b=a&&h.route.id?a[h.route.id]:void 0,S=h.route.errorElement||oC,c&&(f<0&&m===0?(yx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,v=null):f===m&&(x=!0,v=h.route.hydrateFallbackElement||null)));let N=e.concat(i.slice(0,m+1)),C=()=>{let M;return b?M=S:x?M=v:h.route.Component?M=T.createElement(h.route.Component,null):h.route.element?M=h.route.element:M=d,T.createElement(uC,{match:h,routeContext:{outlet:d,matches:N,isDataRoute:t!=null},children:M})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?T.createElement(cC,{location:t.location,revalidation:t.revalidation,component:S,error:b,children:C(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):C()},null)}function Bh(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dC(n){let e=T.useContext(Pi);return Ie(e,Bh(n)),e}function hC(n){let e=T.useContext(Rc);return Ie(e,Bh(n)),e}function pC(n){let e=T.useContext(ar);return Ie(e,Bh(n)),e}function zh(n){let e=pC(n),t=e.matches[e.matches.length-1];return Ie(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function mC(){return zh("useRouteId")}function gC(){let n=T.useContext(_h),e=hC("useRouteError"),t=zh("useRouteError");return n!==void 0?n:e.errors?.[t]}function yC(){let{router:n}=dC("useNavigate"),e=zh("useNavigate"),t=T.useRef(!1);return mx(()=>{t.current=!0}),T.useCallback(async(i,a={})=>{Rn(t.current,px),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var N0={};function yx(n,e,t){!e&&!N0[n]&&(N0[n]=!0,Rn(!1,t))}T.memo(bC);function bC({routes:n,future:e,state:t}){return gx(n,void 0,t,e)}function bs(n){Ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Ie(!va(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=T.useMemo(()=>({basename:c,navigator:i,static:a,future:{}}),[c,i,a]);typeof t=="string"&&(t=Vi(t));let{pathname:d="/",search:h="",hash:m="",state:b=null,key:x="default"}=t,S=T.useMemo(()=>{let v=lr(d,c);return v==null?null:{location:{pathname:v,search:h,hash:m,state:b,key:x},navigationType:r}},[c,d,h,m,b,x,r]);return Rn(S!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:T.createElement(zn.Provider,{value:f},T.createElement(xa.Provider,{children:e,value:S}))}function C0({children:n,location:e}){return lC(sh(n),e)}function sh(n,e=[]){let t=[];return T.Children.forEach(n,(r,i)=>{if(!T.isValidElement(r))return;let a=[...e,i];if(r.type===T.Fragment){t.push.apply(t,sh(r.props.children,a));return}Ie(r.type===bs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ie(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=sh(r.props.children,a)),t.push(c)}),t}var sc="get",ic="application/x-www-form-urlencoded";function jc(n){return n!=null&&typeof n.tagName=="string"}function vC(n){return jc(n)&&n.tagName.toLowerCase()==="button"}function SC(n){return jc(n)&&n.tagName.toLowerCase()==="form"}function wC(n){return jc(n)&&n.tagName.toLowerCase()==="input"}function NC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function CC(n,e){return n.button===0&&(!e||e==="_self")&&!NC(n)}var Io=null;function EC(){if(Io===null)try{new FormData(document.createElement("form"),0),Io=!1}catch{Io=!0}return Io}var MC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ed(n){return n!=null&&!MC.has(n)?(Rn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ic}"`),null):n}function TC(n,e){let t,r,i,a,c;if(SC(n)){let f=n.getAttribute("action");r=f?lr(f,e):null,t=n.getAttribute("method")||sc,i=Ed(n.getAttribute("enctype"))||ic,a=new FormData(n)}else if(vC(n)||wC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||f.getAttribute("action");if(r=d?lr(d,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||sc,i=Ed(n.getAttribute("formenctype"))||Ed(f.getAttribute("enctype"))||ic,a=new FormData(f,n),!EC()){let{name:h,type:m,value:b}=n;if(m==="image"){let x=h?`${h}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else h&&a.append(h,b)}}else{if(jc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sc,r=null,i=ic,c=n}return a&&i==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:c}}function Lh(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function kC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function AC(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let c=await kC(a,t);return c.links?c.links():[]}return[]}));return _C(r.flat(1).filter(OC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function E0(n,e,t,r,i,a){let c=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,f=(d,h)=>t[h].pathname!==d.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,h)=>c(d,h)||f(d,h)):a==="data"?e.filter((d,h)=>{let m=r.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,h)||f(d,h))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function DC(n,e,{includeHydrateFallback:t}={}){return RC(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function RC(n){return[...new Set(n)]}function jC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function _C(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(jC(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BC=new Set([100,101,204,205]);function zC(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&lr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function bx(){let n=T.useContext(Pi);return Lh(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function LC(){let n=T.useContext(Rc);return Lh(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Hh=T.createContext(void 0);Hh.displayName="FrameworkContext";function xx(){let n=T.useContext(Hh);return Lh(n,"You must render this element inside a <HydratedRouter> element"),n}function HC(n,e){let t=T.useContext(Hh),[r,i]=T.useState(!1),[a,c]=T.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:b}=e,x=T.useRef(null);T.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let N=M=>{M.forEach(_=>{c(_.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[n]),T.useEffect(()=>{if(r){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[r]);let S=()=>{i(!0)},v=()=>{i(!1),c(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:Yl(f,S),onBlur:Yl(d,v),onMouseEnter:Yl(h,S),onMouseLeave:Yl(m,v),onTouchStart:Yl(b,S)}]:[!1,x,{}]}function Yl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function UC({page:n,...e}){let{router:t}=bx(),r=T.useMemo(()=>ax(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?T.createElement(VC,{page:n,matches:r,...e}):null}function qC(n){let{manifest:e,routeModules:t}=xx(),[r,i]=T.useState([]);return T.useEffect(()=>{let a=!1;return AC(n,e,t).then(c=>{a||i(c)}),()=>{a=!0}},[n,e,t]),r}function VC({page:n,matches:e,...t}){let r=or(),{manifest:i,routeModules:a}=xx(),{basename:c}=bx(),{loaderData:f,matches:d}=LC(),h=T.useMemo(()=>E0(n,e,d,i,r,"data"),[n,e,d,i,r]),m=T.useMemo(()=>E0(n,e,d,i,r,"assets"),[n,e,d,i,r]),b=T.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,N=!1;if(e.forEach(M=>{let _=i.routes[M.route.id];!_||!_.hasLoader||(!h.some(q=>q.route.id===M.route.id)&&M.route.id in f&&a[M.route.id]?.shouldRevalidate||_.hasClientLoader?N=!0:v.add(M.route.id))}),v.size===0)return[];let C=zC(n,c);return N&&v.size>0&&C.searchParams.set("_routes",e.filter(M=>v.has(M.route.id)).map(M=>M.route.id).join(",")),[C.pathname+C.search]},[c,f,r,i,h,e,n,a]),x=T.useMemo(()=>DC(m,i),[m,i]),S=qC(m);return T.createElement(T.Fragment,null,b.map(v=>T.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),x.map(v=>T.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),S.map(({key:v,link:N})=>T.createElement("link",{key:v,...N})))}function PC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vx&&(window.__reactRouterVersion="7.6.3")}catch{}function IC({basename:n,children:e,window:t}){let r=T.useRef();r.current==null&&(r.current=DN({window:t,v5Compat:!0}));let i=r.current,[a,c]=T.useState({action:i.action,location:i.location}),f=T.useCallback(d=>{T.startTransition(()=>c(d))},[c]);return T.useLayoutEffect(()=>i.listen(f),[i,f]),T.createElement(xC,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wx=T.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:c,state:f,target:d,to:h,preventScrollReset:m,viewTransition:b,...x},S){let{basename:v}=T.useContext(zn),N=typeof h=="string"&&Sx.test(h),C,M=!1;if(typeof h=="string"&&N&&(C=h,vx))try{let J=new URL(window.location.href),le=h.startsWith("//")?new URL(J.protocol+h):new URL(h),re=lr(le.pathname,v);le.origin===J.origin&&re!=null?h=re+le.search+le.hash:M=!0}catch{Rn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=sC(h,{relative:i}),[q,K,F]=HC(r,x),Z=GC(h,{replace:c,state:f,target:d,preventScrollReset:m,relative:i,viewTransition:b});function Y(J){e&&e(J),J.defaultPrevented||Z(J)}let L=T.createElement("a",{...x,...F,href:C||_,onClick:M||a?e:Y,ref:PC(S,K),target:d,"data-discover":!N&&t==="render"?"true":void 0});return q&&!N?T.createElement(T.Fragment,null,L,T.createElement(UC,{page:_})):L});wx.displayName="Link";var FC=T.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:c,viewTransition:f,children:d,...h},m){let b=Sa(c,{relative:h.relative}),x=or(),S=T.useContext(Rc),{navigator:v,basename:N}=T.useContext(zn),C=S!=null&&WC(b)&&f===!0,M=v.encodeLocation?v.encodeLocation(b).pathname:b.pathname,_=x.pathname,q=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(_=_.toLowerCase(),q=q?q.toLowerCase():null,M=M.toLowerCase()),q&&N&&(q=lr(q,N)||q);const K=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let F=_===M||!i&&_.startsWith(M)&&_.charAt(K)==="/",Z=q!=null&&(q===M||!i&&q.startsWith(M)&&q.charAt(M.length)==="/"),Y={isActive:F,isPending:Z,isTransitioning:C},L=F?e:void 0,J;typeof r=="function"?J=r(Y):J=[r,F?"active":null,Z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let le=typeof a=="function"?a(Y):a;return T.createElement(wx,{...h,"aria-current":L,className:J,ref:m,style:le,to:c,viewTransition:f},typeof d=="function"?d(Y):d)});FC.displayName="NavLink";var $C=T.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:c=sc,action:f,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:b,...x},S)=>{let v=XC(),N=QC(f,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",M=typeof f=="string"&&Sx.test(f),_=q=>{if(d&&d(q),q.defaultPrevented)return;q.preventDefault();let K=q.nativeEvent.submitter,F=K?.getAttribute("formmethod")||c;v(K||q.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:i,state:a,relative:h,preventScrollReset:m,viewTransition:b})};return T.createElement("form",{ref:S,method:C,action:N,onSubmit:r?d:_,...x,"data-discover":!M&&n==="render"?"true":void 0})});$C.displayName="Form";function YC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nx(n){let e=T.useContext(Pi);return Ie(e,YC(n)),e}function GC(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:c}={}){let f=Us(),d=or(),h=Sa(n,{relative:a});return T.useCallback(m=>{if(CC(m,e)){m.preventDefault();let b=t!==void 0?t:la(d)===la(h);f(n,{replace:b,state:r,preventScrollReset:i,relative:a,viewTransition:c})}},[d,f,h,t,r,e,n,i,a,c])}var KC=0,JC=()=>`__${String(++KC)}__`;function XC(){let{router:n}=Nx("useSubmit"),{basename:e}=T.useContext(zn),t=mC();return T.useCallback(async(r,i={})=>{let{action:a,method:c,encType:f,formData:d,body:h}=TC(r,e);if(i.navigate===!1){let m=i.fetcherKey||JC();await n.fetch(m,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||c,formEncType:i.encType||f,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||c,formEncType:i.encType||f,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function QC(n,{relative:e}={}){let{basename:t}=T.useContext(zn),r=T.useContext(ar);Ie(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Sa(n||".",{relative:e})},c=or();if(n==null){a.search=c.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(m=>m==="")){f.delete("index"),d.filter(b=>b).forEach(b=>f.append("index",b));let m=f.toString();a.search=m?`?${m}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:rr([t,a.pathname])),la(a)}function WC(n,e={}){let t=T.useContext(hx);Ie(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Nx("useViewTransitionState"),i=Sa(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=lr(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=lr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return hc(i.pathname,c)!=null||hc(i.pathname,a)!=null}[...BC];var ZC=lx();const eE=Rh(ZC);function Cx(n,e){return function(){return n.apply(e,arguments)}}const{toString:tE}=Object.prototype,{getPrototypeOf:Uh}=Object,{iterator:_c,toStringTag:Ex}=Symbol,Bc=(n=>e=>{const t=tE.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wn=n=>(n=n.toLowerCase(),e=>Bc(e)===n),zc=n=>e=>typeof e===n,{isArray:Ii}=Array,aa=zc("undefined");function nE(n){return n!==null&&!aa(n)&&n.constructor!==null&&!aa(n.constructor)&&Ht(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Mx=wn("ArrayBuffer");function rE(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Mx(n.buffer),e}const sE=zc("string"),Ht=zc("function"),Tx=zc("number"),Lc=n=>n!==null&&typeof n=="object",iE=n=>n===!0||n===!1,lc=n=>{if(Bc(n)!=="object")return!1;const e=Uh(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ex in n)&&!(_c in n)},lE=wn("Date"),aE=wn("File"),oE=wn("Blob"),cE=wn("FileList"),uE=n=>Lc(n)&&Ht(n.pipe),fE=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ht(n.append)&&((e=Bc(n))==="formdata"||e==="object"&&Ht(n.toString)&&n.toString()==="[object FormData]"))},dE=wn("URLSearchParams"),[hE,pE,mE,gE]=["ReadableStream","Request","Response","Headers"].map(wn),yE=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wa(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Ii(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),c=a.length;let f;for(r=0;r<c;r++)f=a[r],e.call(null,n[f],f,n)}}function kx(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const ws=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ox=n=>!aa(n)&&n!==ws;function ih(){const{caseless:n}=Ox(this)&&this||{},e={},t=(r,i)=>{const a=n&&kx(e,i)||i;lc(e[a])&&lc(r)?e[a]=ih(e[a],r):lc(r)?e[a]=ih({},r):Ii(r)?e[a]=r.slice():e[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&wa(arguments[r],t);return e}const bE=(n,e,t,{allOwnKeys:r}={})=>(wa(e,(i,a)=>{t&&Ht(i)?n[a]=Cx(i,t):n[a]=i},{allOwnKeys:r}),n),xE=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),vE=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},SE=(n,e,t,r)=>{let i,a,c;const f={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)c=i[a],(!r||r(c,n,e))&&!f[c]&&(e[c]=n[c],f[c]=!0);n=t!==!1&&Uh(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},wE=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},NE=n=>{if(!n)return null;if(Ii(n))return n;let e=n.length;if(!Tx(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},CE=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Uh(Uint8Array)),EE=(n,e)=>{const r=(n&&n[_c]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},ME=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},TE=wn("HTMLFormElement"),kE=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),M0=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),OE=wn("RegExp"),Ax=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};wa(t,(i,a)=>{let c;(c=e(i,a,n))!==!1&&(r[a]=c||i)}),Object.defineProperties(n,r)},AE=n=>{Ax(n,(e,t)=>{if(Ht(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Ht(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},DE=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return Ii(n)?r(n):r(String(n).split(e)),t},RE=()=>{},jE=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function _E(n){return!!(n&&Ht(n.append)&&n[Ex]==="FormData"&&n[_c])}const BE=n=>{const e=new Array(10),t=(r,i)=>{if(Lc(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const a=Ii(r)?[]:{};return wa(r,(c,f)=>{const d=t(c,i+1);!aa(d)&&(a[f]=d)}),e[i]=void 0,a}}return r};return t(n,0)},zE=wn("AsyncFunction"),LE=n=>n&&(Lc(n)||Ht(n))&&Ht(n.then)&&Ht(n.catch),Dx=((n,e)=>n?setImmediate:e?((t,r)=>(ws.addEventListener("message",({source:i,data:a})=>{i===ws&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),ws.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ht(ws.postMessage)),HE=typeof queueMicrotask<"u"?queueMicrotask.bind(ws):typeof process<"u"&&process.nextTick||Dx,UE=n=>n!=null&&Ht(n[_c]),H={isArray:Ii,isArrayBuffer:Mx,isBuffer:nE,isFormData:fE,isArrayBufferView:rE,isString:sE,isNumber:Tx,isBoolean:iE,isObject:Lc,isPlainObject:lc,isReadableStream:hE,isRequest:pE,isResponse:mE,isHeaders:gE,isUndefined:aa,isDate:lE,isFile:aE,isBlob:oE,isRegExp:OE,isFunction:Ht,isStream:uE,isURLSearchParams:dE,isTypedArray:CE,isFileList:cE,forEach:wa,merge:ih,extend:bE,trim:yE,stripBOM:xE,inherits:vE,toFlatObject:SE,kindOf:Bc,kindOfTest:wn,endsWith:wE,toArray:NE,forEachEntry:EE,matchAll:ME,isHTMLForm:TE,hasOwnProperty:M0,hasOwnProp:M0,reduceDescriptors:Ax,freezeMethods:AE,toObjectSet:DE,toCamelCase:kE,noop:RE,toFiniteNumber:jE,findKey:kx,global:ws,isContextDefined:Ox,isSpecCompliantForm:_E,toJSONObject:BE,isAsyncFn:zE,isThenable:LE,setImmediate:Dx,asap:HE,isIterable:UE};function me(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}H.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const Rx=me.prototype,jx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{jx[n]={value:n}});Object.defineProperties(me,jx);Object.defineProperty(Rx,"isAxiosError",{value:!0});me.from=(n,e,t,r,i,a)=>{const c=Object.create(Rx);return H.toFlatObject(n,c,function(d){return d!==Error.prototype},f=>f!=="isAxiosError"),me.call(c,n.message,e,t,r,i),c.cause=n,c.name=n.name,a&&Object.assign(c,a),c};const qE=null;function lh(n){return H.isPlainObject(n)||H.isArray(n)}function _x(n){return H.endsWith(n,"[]")?n.slice(0,-2):n}function T0(n,e,t){return n?n.concat(e).map(function(i,a){return i=_x(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function VE(n){return H.isArray(n)&&!n.some(lh)}const PE=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function Hc(n,e,t){if(!H.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,C){return!H.isUndefined(C[N])});const r=t.metaTokens,i=t.visitor||m,a=t.dots,c=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(i))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(H.isDate(v))return v.toISOString();if(H.isBoolean(v))return v.toString();if(!d&&H.isBlob(v))throw new me("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(v)||H.isTypedArray(v)?d&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function m(v,N,C){let M=v;if(v&&!C&&typeof v=="object"){if(H.endsWith(N,"{}"))N=r?N:N.slice(0,-2),v=JSON.stringify(v);else if(H.isArray(v)&&VE(v)||(H.isFileList(v)||H.endsWith(N,"[]"))&&(M=H.toArray(v)))return N=_x(N),M.forEach(function(q,K){!(H.isUndefined(q)||q===null)&&e.append(c===!0?T0([N],K,a):c===null?N:N+"[]",h(q))}),!1}return lh(v)?!0:(e.append(T0(C,N,a),h(v)),!1)}const b=[],x=Object.assign(PE,{defaultVisitor:m,convertValue:h,isVisitable:lh});function S(v,N){if(!H.isUndefined(v)){if(b.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));b.push(v),H.forEach(v,function(M,_){(!(H.isUndefined(M)||M===null)&&i.call(e,M,H.isString(_)?_.trim():_,N,x))===!0&&S(M,N?N.concat(_):[_])}),b.pop()}}if(!H.isObject(n))throw new TypeError("data must be an object");return S(n),e}function k0(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function qh(n,e){this._pairs=[],n&&Hc(n,this,e)}const Bx=qh.prototype;Bx.append=function(e,t){this._pairs.push([e,t])};Bx.toString=function(e){const t=e?function(r){return e.call(this,r,k0)}:k0;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function IE(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zx(n,e,t){if(!e)return n;const r=t&&t.encode||IE;H.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=H.isURLSearchParams(e)?e.toString():new qh(e,t).toString(r),a){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class O0{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Lx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FE=typeof URLSearchParams<"u"?URLSearchParams:qh,$E=typeof FormData<"u"?FormData:null,YE=typeof Blob<"u"?Blob:null,GE={isBrowser:!0,classes:{URLSearchParams:FE,FormData:$E,Blob:YE},protocols:["http","https","file","blob","url","data"]},Vh=typeof window<"u"&&typeof document<"u",ah=typeof navigator=="object"&&navigator||void 0,KE=Vh&&(!ah||["ReactNative","NativeScript","NS"].indexOf(ah.product)<0),JE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",XE=Vh&&window.location.href||"http://localhost",QE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vh,hasStandardBrowserEnv:KE,hasStandardBrowserWebWorkerEnv:JE,navigator:ah,origin:XE},Symbol.toStringTag,{value:"Module"})),Nt={...QE,...GE};function WE(n,e){return Hc(n,new Nt.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,a){return Nt.isNode&&H.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function ZE(n){return H.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function eM(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function Hx(n){function e(t,r,i,a){let c=t[a++];if(c==="__proto__")return!0;const f=Number.isFinite(+c),d=a>=t.length;return c=!c&&H.isArray(i)?i.length:c,d?(H.hasOwnProp(i,c)?i[c]=[i[c],r]:i[c]=r,!f):((!i[c]||!H.isObject(i[c]))&&(i[c]=[]),e(t,r,i[c],a)&&H.isArray(i[c])&&(i[c]=eM(i[c])),!f)}if(H.isFormData(n)&&H.isFunction(n.entries)){const t={};return H.forEachEntry(n,(r,i)=>{e(ZE(r),i,t,0)}),t}return null}function tM(n,e,t){if(H.isString(n))try{return(e||JSON.parse)(n),H.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Na={transitional:Lx,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=H.isObject(e);if(a&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return i?JSON.stringify(Hx(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return WE(e,this.formSerializer).toString();if((f=H.isFileList(e))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Hc(f?{"files[]":e}:e,d&&new d,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),tM(e)):e}],transformResponse:[function(e){const t=this.transitional||Na.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(r&&!this.responseType||i)){const c=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(f){if(c)throw f.name==="SyntaxError"?me.from(f,me.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Nt.classes.FormData,Blob:Nt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],n=>{Na.headers[n]={}});const nM=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rM=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(c){i=c.indexOf(":"),t=c.substring(0,i).trim().toLowerCase(),r=c.substring(i+1).trim(),!(!t||e[t]&&nM[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},A0=Symbol("internals");function Gl(n){return n&&String(n).trim().toLowerCase()}function ac(n){return n===!1||n==null?n:H.isArray(n)?n.map(ac):String(n)}function sM(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const iM=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Md(n,e,t,r,i){if(H.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!H.isString(e)){if(H.isString(r))return e.indexOf(r)!==-1;if(H.isRegExp(r))return r.test(e)}}function lM(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function aM(n,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,c){return this[r].call(this,e,i,a,c)},configurable:!0})})}let Ut=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(f,d,h){const m=Gl(d);if(!m)throw new Error("header name must be a non-empty string");const b=H.findKey(i,m);(!b||i[b]===void 0||h===!0||h===void 0&&i[b]!==!1)&&(i[b||d]=ac(f))}const c=(f,d)=>H.forEach(f,(h,m)=>a(h,m,d));if(H.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(H.isString(e)&&(e=e.trim())&&!iM(e))c(rM(e),t);else if(H.isObject(e)&&H.isIterable(e)){let f={},d,h;for(const m of e){if(!H.isArray(m))throw TypeError("Object iterator must return a key-value pair");f[h=m[0]]=(d=f[h])?H.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}c(f,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=Gl(e),e){const r=H.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return sM(i);if(H.isFunction(t))return t.call(this,i,r);if(H.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gl(e),e){const r=H.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Md(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(c){if(c=Gl(c),c){const f=H.findKey(r,c);f&&(!t||Md(r,r[f],f,t))&&(delete r[f],i=!0)}}return H.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||Md(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return H.forEach(this,(i,a)=>{const c=H.findKey(r,a);if(c){t[c]=ac(i),delete t[a];return}const f=e?lM(a):String(a).trim();f!==a&&delete t[a],t[f]=ac(i),r[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&H.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[A0]=this[A0]={accessors:{}}).accessors,i=this.prototype;function a(c){const f=Gl(c);r[f]||(aM(i,c),r[f]=!0)}return H.isArray(e)?e.forEach(a):a(e),this}};Ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(Ut.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});H.freezeMethods(Ut);function Td(n,e){const t=this||Na,r=e||t,i=Ut.from(r.headers);let a=r.data;return H.forEach(n,function(f){a=f.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function Ux(n){return!!(n&&n.__CANCEL__)}function Fi(n,e,t){me.call(this,n??"canceled",me.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(Fi,me,{__CANCEL__:!0});function qx(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new me("Request failed with status code "+t.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function oM(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function cM(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,c;return e=e!==void 0?e:1e3,function(d){const h=Date.now(),m=r[a];c||(c=h),t[i]=d,r[i]=h;let b=a,x=0;for(;b!==i;)x+=t[b++],b=b%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),h-c<e)return;const S=m&&h-m;return S?Math.round(x*1e3/S):void 0}}function uM(n,e){let t=0,r=1e3/e,i,a;const c=(h,m=Date.now())=>{t=m,i=null,a&&(clearTimeout(a),a=null),n.apply(null,h)};return[(...h)=>{const m=Date.now(),b=m-t;b>=r?c(h,m):(i=h,a||(a=setTimeout(()=>{a=null,c(i)},r-b)))},()=>i&&c(i)]}const pc=(n,e,t=3)=>{let r=0;const i=cM(50,250);return uM(a=>{const c=a.loaded,f=a.lengthComputable?a.total:void 0,d=c-r,h=i(d),m=c<=f;r=c;const b={loaded:c,total:f,progress:f?c/f:void 0,bytes:d,rate:h||void 0,estimated:h&&f&&m?(f-c)/h:void 0,event:a,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(b)},t)},D0=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},R0=n=>(...e)=>H.asap(()=>n(...e)),fM=Nt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Nt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Nt.origin),Nt.navigator&&/(msie|trident)/i.test(Nt.navigator.userAgent)):()=>!0,dM=Nt.hasStandardBrowserEnv?{write(n,e,t,r,i,a){const c=[n+"="+encodeURIComponent(e)];H.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),H.isString(r)&&c.push("path="+r),H.isString(i)&&c.push("domain="+i),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hM(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function pM(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Vx(n,e,t){let r=!hM(e);return n&&(r||t==!1)?pM(n,e):e}const j0=n=>n instanceof Ut?{...n}:n;function Rs(n,e){e=e||{};const t={};function r(h,m,b,x){return H.isPlainObject(h)&&H.isPlainObject(m)?H.merge.call({caseless:x},h,m):H.isPlainObject(m)?H.merge({},m):H.isArray(m)?m.slice():m}function i(h,m,b,x){if(H.isUndefined(m)){if(!H.isUndefined(h))return r(void 0,h,b,x)}else return r(h,m,b,x)}function a(h,m){if(!H.isUndefined(m))return r(void 0,m)}function c(h,m){if(H.isUndefined(m)){if(!H.isUndefined(h))return r(void 0,h)}else return r(void 0,m)}function f(h,m,b){if(b in e)return r(h,m);if(b in n)return r(void 0,h)}const d={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:f,headers:(h,m,b)=>i(j0(h),j0(m),b,!0)};return H.forEach(Object.keys(Object.assign({},n,e)),function(m){const b=d[m]||i,x=b(n[m],e[m],m);H.isUndefined(x)&&b!==f||(t[m]=x)}),t}const Px=n=>{const e=Rs({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:c,auth:f}=e;e.headers=c=Ut.from(c),e.url=zx(Vx(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&c.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let d;if(H.isFormData(t)){if(Nt.hasStandardBrowserEnv||Nt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((d=c.getContentType())!==!1){const[h,...m]=d?d.split(";").map(b=>b.trim()).filter(Boolean):[];c.setContentType([h||"multipart/form-data",...m].join("; "))}}if(Nt.hasStandardBrowserEnv&&(r&&H.isFunction(r)&&(r=r(e)),r||r!==!1&&fM(e.url))){const h=i&&a&&dM.read(a);h&&c.set(i,h)}return e},mM=typeof XMLHttpRequest<"u",gM=mM&&function(n){return new Promise(function(t,r){const i=Px(n);let a=i.data;const c=Ut.from(i.headers).normalize();let{responseType:f,onUploadProgress:d,onDownloadProgress:h}=i,m,b,x,S,v;function N(){S&&S(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let C=new XMLHttpRequest;C.open(i.method.toUpperCase(),i.url,!0),C.timeout=i.timeout;function M(){if(!C)return;const q=Ut.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),F={data:!f||f==="text"||f==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:q,config:n,request:C};qx(function(Y){t(Y),N()},function(Y){r(Y),N()},F),C=null}"onloadend"in C?C.onloadend=M:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(M)},C.onabort=function(){C&&(r(new me("Request aborted",me.ECONNABORTED,n,C)),C=null)},C.onerror=function(){r(new me("Network Error",me.ERR_NETWORK,n,C)),C=null},C.ontimeout=function(){let K=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const F=i.transitional||Lx;i.timeoutErrorMessage&&(K=i.timeoutErrorMessage),r(new me(K,F.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,n,C)),C=null},a===void 0&&c.setContentType(null),"setRequestHeader"in C&&H.forEach(c.toJSON(),function(K,F){C.setRequestHeader(F,K)}),H.isUndefined(i.withCredentials)||(C.withCredentials=!!i.withCredentials),f&&f!=="json"&&(C.responseType=i.responseType),h&&([x,v]=pc(h,!0),C.addEventListener("progress",x)),d&&C.upload&&([b,S]=pc(d),C.upload.addEventListener("progress",b),C.upload.addEventListener("loadend",S)),(i.cancelToken||i.signal)&&(m=q=>{C&&(r(!q||q.type?new Fi(null,n,C):q),C.abort(),C=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const _=oM(i.url);if(_&&Nt.protocols.indexOf(_)===-1){r(new me("Unsupported protocol "+_+":",me.ERR_BAD_REQUEST,n));return}C.send(a||null)})},yM=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(h){if(!i){i=!0,f();const m=h instanceof Error?h:this.reason;r.abort(m instanceof me?m:new Fi(m instanceof Error?m.message:m))}};let c=e&&setTimeout(()=>{c=null,a(new me(`timeout ${e} of ms exceeded`,me.ETIMEDOUT))},e);const f=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(a):h.removeEventListener("abort",a)}),n=null)};n.forEach(h=>h.addEventListener("abort",a));const{signal:d}=r;return d.unsubscribe=()=>H.asap(f),d}},bM=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},xM=async function*(n,e){for await(const t of vM(n))yield*bM(t,e)},vM=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},_0=(n,e,t,r)=>{const i=xM(n,e);let a=0,c,f=d=>{c||(c=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:h,value:m}=await i.next();if(h){f(),d.close();return}let b=m.byteLength;if(t){let x=a+=b;t(x)}d.enqueue(new Uint8Array(m))}catch(h){throw f(h),h}},cancel(d){return f(d),i.return()}},{highWaterMark:2})},Uc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ix=Uc&&typeof ReadableStream=="function",SM=Uc&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Fx=(n,...e)=>{try{return!!n(...e)}catch{return!1}},wM=Ix&&Fx(()=>{let n=!1;const e=new Request(Nt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),B0=64*1024,oh=Ix&&Fx(()=>H.isReadableStream(new Response("").body)),mc={stream:oh&&(n=>n.body)};Uc&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!mc[e]&&(mc[e]=H.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new me(`Response type '${e}' is not supported`,me.ERR_NOT_SUPPORT,r)})})})(new Response);const NM=async n=>{if(n==null)return 0;if(H.isBlob(n))return n.size;if(H.isSpecCompliantForm(n))return(await new Request(Nt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(H.isArrayBufferView(n)||H.isArrayBuffer(n))return n.byteLength;if(H.isURLSearchParams(n)&&(n=n+""),H.isString(n))return(await SM(n)).byteLength},CM=async(n,e)=>{const t=H.toFiniteNumber(n.getContentLength());return t??NM(e)},EM=Uc&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:a,timeout:c,onDownloadProgress:f,onUploadProgress:d,responseType:h,headers:m,withCredentials:b="same-origin",fetchOptions:x}=Px(n);h=h?(h+"").toLowerCase():"text";let S=yM([i,a&&a.toAbortSignal()],c),v;const N=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let C;try{if(d&&wM&&t!=="get"&&t!=="head"&&(C=await CM(m,r))!==0){let F=new Request(e,{method:"POST",body:r,duplex:"half"}),Z;if(H.isFormData(r)&&(Z=F.headers.get("content-type"))&&m.setContentType(Z),F.body){const[Y,L]=D0(C,pc(R0(d)));r=_0(F.body,B0,Y,L)}}H.isString(b)||(b=b?"include":"omit");const M="credentials"in Request.prototype;v=new Request(e,{...x,signal:S,method:t.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:M?b:void 0});let _=await fetch(v,x);const q=oh&&(h==="stream"||h==="response");if(oh&&(f||q&&N)){const F={};["status","statusText","headers"].forEach(J=>{F[J]=_[J]});const Z=H.toFiniteNumber(_.headers.get("content-length")),[Y,L]=f&&D0(Z,pc(R0(f),!0))||[];_=new Response(_0(_.body,B0,Y,()=>{L&&L(),N&&N()}),F)}h=h||"text";let K=await mc[H.findKey(mc,h)||"text"](_,n);return!q&&N&&N(),await new Promise((F,Z)=>{qx(F,Z,{data:K,headers:Ut.from(_.headers),status:_.status,statusText:_.statusText,config:n,request:v})})}catch(M){throw N&&N(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,n,v),{cause:M.cause||M}):me.from(M,M&&M.code,n,v)}}),ch={http:qE,xhr:gM,fetch:EM};H.forEach(ch,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const z0=n=>`- ${n}`,MM=n=>H.isFunction(n)||n===null||n===!1,$x={getAdapter:n=>{n=H.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let a=0;a<e;a++){t=n[a];let c;if(r=t,!MM(t)&&(r=ch[(c=String(t)).toLowerCase()],r===void 0))throw new me(`Unknown adapter '${c}'`);if(r)break;i[c||"#"+a]=r}if(!r){const a=Object.entries(i).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=e?a.length>1?`since :
`+a.map(z0).join(`
`):" "+z0(a[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:ch};function kd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Fi(null,n)}function L0(n){return kd(n),n.headers=Ut.from(n.headers),n.data=Td.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),$x.getAdapter(n.adapter||Na.adapter)(n).then(function(r){return kd(n),r.data=Td.call(n,n.transformResponse,r),r.headers=Ut.from(r.headers),r},function(r){return Ux(r)||(kd(n),r&&r.response&&(r.response.data=Td.call(n,n.transformResponse,r.response),r.response.headers=Ut.from(r.response.headers))),Promise.reject(r)})}const Yx="1.10.0",qc={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{qc[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const H0={};qc.transitional=function(e,t,r){function i(a,c){return"[Axios v"+Yx+"] Transitional option '"+a+"'"+c+(r?". "+r:"")}return(a,c,f)=>{if(e===!1)throw new me(i(c," has been removed"+(t?" in "+t:"")),me.ERR_DEPRECATED);return t&&!H0[c]&&(H0[c]=!0,console.warn(i(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,c,f):!0}};qc.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function TM(n,e,t){if(typeof n!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],c=e[a];if(c){const f=n[a],d=f===void 0||c(f,a,n);if(d!==!0)throw new me("option "+a+" must be "+d,me.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new me("Unknown option "+a,me.ERR_BAD_OPTION)}}const oc={assertOptions:TM,validators:qc},On=oc.validators;let Ms=class{constructor(e){this.defaults=e||{},this.interceptors={request:new O0,response:new O0}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Rs(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&oc.assertOptions(r,{silentJSONParsing:On.transitional(On.boolean),forcedJSONParsing:On.transitional(On.boolean),clarifyTimeoutError:On.transitional(On.boolean)},!1),i!=null&&(H.isFunction(i)?t.paramsSerializer={serialize:i}:oc.assertOptions(i,{encode:On.function,serialize:On.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),oc.assertOptions(t,{baseUrl:On.spelling("baseURL"),withXsrfToken:On.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=a&&H.merge(a.common,a[t.method]);a&&H.forEach(["delete","get","head","post","put","patch","common"],v=>{delete a[v]}),t.headers=Ut.concat(c,a);const f=[];let d=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(t)===!1||(d=d&&N.synchronous,f.unshift(N.fulfilled,N.rejected))});const h=[];this.interceptors.response.forEach(function(N){h.push(N.fulfilled,N.rejected)});let m,b=0,x;if(!d){const v=[L0.bind(this),void 0];for(v.unshift.apply(v,f),v.push.apply(v,h),x=v.length,m=Promise.resolve(t);b<x;)m=m.then(v[b++],v[b++]);return m}x=f.length;let S=t;for(b=0;b<x;){const v=f[b++],N=f[b++];try{S=v(S)}catch(C){N.call(this,C);break}}try{m=L0.call(this,S)}catch(v){return Promise.reject(v)}for(b=0,x=h.length;b<x;)m=m.then(h[b++],h[b++]);return m}getUri(e){e=Rs(this.defaults,e);const t=Vx(e.baseURL,e.url,e.allowAbsoluteUrls);return zx(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){Ms.prototype[e]=function(t,r){return this.request(Rs(r||{},{method:e,url:t,data:(r||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(r){return function(a,c,f){return this.request(Rs(f||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}Ms.prototype[e]=t(),Ms.prototype[e+"Form"]=t(!0)});let kM=class Gx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const c=new Promise(f=>{r.subscribe(f),a=f}).then(i);return c.cancel=function(){r.unsubscribe(a)},c},e(function(a,c,f){r.reason||(r.reason=new Fi(a,c,f),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Gx(function(i){e=i}),cancel:e}}};function OM(n){return function(t){return n.apply(null,t)}}function AM(n){return H.isObject(n)&&n.isAxiosError===!0}const uh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uh).forEach(([n,e])=>{uh[e]=n});function Kx(n){const e=new Ms(n),t=Cx(Ms.prototype.request,e);return H.extend(t,Ms.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Kx(Rs(n,i))},t}const Ue=Kx(Na);Ue.Axios=Ms;Ue.CanceledError=Fi;Ue.CancelToken=kM;Ue.isCancel=Ux;Ue.VERSION=Yx;Ue.toFormData=Hc;Ue.AxiosError=me;Ue.Cancel=Ue.CanceledError;Ue.all=function(e){return Promise.all(e)};Ue.spread=OM;Ue.isAxiosError=AM;Ue.mergeConfig=Rs;Ue.AxiosHeaders=Ut;Ue.formToJSON=n=>Hx(H.isHTMLForm(n)?new FormData(n):n);Ue.getAdapter=$x.getAdapter;Ue.HttpStatusCode=uh;Ue.default=Ue;const{Axios:F4,AxiosError:$4,CanceledError:Y4,isCancel:G4,CancelToken:K4,VERSION:J4,all:X4,Cancel:Q4,isAxiosError:W4,spread:Z4,toFormData:e_,AxiosHeaders:t_,HttpStatusCode:n_,formToJSON:r_,getAdapter:s_,mergeConfig:i_}=Ue,oa=Ue.create({baseURL:"http://localhost:3000/api",withCredentials:!0});oa.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n});let Fo=JSON.parse(localStorage.getItem("mockAnnouncements")||"[]"),Od=JSON.parse(localStorage.getItem("mockChatRooms")||"[]"),Kl=JSON.parse(localStorage.getItem("mockMessages")||"{}"),Jl=JSON.parse(localStorage.getItem("mockDirectMessages")||"{}");const DM={post:async(n,e)=>$o(n,e),get:async n=>$o(n),patch:async(n,e)=>$o(n,e),delete:async n=>$o(n)};function $o(n,e={}){switch(n){case"/auth/login":if(["faculty@example.com","learner@example.com","admin@example.com"].includes(e.email)&&e.password==="password"){const t=e.email.includes("faculty")?"faculty":e.email.includes("learner")?"learner":"admin";return Promise.resolve({data:{token:"mock-token",user:{id:1,name:"Mock User",role:t}}})}else return Promise.reject({response:{data:{error:"Invalid mock credentials"}}});case"/auth/me":return Promise.resolve({data:{id:1,name:"Mock User",role:localStorage.getItem("userRole")||"learner"}});case"/announcements":if(e&&e.title){const t={id:Date.now(),title:e.title,body:e.body||"No content available.",audience:e.audience||"all",authorId:e.authorId||"mock-author",createdAt:new Date().toISOString()};return Fo.push(t),localStorage.setItem("mockAnnouncements",JSON.stringify(Fo)),Promise.resolve({data:t})}else{const t=localStorage.getItem("mockAnnouncements");return t&&(Fo=JSON.parse(t)),Promise.resolve({data:Fo})}case"/chat/rooms":if(e&&e.name){const t={_id:Date.now().toString(),name:e.name,description:e.description||"",access:e.access||["shared"],createdBy:e.createdBy||"mock-user"};return Od.push(t),localStorage.setItem("mockChatRooms",JSON.stringify(Od)),Promise.resolve({data:t})}else return Promise.resolve({data:Od});default:if(n.startsWith("/chat/rooms/")&&n.endsWith("/messages")){const t=n.split("/")[2],r=Kl[t]||[];return Promise.resolve({data:r})}if(n.startsWith("/chat/rooms/")&&n.endsWith("/messages")&&e.text){const t=n.split("/")[2],r={_id:Date.now().toString(),senderId:e.senderId,senderName:e.senderName,text:e.text,timestamp:new Date().toISOString()};return Kl[t]||(Kl[t]=[]),Kl[t].push(r),localStorage.setItem("mockMessages",JSON.stringify(Kl)),Promise.resolve({data:r})}if(n.startsWith("/dm/messages/")){const t=n.split("/").pop(),r=Jl[t]||[];return Promise.resolve({data:r})}if(n==="/dm/messages"&&e.content){const{roomId:t,senderId:r,content:i}=e,a={id:Date.now(),roomId:t,senderId:r,content:i,timestamp:new Date().toISOString()};return Jl[t]||(Jl[t]=[]),Jl[t].push(a),localStorage.setItem("mockDirectMessages",JSON.stringify(Jl)),Promise.resolve({data:a})}return Promise.resolve({data:{}})}}const Kr=DM;function RM(){const[n,e]=T.useState(""),[t,r]=T.useState(""),[i,a]=T.useState(0),[c,f]=T.useState(0),[d,h]=T.useState([]),[m,b]=T.useState(""),x=Us(),S={admin:"/faculty/dashboard",faculty:"/faculty/dashboard",educator:"/faculty/dashboard",announcer:"/faculty/dashboard",contentHead:"/faculty/dashboard",learner:"/dashboard"},v=async M=>{M.preventDefault(),b("");try{const _=await Kr.post("/auth/login",{email:n,password:t}),{token:q,user:K}=_.data;localStorage.setItem("token",q),localStorage.setItem("userRole",K.role),oa.defaults?.headers?.common&&(oa.defaults.headers.common.Authorization=`Bearer ${q}`);const F=S[K.role]||"/unauthorized";x(F)}catch(_){b(_.response?.data?.error||"Login failed")}};T.useEffect(()=>{const M=setInterval(()=>{const _=Date.now(),q={id:_,left:Math.random()*90,bottom:-20,size:48+Math.random()*24,duration:Math.max(3,10-i*.3)};h(K=>[...K.slice(-10),q]),setTimeout(()=>{h(K=>K.filter(F=>F.id!==_))},q.duration*1e3)},Math.max(800,2e3-i*100));return()=>clearInterval(M)},[i]);const N=M=>{a(_=>_+1),h(_=>_.filter(q=>q.id!==M))},C=M=>{M.target.dataset.butterfly!=="true"&&i>0&&(f(_=>Math.max(_,i)),a(0))};return y.jsxs("div",{onClick:C,className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-400 via-rose-300 to-pink-400 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none overflow-hidden",children:d.map(M=>y.jsx("div",{"data-butterfly":"true",onClick:_=>{_.stopPropagation(),N(M.id)},className:"absolute pointer-events-auto animate-float",style:{left:`${M.left}%`,bottom:`${M.bottom}px`,animationDuration:`${M.duration}s`},children:y.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:`${M.size}px`,opacity:.5,mixBlendMode:"multiply"},children:[y.jsx("path",{d:"M50 50 C30 20, 10 40, 30 60",fill:"#be185d",stroke:"#9d174d",strokeWidth:"1"}),y.jsx("path",{d:"M50 50 C25 60, 25 80, 40 70",fill:"#9f1239",stroke:"#9d174d",strokeWidth:"1"}),y.jsx("path",{d:"M50 50 C70 20, 90 40, 70 60",fill:"#2563eb",stroke:"#1d4ed8",strokeWidth:"1"}),y.jsx("path",{d:"M50 50 C75 60, 75 80, 60 70",fill:"#1e40af",stroke:"#1d4ed8",strokeWidth:"1"}),y.jsx("rect",{x:"48.5",y:"45",width:"3",height:"10",rx:"1.5",fill:"#1f2937"}),y.jsx("line",{x1:"50",y1:"45",x2:"47",y2:"40",stroke:"#1f2937",strokeWidth:"1"}),y.jsx("line",{x1:"50",y1:"45",x2:"53",y2:"40",stroke:"#1f2937",strokeWidth:"1"}),y.jsx("circle",{cx:"49",cy:"47",r:"0.6",fill:"#fff"}),y.jsx("circle",{cx:"51",cy:"47",r:"0.6",fill:"#fff"})]})},M.id))}),y.jsxs("div",{className:"relative z-10 bg-white/80 backdrop-blur-md p-8 rounded-xl shadow-lg w-full max-w-md",children:[y.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Login to Your Account"}),y.jsxs("form",{onSubmit:v,className:"space-y-4",children:[y.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:M=>e(M.target.value),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300"}),y.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:M=>r(M.target.value),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300"}),m&&y.jsx("p",{className:"text-red-500 text-sm",children:m}),y.jsx("button",{type:"submit",className:"w-full bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600 transition",children:"Login"})]}),y.jsxs("div",{className:"mt-6 text-sm text-gray-700 bg-white/60 p-4 rounded-lg shadow-inner",children:[y.jsx("p",{className:"font-semibold mb-2",children:"🧪 Offline Mode Logins:"}),y.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Faculty:"})," ",y.jsx("code",{children:"faculty@example.com"})," / ",y.jsx("code",{children:"password"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Learner:"})," ",y.jsx("code",{children:"learner@example.com"})," / ",y.jsx("code",{children:"password"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Admin:"})," ",y.jsx("code",{children:"admin@example.com"})," / ",y.jsx("code",{children:"password"})]})]})]}),y.jsxs("div",{className:"mt-4 text-center text-sm text-gray-700 space-y-1",children:[y.jsxs("p",{children:["🦋 Score: ",y.jsx("span",{className:"font-bold",children:i})]}),y.jsxs("p",{children:["🏆 High Score: ",y.jsx("span",{className:"font-bold",children:c})]})]})]}),y.jsx("style",{children:`
        @keyframes float {
          0% { transform: translateY(0) rotate(0deg); opacity: 0; }
          10% { opacity: 1; }
          100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
        }
        .animate-float {
          animation-name: float;
          animation-timing-function: ease-in-out;
          animation-iteration-count: 1;
        }
      `})]})}function jM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const _M=T.forwardRef(jM);function BM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Jx=T.forwardRef(BM);function zM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const LM=T.forwardRef(zM);function HM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const UM=T.forwardRef(HM);function qM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const VM=T.forwardRef(qM);function PM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const IM=T.forwardRef(PM);function FM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $M=T.forwardRef(FM);function YM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Xx=T.forwardRef(YM);function GM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Qx=T.forwardRef(GM);function KM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Wx=T.forwardRef(KM);function JM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const XM=T.forwardRef(JM);function Zx(n,e=5e3){const[t,r]=T.useState(0);return T.useEffect(()=>{const i=setInterval(()=>{r(a=>(a+1)%n)},e);return()=>clearInterval(i)},[n,e]),[t,r]}function Ph({children:n}){const e=T.useMemo(()=>[...Array(8)].flatMap((t,r)=>[0,1].map(a=>{const c=r*12.5+Math.random()*2.5,f=a===0?5:25,d=Math.random()*10+f,h=Math.random()*360,m=Math.random()*20+20,b=Math.random()*2;return{top:d,left:c,rotation:h,size:m,delay:b,key:`${r}-${a}`}})),[]);return y.jsxs("div",{className:"relative bg-gradient-to-br from-sky-400 via-rose-300 to-pink-400 rounded-xl p-6 min-h-[220px] mb-8 shadow-lg text-white overflow-hidden",children:[e.map(({top:t,left:r,rotation:i,size:a,delay:c,key:f})=>y.jsx("div",{className:"absolute pointer-events-none",style:{top:`${t}px`,left:`${r}%`,transform:`rotate(${i}deg)`},children:y.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"animate-float glow-butterfly",style:{width:`${a}px`,opacity:.35,mixBlendMode:"screen",animationDelay:`${c}s`},children:[y.jsx("path",{d:"M50 50 C30 20, 10 40, 30 60",fill:"#fbb6ce",stroke:"#f472b6",strokeWidth:"1"}),y.jsx("path",{d:"M50 50 C25 60, 25 80, 40 70",fill:"#fcd5ce",stroke:"#f472b6",strokeWidth:"1"}),y.jsx("path",{d:"M50 50 C70 20, 90 40, 70 60",fill:"#a0d8ef",stroke:"#60a5fa",strokeWidth:"1"}),y.jsx("path",{d:"M50 50 C75 60, 75 80, 60 70",fill:"#cce5ff",stroke:"#60a5fa",strokeWidth:"1"}),y.jsx("rect",{x:"48.5",y:"45",width:"3",height:"10",rx:"1.5",fill:"#444"}),y.jsx("line",{x1:"50",y1:"45",x2:"47",y2:"40",stroke:"#444",strokeWidth:"1"}),y.jsx("line",{x1:"50",y1:"45",x2:"53",y2:"40",stroke:"#444",strokeWidth:"1"}),y.jsx("circle",{cx:"49",cy:"47",r:"0.6",fill:"#fff"}),y.jsx("circle",{cx:"51",cy:"47",r:"0.6",fill:"#fff"})]})},f)),n]})}function QM({name:n="WhoWho",title:e="Mr."}){const t=Us(),r=["Reminders","Announcements","Timetable"],[i,a]=Zx(r.length),c={Reminders:["🗓️ Staff meeting – Friday @ 14:00","📥 Submit term marks by Thursday","📌 Grade 12 mock review due next week"],Announcements:["📢 Exam schedule released","📢 Grade 9 trip confirmed","📢 New library hours posted"],Timetable:["🕒 08:00 – Grade 10 Math","🕒 09:30 – Grade 11 Physics","🕒 11:00 – Grade 9 Life Sciences"]},f=()=>{r[i]==="Timetable"?t("/timetable"):t("/notifications")};return y.jsx(Ph,{children:y.jsx("div",{className:"min-h-[360px] flex flex-col justify-center items-center text-white px-4",children:y.jsxs("div",{className:"w-full max-w-7xl",children:[y.jsxs("h1",{className:"text-4xl font-bold mb-2",children:["Welcome Back, ",e," ",n]}),y.jsx("p",{className:"text-white/90 mb-6 text-base",children:"Here’s what’s happening in your school day today:"}),y.jsxs("div",{className:"backdrop-blur-md bg-white/30 rounded-xl p-6 w-full shadow-inner flex flex-col justify-between text-left",children:[y.jsx("div",{className:"space-y-3",children:c[r[i]].map((d,h)=>y.jsx("div",{onClick:f,className:"bg-white/60 p-3 rounded cursor-pointer hover:bg-white/80 transition",children:y.jsx("p",{className:"text-sm text-gray-800",children:d})},h))}),y.jsx("div",{className:"flex justify-start mt-4 space-x-4",children:r.map((d,h)=>y.jsx("button",{onClick:()=>a(h),className:`text-xs font-medium px-3 py-1 rounded-full transition ${h===i?"bg-white/80 text-gray-800":"text-white/70 hover:text-white"}`,children:d},d))})]})]})})})}function WM({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const ZM=T.forwardRef(WM);function eT({activeTab:n,setActiveTab:e,role:t}){const r=[{key:"dashboard",label:"Dashboard"},{key:"announcements",label:"Announcements",roles:["admin","announcer"]},{key:"manage-learners",label:"Manage Learners",roles:["admin","onboarder"]},{key:"manage-lessons",label:"Manage Lessons",roles:["admin","contentHead"]},{key:"manage-faculty",label:"Manage Faculty",roles:["admin"]},{key:"manage-lms",label:"Manage LMS",roles:["admin"]}];return y.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:r.map(i=>{const a=!i.roles||i.roles.includes(t),c=n===i.key;return y.jsxs("button",{onClick:()=>a&&e(i.key),disabled:!a,className:`group relative px-4 py-1.5 rounded-full text-sm font-medium transition shadow-sm flex items-center gap-1
              ${a?c?"bg-indigo-600 text-white":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[!a&&y.jsx(ZM,{className:"w-4 h-4 text-gray-400"}),i.label,!a&&i.roles&&y.jsxs("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap",children:["Restricted to: ",i.roles.join(", ")]})]},i.key)})})}function tT(){const n=[{label:"Learner Rating",value:"4.6 / 5",icon:"⭐",description:"Based on 87 learner reviews this term."},{label:"Hours Taught",value:"18 hrs",icon:"⏱️",description:"Total classroom hours this week."},{label:"Homework Graded",value:"42",icon:"📝",description:"Assignments reviewed this week."},{label:"Engagement Score",value:"91%",icon:"📈",description:"Calculated from feedback, attendance, and activity."}],e=["“Explains concepts clearly and makes class fun!”","“Would love more visual examples in lessons.”","“Very supportive and always available for questions.”"];return y.jsxs("div",{className:"bg-white rounded-xl shadow p-8 mt-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Overview"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:n.map((t,r)=>y.jsxs("div",{className:"bg-indigo-50 rounded-lg p-6 shadow-sm hover:shadow-md transition",children:[y.jsx("div",{className:"text-3xl mb-2",children:t.icon}),y.jsx("div",{className:"text-2xl font-bold text-indigo-700",children:t.value}),y.jsx("div",{className:"text-sm font-medium text-gray-700 mt-1",children:t.label}),y.jsx("p",{className:"text-xs text-gray-500 mt-2",children:t.description})]},r))}),y.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 shadow-inner",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Recent Learner Feedback"}),y.jsx("ul",{className:"space-y-3 text-sm text-gray-600",children:e.map((t,r)=>y.jsxs("li",{className:"border-l-4 border-indigo-400 pl-4 italic",children:["“",t,"”"]},r))})]})]})}function Yo({label:n,icon:e}){return y.jsxs("button",{className:"bg-indigo-50 hover:bg-indigo-100 text-indigo-700 font-medium p-4 rounded-lg flex items-center justify-center gap-2 transition shadow-sm",children:[y.jsx("span",{className:"text-lg",children:e}),y.jsx("span",{children:n})]})}function Ad({title:n,value:e,icon:t,color:r}){return y.jsxs("div",{className:`rounded-lg p-4 shadow-sm flex items-center gap-4 ${r}`,children:[y.jsx("div",{className:"p-2 bg-white rounded-full shadow",children:t}),y.jsxs("div",{children:[y.jsx("div",{className:"text-sm font-semibold text-gray-800",children:n}),y.jsx("div",{className:"text-base font-bold",children:e})]})]})}function Dd({title:n,value:e}){return y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner",children:[y.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:n}),y.jsx("div",{className:"text-indigo-600 font-bold",children:e})]})}console.log("🧪 AnnouncementDebugWidget version: v1.0.4");console.log("📦 AnnouncementDebugWidget file loaded");function nT({role:n}){const[e,t]=T.useState([]),[r,i]=T.useState(!0),[a,c]=T.useState("");return console.log("✅ AnnouncementDebugWidget mounted"),console.log("🧪 role prop received:",n),T.useEffect(()=>{console.log("🧪 useEffect triggered inside AnnouncementDebugWidget"),console.log("🚀 axiosInstance loaded, making request..."),Kr.get("/announcements").then(f=>{console.log("📣 Fetched announcements:",f.data),t(f.data),i(!1)}).catch(f=>{const d=f.response?.data?.message||f.message;console.error("❌ Error fetching announcements:",d),c(d),i(!1)})},[]),y.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-2",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"📣 Announcements"}),r&&y.jsx("p",{className:"text-gray-500",children:"⏳ Loading announcements..."}),a&&y.jsxs("p",{className:"text-red-600",children:["❌ ",a]}),!r&&!a&&e.length===0&&y.jsx("p",{className:"text-gray-600",children:"📭 No announcements available."}),!r&&!a&&e.length>0&&y.jsx("ul",{className:"space-y-2",children:e.map(f=>y.jsxs("li",{className:"border rounded p-2",children:[y.jsx("p",{className:"font-semibold text-gray-800",children:f.title}),y.jsx("p",{className:"text-sm text-gray-600",children:f.message}),y.jsxs("p",{className:"text-xs text-gray-400",children:["Posted: ",new Date(f.createdAt).toLocaleString()]})]},f.id))})]})}function rT(){const n=localStorage.getItem("userRole")||"";return console.log("🧪 role from localStorage:",n||"[empty or undefined]"),T.useEffect(()=>{console.log("✅ DashboardTab mounted")},[]),y.jsxs("div",{className:"space-y-10",children:[y.jsxs(tT,{children:[y.jsxs("section",{className:"mt-8",children:[y.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-2",children:"Learner Insights"}),y.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[y.jsx("li",{children:"📈 82% of learners completed their homework this week"}),y.jsx("li",{children:"🕒 Average learner study time: 6.2 hrs this week"}),y.jsx("li",{children:"📝 68 of 100 assignments graded"})]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-2",children:"Quick Actions"}),y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[y.jsx(Yo,{label:"Post Announcement",icon:"📢"}),y.jsx(Yo,{label:"Grade Assignments",icon:"📝"}),y.jsx(Yo,{label:"View Class Performance",icon:"📊"}),y.jsx(Yo,{label:"Manage Class Groups",icon:"👥"})]})]}),y.jsxs("section",{className:"mt-10",children:[console.log("🧪 AnnouncementDebugWidget JSX rendered"),y.jsx(nT,{role:n}),y.jsx("p",{className:"text-green-600 font-bold",children:"✅ AnnouncementDebugWidget is mounted"})]})]}),y.jsxs("section",{className:"bg-white rounded-xl shadow p-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Learner Insights"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-700",children:[y.jsx(Ad,{title:"Study Time (This Week)",value:"6.2 hrs avg",icon:y.jsx(VM,{className:"w-5 h-5 text-indigo-500"}),color:"bg-indigo-100"}),y.jsx(Ad,{title:"Homework Completion",value:"82%",icon:y.jsx(UM,{className:"w-5 h-5 text-green-500"}),color:"bg-green-100"}),y.jsx(Ad,{title:"Assignments Graded",value:"68 / 100",icon:y.jsx(LM,{className:"w-5 h-5 text-purple-500"}),color:"bg-purple-100"})]})]}),y.jsxs("section",{className:"bg-white rounded-xl shadow p-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Performance Trends"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[y.jsx(Dd,{title:"Teaching Hours",value:"↑ 12% this week"}),y.jsx(Dd,{title:"Learner Rating",value:"↔ 4.6 / 5"}),y.jsx(Dd,{title:"Assignments Graded",value:"↓ 8% this week"})]})]})]})}const sT="_form_1lv76_1",iT="_heading_1lv76_15",lT="_input_1lv76_25",aT="_textarea_1lv76_27",oT="_select_1lv76_29",cT="_button_1lv76_53",uT="_error_1lv76_81",fT="_success_1lv76_91",_r={form:sT,heading:iT,input:lT,textarea:aT,select:oT,button:cT,error:uT,success:fT};function dT({user:n,onCreated:e}){const[t,r]=T.useState(""),[i,a]=T.useState(""),[c,f]=T.useState("all"),[d,h]=T.useState(!1),[m,b]=T.useState({success:"",error:""}),x=["admin","faculty"].includes(n.role),S=async v=>{v.preventDefault(),h(!0),b({success:"",error:""});const N={title:t,body:i,audience:c,authorId:n._id};try{const M=(await Kr.post("/announcements",N)).data;e&&M?.title&&e(M),r(""),a(""),f("all"),b({success:"✅ Announcement posted!",error:""})}catch(C){console.error("Failed to create announcement:",C),b({error:C.response?.data?.message||"❌ Failed to post announcement",success:""})}finally{h(!1)}};return x?y.jsxs("form",{onSubmit:S,className:_r.form,children:[y.jsx("h3",{className:_r.heading,children:"📢 Create Announcement"}),y.jsx("input",{type:"text",placeholder:"Title",value:t,onChange:v=>r(v.target.value),required:!0,className:_r.input}),y.jsx("textarea",{placeholder:"Write your announcement...",value:i,onChange:v=>a(v.target.value),required:!0,className:_r.textarea}),y.jsxs("select",{value:c,onChange:v=>f(v.target.value),className:_r.select,children:[y.jsx("option",{value:"all",children:"All"}),y.jsx("option",{value:"faculty",children:"Faculty"}),y.jsx("option",{value:"learners",children:"Learners"})]}),y.jsx("button",{type:"submit",disabled:d,className:_r.button,children:d?"Posting...":"Post Announcement"}),m.error&&y.jsx("p",{className:_r.error,children:m.error}),m.success&&y.jsx("p",{className:_r.success,children:m.success})]}):null}const hT="_card_1mrik_1",pT="_title_1mrik_17",mT="_body_1mrik_29",gT="_meta_1mrik_37",Go={card:hT,title:pT,body:mT,meta:gT};function yT({data:n}){if(!n)return null;const{title:e="Untitled",body:t="No content available.",audience:r="all",createdAt:i}=n;return y.jsxs("div",{className:Go.card,children:[y.jsx("h4",{className:Go.title,children:e}),y.jsx("p",{className:Go.body,children:t}),y.jsxs("div",{className:Go.meta,children:[y.jsxs("span",{children:["Audience: ",r]}),y.jsx("span",{children:i?new Date(i).toLocaleString():"Unknown date"})]})]})}function gc(n){const e=new Date(n);return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function bT(n){const e=gc(new Date),t=gc(n),r=(e-t)/(1e3*60*60*24);return r===0?"Today":r===1?"Yesterday":t.toLocaleDateString("en-ZA")}function xT(n){const e={};return n.forEach(t=>{if(!t.createdAt)return;const r=bT(new Date(t.createdAt));e[r]||(e[r]=[]),e[r].push(t)}),e}function vT({announcements:n}){if(!n||n.length===0)return y.jsx("p",{children:"No announcements available."});const e=xT(n),t=Object.keys(e).sort((r,i)=>{const a=gc(e[r][0].createdAt);return gc(e[i][0].createdAt)-a});return y.jsx("div",{children:t.map(r=>{const i=e[r];return console.log(`📢 Announcements for "${r}":`,i.map(a=>a._id)),y.jsxs("section",{style:{marginBottom:"2rem"},children:[y.jsx("h4",{style:{marginBottom:"0.5rem"},children:r}),i.map((a,c)=>y.jsx(yT,{data:a},a._id||`${r}-${c}`))]},r)})})}const ST="_container_c2rn0_1",wT="_header_c2rn0_11",NT="_createButton_c2rn0_37",CT="_roomList_c2rn0_67",ET="_roomItem_c2rn0_81",MT="_avatar_c2rn0_113",TT="_roomContent_c2rn0_141",kT="_roomName_c2rn0_149",OT="_roomDescription_c2rn0_161",lt={container:ST,header:wT,createButton:NT,roomList:CT,roomItem:ET,avatar:MT,roomContent:TT,roomName:kT,roomDescription:OT},AT="_form_pgbl7_1",DT="_error_pgbl7_69",RT="_spinner_pgbl7_83",Rd={form:AT,error:DT,spinner:RT};function jT({user:n,onCreated:e}){const[t,r]=T.useState(""),[i,a]=T.useState(""),[c,f]=T.useState(["shared"]),[d,h]=T.useState(""),[m,b]=T.useState(!1),x=async v=>{v.preventDefault(),h(""),b(!0);const N={name:t,description:i,access:c,createdBy:n?._id||"offline-user"};{const C={_id:Date.now().toString(),...N},M=localStorage.getItem("mockRooms"),_=M?JSON.parse(M).concat(C):[C];localStorage.setItem("mockRooms",JSON.stringify(_)),e?.(C),S(),b(!1);return}},S=()=>{r(""),a(""),f(["shared"])};return y.jsxs("form",{className:Rd.form,onSubmit:x,children:[y.jsx("h3",{children:"Create New Group"}),d&&y.jsx("p",{className:Rd.error,children:d}),y.jsx("input",{type:"text",placeholder:"Room name",value:t,onChange:v=>r(v.target.value),required:!0,disabled:m}),y.jsx("textarea",{placeholder:"Description",value:i,onChange:v=>a(v.target.value),required:!0,disabled:m}),y.jsxs("label",{children:["Access:",y.jsxs("select",{value:c[0],onChange:v=>f([v.target.value]),disabled:m,children:[y.jsx("option",{value:"shared",children:"Shared"}),y.jsx("option",{value:"faculty",children:"Faculty Only"}),y.jsx("option",{value:"learner",children:"Learner Only"})]})]}),y.jsx("button",{type:"submit",disabled:m,children:m?y.jsx("span",{className:Rd.spinner,"aria-label":"Loading"}):"Create"})]})}const e1=T.createContext(),Ko={_id:"u1",name:"Admin Bongani",email:"admin@school.edu",role:"admin"},_T=({children:n})=>{const[e,t]=T.useState(Ko);T.useEffect(()=>{},[]);const r=async(a,c)=>{{console.warn("🧪 Offline mode: simulating login."),localStorage.setItem("token","mock-token"),localStorage.setItem("userRole",Ko.role),t(Ko);return}},i=()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole"),oa.defaults?.headers?.common&&delete oa.defaults.headers.common.Authorization,t(Ko)};return y.jsx(e1.Provider,{value:{user:e,setUser:t,login:r,logout:i},children:n})},BT=()=>T.useContext(e1),zT=[{_id:"r1",name:"Math Department",description:"Discuss curriculum updates"}];function t1({onSelect:n}){const{user:e}=BT(),[t,r]=T.useState([]),[i,a]=T.useState(!0),[c,f]=T.useState(!1),d=async()=>{{const m=localStorage.getItem("mockRooms");r(m?JSON.parse(m):zT),a(!1);return}};T.useEffect(()=>{d()},[]);const h=m=>{const b=[...t,m];r(b),f(!1),localStorage.setItem("mockRooms",JSON.stringify(b))};return y.jsxs("div",{className:lt.container,children:[y.jsx("div",{className:lt.header,children:y.jsx("button",{className:lt.createButton,onClick:()=>f(!c),children:c?"Cancel":"➕ Create Group"})}),c&&e&&y.jsx(jT,{user:e,onCreated:h}),i?y.jsx("p",{children:"Loading rooms..."}):t.length===0?y.jsx("p",{className:lt.empty,children:"No rooms available. Create one to get started!"}):y.jsx("ul",{className:lt.roomList,children:t.map(m=>y.jsxs("li",{className:lt.roomItem,onClick:()=>n(m),children:[y.jsx("div",{className:lt.avatar,children:m.name.charAt(0).toUpperCase()}),y.jsxs("div",{className:lt.roomContent,children:[y.jsx("div",{className:lt.roomName,children:m.name}),y.jsx("div",{className:lt.roomDescription,children:m.description||"No description"})]})]},m._id))})]})}const LT="_container_1ds09_1",HT="_header_1ds09_13",UT="_backButton_1ds09_27",qT="_messages_1ds09_41",VT="_message_1ds09_41",PT="_self_1ds09_71",IT="_other_1ds09_81",FT="_sender_1ds09_91",$T="_text_1ds09_101",YT="_inputBar_1ds09_109",GT="_input_1ds09_109",KT="_sendButton_1ds09_135",fn={container:LT,header:HT,backButton:UT,messages:qT,message:VT,self:PT,other:IT,sender:FT,text:$T,inputBar:YT,input:GT,sendButton:KT};function n1({room:n,user:e,onBack:t}){const[r,i]=T.useState([]),[a,c]=T.useState(""),[f,d]=T.useState(!0),h=async()=>{try{const b=await Kr.get(`/chat/rooms/${n._id}/messages`);i(b.data)}catch(b){console.error("❌ Failed to fetch messages:",b)}finally{d(!1)}},m=async()=>{if(a.trim())try{const b=await Kr.post(`/chat/rooms/${n._id}/messages`,{senderId:e._id,senderName:e.name,text:a});i(x=>[...x,b.data]),c("")}catch(b){console.error("❌ Failed to send message:",b)}};return T.useEffect(()=>{h()},[n._id]),y.jsxs("div",{className:fn.container,children:[y.jsxs("div",{className:fn.header,children:[y.jsx("button",{onClick:t,className:fn.backButton,children:"← Back"}),y.jsx("h3",{children:n.name})]}),y.jsx("div",{className:fn.messages,children:f?y.jsx("p",{children:"Loading messages..."}):r.map(b=>y.jsxs("div",{className:`${fn.message} ${b.senderId===e._id?fn.self:fn.other}`,children:[y.jsx("div",{className:fn.sender,children:b.senderName}),y.jsx("div",{className:fn.text,children:b.text})]},b._id))}),y.jsxs("div",{className:fn.inputBar,children:[y.jsx("input",{type:"text",value:a,onChange:b=>c(b.target.value),placeholder:"Type a message...",className:fn.input}),y.jsx("button",{onClick:m,className:fn.sendButton,children:"Send"})]})]})}const JT=[{id:"dm1",name:"Thabo M.",avatar:"/avatars/thabo.png",lastMessage:"See you at 10am!",timestamp:"08:45"},{id:"dm2",name:"Zanele K.",avatar:"/avatars/zanele.png",lastMessage:"Got the notes, thanks 🙌",timestamp:"Yesterday"},{id:"dm3",name:"Mr. Dlamini",avatar:"/avatars/dlamini.png",lastMessage:"Assignment feedback uploaded.",timestamp:"Mon"}];function XT({onSelect:n}){return y.jsx("div",{className:lt.container,children:y.jsx("ul",{className:lt.roomList,children:JT.map(e=>y.jsxs("li",{className:lt.roomItem,onClick:()=>n(e.id),children:[y.jsx("img",{src:e.avatar,alt:e.name,className:lt.avatar}),y.jsxs("div",{className:lt.roomContent,children:[y.jsx("div",{className:lt.roomName,children:e.name}),y.jsx("div",{className:lt.roomDescription,children:e.lastMessage})]}),y.jsx("div",{className:lt.timestamp,children:e.timestamp})]},e.id))})})}const QT="_container_1yhjo_1",WT="_messages_1yhjo_15",ZT="_bubble_1yhjo_33",ek="_incoming_1yhjo_47",tk="_outgoing_1yhjo_57",nk="_text_1yhjo_67",rk="_timestamp_1yhjo_75",sk="_inputBar_1yhjo_89",Zn={container:QT,messages:WT,bubble:ZT,incoming:ek,outgoing:tk,text:nk,timestamp:rk,inputBar:sk};function ik({roomId:n,currentUserId:e}){const[t,r]=T.useState([]),[i,a]=T.useState(""),[c,f]=T.useState(!0);T.useEffect(()=>{async function h(){try{const m=await Kr.get(`/dm/messages/${n}`);r(m.data)}catch(m){console.error("Failed to fetch messages:",m)}finally{f(!1)}}h()},[n]);async function d(){if(!i.trim())return;const h={roomId:n,senderId:e,content:i};try{const m=await Kr.post("/dm/messages",h);r(b=>[...b,m.data]),a("")}catch(m){console.error("Failed to send message:",m)}}return c?y.jsx("div",{className:Zn.loading,children:"Loading conversation..."}):y.jsxs("div",{className:Zn.container,children:[y.jsx("div",{className:Zn.messages,children:t.map((h,m)=>y.jsxs("div",{className:`${Zn.bubble} ${h.senderId===e?Zn.outgoing:Zn.incoming}`,children:[y.jsx("div",{className:Zn.text,children:h.content}),y.jsx("div",{className:Zn.timestamp,children:lk(h.timestamp)})]},m))}),y.jsxs("div",{className:Zn.inputBar,children:[y.jsx("input",{type:"text",value:i,onChange:h=>a(h.target.value),placeholder:"Type a message..."}),y.jsx("button",{onClick:d,children:"Send"})]}),y.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"🧪 Offline mode: messages are stored locally and won’t sync across devices."})]})}function lk(n){return new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}const ak="_tabContainer_1s4o0_1",ok="_tabButton_1s4o0_25",ck="_active_1s4o0_67",uk="_icon_1s4o0_77",Jo={tabContainer:ak,tabButton:ok,active:ck,icon:uk};function fk({activeTab:n,onTabChange:e,tabs:t}){return y.jsx("div",{className:Jo.tabContainer,children:t.map(r=>y.jsxs("button",{onClick:()=>e(r.key),className:`${Jo.tabButton} ${n===r.key?Jo.active:""}`,children:[y.jsx("span",{className:Jo.icon,children:r.icon}),y.jsx("span",{children:r.label})]},r.key))})}const dk="_container_e64ya_3",hk="_header_e64ya_95",pk="_title_e64ya_109",mk="_button_e64ya_121",gk="_section_e64ya_151",yk="_subTabBar_e64ya_161",bk="_subTab_e64ya_161",xk="_active_e64ya_83",vk="_chatHeader_e64ya_217",Sk="_backButton_e64ya_233",wk="_chatTitle_e64ya_251",Wt={container:dk,header:hk,title:pk,button:mk,section:gk,subTabBar:yk,subTab:bk,active:xk,chatHeader:vk,backButton:Sk,chatTitle:wk};function Nk(){const n={_id:"123",name:"John Doe",role:"faculty"},[e,t]=T.useState("announcements"),[r,i]=T.useState("rooms"),[a,c]=T.useState(null),[f,d]=T.useState(null),[h,m]=T.useState([]),[b,x]=T.useState(!1),[S,v]=T.useState(!0),N=_=>{t(_),c(null),d(null)},C=()=>{c(null),d(null)},M=async()=>{try{const _=await Kr.get("/announcements");m(_.data)}catch(_){console.error("❌ Failed to fetch announcements:",_)}finally{v(!1)}};return T.useEffect(()=>{M()},[]),y.jsxs("div",{className:Wt.container,children:[y.jsx(fk,{activeTab:e,onTabChange:N,tabs:[{key:"announcements",label:"Announcements",icon:""},{key:"chat",label:"Chat",icon:""}]}),e==="announcements"?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Wt.header,children:[y.jsx("h2",{className:Wt.title,children:"📣 Announcements"}),n.role==="faculty"&&y.jsx("button",{onClick:()=>x(_=>!_),className:Wt.button,children:b?"❌ Cancel":"➕ Create"})]}),b&&y.jsx("div",{className:Wt.section,children:y.jsx(dT,{user:n,onCreated:M})}),S?y.jsx("p",{children:"Loading announcements..."}):y.jsxs(y.Fragment,{children:[y.jsx(vT,{announcements:h}),y.jsx("p",{className:"text-sm text-gray-500 italic mt-4",children:"🧪 Offline mode: announcements are stored locally and won’t persist across devices."})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Wt.subTabBar,children:[y.jsx("button",{className:`${Wt.subTab} ${r==="rooms"?Wt.active:""}`,onClick:()=>{i("rooms"),c(null),d(null)},children:"💬 Rooms"}),y.jsx("button",{className:`${Wt.subTab} ${r==="friends"?Wt.active:""}`,onClick:()=>{i("friends"),c(null),d(null)},children:"👥 Friends"})]}),r==="rooms"?a?y.jsx(n1,{room:a,user:n,onBack:C}):y.jsx(t1,{onSelect:c}):f?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Wt.chatHeader,children:[y.jsx("button",{onClick:C,className:Wt.backButton,children:"← Back"}),y.jsx("h3",{className:Wt.chatTitle,children:"Direct Message"})]}),y.jsx(ik,{roomId:f,currentUserId:n._id})]}):y.jsx(XT,{onSelect:d})]})]})}function ji({icon:n,label:e,value:t}){return y.jsxs("div",{className:"bg-white rounded-xl shadow p-6 flex items-center gap-4",children:[y.jsx("div",{className:"bg-indigo-100 p-3 rounded-full text-indigo-600",children:n}),y.jsxs("div",{children:[y.jsx("div",{className:"text-xl font-bold text-gray-800",children:t}),y.jsx("div",{className:"text-sm text-gray-500",children:e})]})]})}const jd=!1,Ck=[{_id:"l1",name:"Thabo Mokoena",email:"thabo@school.edu",password:"123456",grade:"10",status:"Active",address:"123 Main St",allergies:"None",medicalConditions:"Asthma",emergencyContactName:"Nomsa Mokoena",emergencyContactNumber:"0821234567",medicalAid:"Discovery",parentName:"Nomsa Mokoena",relationship:"Mother",parentContact:"0821234567",parentEmail:"nomsa@family.com"},{_id:"l2",name:"Ayanda Nkosi",email:"ayanda@school.edu",password:"abcdef",grade:"9",status:"Inactive",address:"456 School Rd",allergies:"Peanuts",medicalConditions:"",emergencyContactName:"Sipho Nkosi",emergencyContactNumber:"0839876543",medicalAid:"",parentName:"Sipho Nkosi",relationship:"Father",parentContact:"0839876543",parentEmail:"sipho@family.com"}];function Ek(){const[n,e]=T.useState([]),[t,r]=T.useState(""),[i,a]=T.useState(!1),[c,f]=T.useState(null),[d,h]=T.useState(1),[m,b]=T.useState(!1),[x,S]=T.useState({}),[v,N]=T.useState({name:"",email:"",password:"",grade:"",status:"Active",address:"",allergies:"",medicalConditions:"",emergencyContactName:"",emergencyContactNumber:"",medicalAid:"",parentName:"",relationship:"",parentContact:"",parentEmail:""}),[C,M]=T.useState(!1),[_,q]=T.useState(""),K=async()=>{{e(Ck);return}};T.useEffect(()=>{K()},[]),T.useEffect(()=>{if(c){const L=n.find(J=>J._id===c);L&&S(L)}},[c,n]);const F=async L=>{L.preventDefault(),M(!0),q("");const J={...v,_id:Date.now().toString()};try{jd||e(le=>[...le,J]),N({name:"",email:"",password:"",grade:"",status:"Active",address:"",allergies:"",medicalConditions:"",emergencyContactName:"",emergencyContactNumber:"",medicalAid:"",parentName:"",relationship:"",parentContact:"",parentEmail:""}),a(!1),h(1)}catch(le){q(le.response?.data?.error||"Enrolment failed")}finally{M(!1)}},Z=async L=>{if(window.confirm("Are you sure you want to delete this learner?"))try{jd||e(J=>J.filter(le=>le._id!==L)),f(null)}catch(J){console.error("Failed to delete learner:",J)}},Y=n.filter(L=>L.name.toLowerCase().includes(t.toLowerCase()));return y.jsxs("div",{className:"space-y-10",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsx(ji,{icon:y.jsx(Qx,{className:"w-6 h-6"}),label:"Total Learners",value:n.length}),y.jsx(ji,{icon:y.jsx(Wx,{className:"w-6 h-6"}),label:"New This Term",value:"36"}),y.jsx(ji,{icon:y.jsx(Jx,{className:"w-6 h-6"}),label:"Withdrawals",value:"5"})]}),!c&&y.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Manage Learners"}),y.jsx("button",{onClick:()=>a(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition",children:"+ Enrol New Learner"})]}),y.jsxs("div",{className:"relative mb-4",children:[y.jsx(Xx,{className:"w-5 h-5 absolute left-3 top-2.5 text-gray-400"}),y.jsx("input",{type:"text",placeholder:"Search learners...",value:t,onChange:L=>r(L.target.value),className:"pl-10 pr-4 py-2 border rounded w-full text-sm"})]}),y.jsxs("table",{className:"w-full text-sm text-left",children:[y.jsx("thead",{className:"text-gray-600 border-b",children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2",children:"Name"}),y.jsx("th",{children:"Email"}),y.jsx("th",{children:"Grade"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:Y.map(L=>y.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>f(L._id),children:[y.jsx("td",{className:"py-2",children:L.name}),y.jsx("td",{children:L.email}),y.jsx("td",{children:L.grade}),y.jsx("td",{children:y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${L.status==="Active"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:L.status})})]},L._id))})]})]}),c&&y.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[y.jsx("button",{onClick:()=>{f(null),b(!1)},className:"mb-4 text-gray-500 hover:text-gray-700",children:"← Back to Learners"}),y.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Learner Profile"}),y.jsxs("div",{className:"space-y-2",children:[[["Email","email"],["Password","password"],["Grade","grade"],["Status","status"],["Address","address"],["Allergies","allergies"],["Medical Conditions","medicalConditions"],["Emergency Contact Name","emergencyContactName"],["Emergency Contact Number","emergencyContactNumber"],["Medical Aid","medicalAid"],["Parent Name","parentName"],["Relationship","relationship"],["Parent Contact","parentContact"],["Parent Email","parentEmail"]].map(([L,J])=>y.jsxs("div",{children:[y.jsxs("strong",{children:[L,":"]})," ",J==="password"?m?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"password",name:"password",value:x.password||"",onChange:le=>S({...x,password:le.target.value}),className:"border px-2 py-1 rounded text-sm w-full mt-1"}),y.jsx("small",{className:"text-gray-500 block",children:"Changing the password will update their login credentials."})]}):y.jsx("span",{className:"italic text-gray-500",children:"Hidden for security"}):m?y.jsx("input",{name:J,value:x[J]||"",onChange:le=>S({...x,[J]:le.target.value}),className:"border px-2 py-1 rounded text-sm w-full mt-1"}):y.jsx("span",{children:x[J]||"—"})]},J)),y.jsxs("div",{className:"flex gap-4 mt-4",children:[m?y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:async()=>{if(!x._id)return console.error("No learner ID found");try{jd||e(L=>L.map(J=>J._id===x._id?{...J,...x}:J)),b(!1)}catch(L){console.error("Failed to update learner:",L)}},className:"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700",children:"Save"}),y.jsx("button",{onClick:()=>b(!1),className:"text-gray-600 hover:underline",children:"Cancel"})]}):y.jsx("button",{onClick:()=>b(!0),className:"text-indigo-600 hover:underline",children:"Edit Profile"}),y.jsx("button",{onClick:()=>{if(!x._id)return console.error("No learner ID found");Z(x._id)},className:"text-red-600 hover:underline",children:"Delete Learner"})]})]})]}),i&&y.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-md relative",children:[y.jsx("button",{onClick:()=>{a(!1),h(1)},className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:y.jsx(XM,{className:"w-5 h-5"})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:d===1?"Step 1: Learner Info":"Step 2: Parental Info"}),y.jsx("form",{onSubmit:F,className:"space-y-4",children:d===1?y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",placeholder:"Full Name",value:v.name,onChange:L=>N({...v,name:L.target.value}),required:!0,className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"email",placeholder:"Email",value:v.email,onChange:L=>N({...v,email:L.target.value}),required:!0,className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"password",placeholder:"Password",value:v.password,onChange:L=>N({...v,password:L.target.value}),required:!0,className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("small",{className:"text-gray-500 block mb-2",children:"This will be the learner’s login password. You can set it now or let them change it later."}),y.jsx("input",{type:"text",placeholder:"Grade (e.g. 10)",value:v.grade,onChange:L=>N({...v,grade:L.target.value}),required:!0,className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Address",value:v.address,onChange:L=>N({...v,address:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Allergies",value:v.allergies,onChange:L=>N({...v,allergies:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Medical Conditions",value:v.medicalConditions,onChange:L=>N({...v,medicalConditions:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Emergency Contact Name",value:v.emergencyContactName,onChange:L=>N({...v,emergencyContactName:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Emergency Contact Number",value:v.emergencyContactNumber,onChange:L=>N({...v,emergencyContactNumber:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Medical Aid Info",value:v.medicalAid,onChange:L=>N({...v,medicalAid:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("button",{type:"button",onClick:()=>h(2),className:"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition",children:"Next: Parental Info →"})]}):y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"text",placeholder:"Parent/Guardian Name",value:v.parentName,onChange:L=>N({...v,parentName:L.target.value}),required:!0,className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Relationship",value:v.relationship,onChange:L=>N({...v,relationship:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"text",placeholder:"Parent Contact",value:v.parentContact,onChange:L=>N({...v,parentContact:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),y.jsx("input",{type:"email",placeholder:"Parent Email",value:v.parentEmail,onChange:L=>N({...v,parentEmail:L.target.value}),className:"w-full border rounded px-3 py-2 text-sm"}),_&&y.jsx("p",{className:"text-red-500 text-sm",children:_}),y.jsxs("div",{className:"flex justify-between gap-2",children:[y.jsx("button",{type:"button",onClick:()=>h(1),className:"w-1/2 bg-gray-200 text-gray-700 py-2 rounded hover:bg-gray-300 transition",children:"← Back"}),y.jsx("button",{type:"submit",disabled:C,className:"w-1/2 bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition",children:C?"Enrolling...":"Finish Enrolment"})]})]})})]})})]})}function mt(n){this.content=n}mt.prototype={constructor:mt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),a=r.content.slice();return i==-1?a.push(t||n,e):(a[i+1]=e,t&&(a[i]=t)),new mt(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new mt(t)},addToStart:function(n,e){return new mt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new mt(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),a=r.find(n);return i.splice(a==-1?i.length:a,0,e,t),new mt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=mt.from(n),n.size?new mt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=mt.from(n),n.size?new mt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=mt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};mt.from=function(n){if(n instanceof mt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new mt(e)};function r1(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),a=e.child(r);if(i==a){t+=i.nodeSize;continue}if(!i.sameMarkup(a))return t;if(i.isText&&i.text!=a.text){for(let c=0;i.text[c]==a.text[c];c++)t++;return t}if(i.content.size||a.content.size){let c=r1(i.content,a.content,t+1);if(c!=null)return c}t+=i.nodeSize}}function s1(n,e,t,r){for(let i=n.childCount,a=e.childCount;;){if(i==0||a==0)return i==a?null:{a:t,b:r};let c=n.child(--i),f=e.child(--a),d=c.nodeSize;if(c==f){t-=d,r-=d;continue}if(!c.sameMarkup(f))return{a:t,b:r};if(c.isText&&c.text!=f.text){let h=0,m=Math.min(c.text.length,f.text.length);for(;h<m&&c.text[c.text.length-h-1]==f.text[f.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(c.content.size||f.content.size){let h=s1(c.content,f.content,t-1,r-1);if(h)return h}t-=d,r-=d}}class G{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,a){for(let c=0,f=0;f<t;c++){let d=this.content[c],h=f+d.nodeSize;if(h>e&&r(d,i+f,a||null,c)!==!1&&d.content.size){let m=f+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,t-m),r,i+m)}f=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let a="",c=!0;return this.nodesBetween(e,t,(f,d)=>{let h=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?i?typeof i=="function"?i(f):i:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&h||f.isTextblock)&&r&&(c?c=!1:a+=r),a+=h},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new G(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let a=0,c=0;c<t;a++){let f=this.content[a],d=c+f.nodeSize;d>e&&((c<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-c),Math.min(f.text.length,t-c)):f=f.cut(Math.max(0,e-c-1),Math.min(f.content.size,t-c-1))),r.push(f),i+=f.nodeSize),c=d}return new G(r,i)}cutByIndex(e,t){return e==t?G.empty:e==0&&t==this.content.length?this:new G(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),a=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new G(i,a)}addToStart(e){return new G([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new G(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return r1(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return s1(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Xo(0,e);if(e==this.size)return Xo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let a=this.child(r),c=i+a.nodeSize;if(c>=e)return c==e||t>0?Xo(r+1,c):Xo(r,i);i=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return G.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new G(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return G.empty;let t,r=0;for(let i=0;i<e.length;i++){let a=e[i];r+=a.nodeSize,i&&a.isText&&e[i-1].sameMarkup(a)?(t||(t=e.slice(0,i)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new G(t||e,r)}static from(e){if(!e)return G.empty;if(e instanceof G)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new G([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}G.empty=new G([],0);const _d={index:0,offset:0};function Xo(n,e){return _d.index=n,_d.offset=e,_d}function yc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!yc(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!yc(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ze=class fh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,i));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(a)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&yc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return fh.none;if(e instanceof fh)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};ze.none=[];class bc extends Error{}class W{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=l1(this.content,e+this.openStart,t);return r&&new W(r,this.openStart,this.openEnd)}removeBetween(e,t){return new W(i1(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return W.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new W(G.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)i++;return new W(e,r,i)}}W.empty=new W(G.empty,0,0);function i1(n,e,t){let{index:r,offset:i}=n.findIndex(e),a=n.maybeChild(r),{index:c,offset:f}=n.findIndex(t);if(i==e||a.isText){if(f!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(r,a.copy(i1(a.content,e-i-1,t-i-1)))}function l1(n,e,t,r){let{index:i,offset:a}=n.findIndex(e),c=n.maybeChild(i);if(a==e||c.isText)return n.cut(0,e).append(t).append(n.cut(e));let f=l1(c.content,e-a-1,t);return f&&n.replaceChild(i,c.copy(f))}function Mk(n,e,t){if(t.openStart>n.depth)throw new bc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new bc("Inconsistent open depths");return a1(n,e,t,0)}function a1(n,e,t,r){let i=n.index(r),a=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let c=a1(n,e,t,r+1);return a.copy(a.content.replaceChild(i,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let c=n.parent,f=c.content;return ks(c,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:c,end:f}=Tk(t,n);return ks(a,c1(n,c,f,e,r))}else return ks(a,xc(n,e,r))}function o1(n,e){if(!e.type.compatibleContent(n.type))throw new bc("Cannot join "+e.type.name+" onto "+n.type.name)}function dh(n,e,t){let r=n.node(t);return o1(r,e.node(t)),r}function Ts(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function na(n,e,t,r){let i=(e||n).node(t),a=0,c=e?e.index(t):i.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(Ts(n.nodeAfter,r),a++));for(let f=a;f<c;f++)Ts(i.child(f),r);e&&e.depth==t&&e.textOffset&&Ts(e.nodeBefore,r)}function ks(n,e){return n.type.checkContent(e),n.copy(e)}function c1(n,e,t,r,i){let a=n.depth>i&&dh(n,e,i+1),c=r.depth>i&&dh(t,r,i+1),f=[];return na(null,n,i,f),a&&c&&e.index(i)==t.index(i)?(o1(a,c),Ts(ks(a,c1(n,e,t,r,i+1)),f)):(a&&Ts(ks(a,xc(n,e,i+1)),f),na(e,t,i,f),c&&Ts(ks(c,xc(t,r,i+1)),f)),na(r,null,i,f),new G(f)}function xc(n,e,t){let r=[];if(na(null,n,t,r),n.depth>t){let i=dh(n,e,t+1);Ts(ks(i,xc(n,e,t+1)),r)}return na(e,null,t,r),new G(r)}function Tk(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)i=e.node(a).copy(G.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class ca{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)i+=r.child(a).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ze.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let f=r;r=i,i=f}let a=r.marks;for(var c=0;c<a.length;c++)a[c].type.spec.inclusive===!1&&(!i||!a[c].isInSet(i.marks))&&(a=a[c--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!i||!r[a].isInSet(i.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new vc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,a=t;for(let c=e;;){let{index:f,offset:d}=c.content.findIndex(a),h=a-d;if(r.push(c,f,i+d),!h||(c=c.child(f),c.isText))break;a=h-1,i+=d+1}return new ca(t,r,a)}static resolveCached(e,t){let r=U0.get(e);if(r)for(let a=0;a<r.elts.length;a++){let c=r.elts[a];if(c.pos==t)return c}else U0.set(e,r=new kk);let i=r.elts[r.i]=ca.resolve(e,t);return r.i=(r.i+1)%Ok,i}}class kk{constructor(){this.elts=[],this.i=0}}const Ok=12,U0=new WeakMap;class vc{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Ak=Object.create(null);let Ir=class hh{constructor(e,t,r,i=ze.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||G.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&yc(this.attrs,t||e.defaultAttrs||Ak)&&ze.sameSet(this.marks,r||ze.none)}copy(e=null){return e==this.content?this:new hh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new hh(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return W.empty;let i=this.resolve(e),a=this.resolve(t),c=r?0:i.sharedDepth(t),f=i.start(c),h=i.node(c).content.cut(i.pos-f,a.pos-f);return new W(h,i.depth-c,a.depth-c)}replace(e,t,r){return Mk(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return ca.resolveCached(this,e)}resolveNoCache(e){return ca.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,a=>(r.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),u1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=G.empty,i=0,a=r.childCount){let c=this.contentMatchAt(e).matchFragment(r,i,a),f=c&&c.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=i;d<a;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(e).matchType(r),c=a&&a.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ze.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ze.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=G.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,i,r);return a.type.checkAttrs(a.attrs),a}};Ir.prototype.text=void 0;class Sc extends Ir{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):u1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Sc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Sc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function u1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class js{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Dk(e,t);if(r.next==null)return js.empty;let i=f1(r);r.next&&r.err("Unexpected trailing text");let a=Hk(Lk(i));return Uk(a,r),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let a=t;i&&a<r;a++)i=i.matchType(e.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function a(c,f){let d=c.matchFragment(e,r);if(d&&(!t||d.validEnd))return G.from(f.map(h=>h.createAndFill()));for(let h=0;h<c.next.length;h++){let{type:m,next:b}=c.next[h];if(!(m.isText||m.hasRequiredAttrs())&&i.indexOf(b)==-1){i.push(b);let x=a(b,f.concat(m));if(x)return x}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),a=i.match;if(a.matchType(e)){let c=[];for(let f=i;f.type;f=f.via)c.push(f.type);return c.reverse()}for(let c=0;c<a.next.length;c++){let{type:f,next:d}=a.next[c];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!i.type||d.validEnd)&&(r.push({match:f.contentMatch,type:f,via:i}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let a=i+(r.validEnd?"*":" ")+" ";for(let c=0;c<r.next.length;c++)a+=(c?", ":"")+r.next[c].type.name+"->"+e.indexOf(r.next[c].next);return a}).join(`
`)}}js.empty=new js(!0);class Dk{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function f1(n){let e=[];do e.push(Rk(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Rk(n){let e=[];do e.push(jk(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function jk(n){let e=zk(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=_k(n,e);else break;return e}function q0(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function _k(n,e){let t=q0(n),r=t;return n.eat(",")&&(n.next!="}"?r=q0(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Bk(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let a in t){let c=t[a];c.isInGroup(e)&&i.push(c)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function zk(n){if(n.eat("(")){let e=f1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Bk(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Lk(n){let e=[[]];return i(a(n,0),t()),e;function t(){return e.push([])-1}function r(c,f,d){let h={term:d,to:f};return e[c].push(h),h}function i(c,f){c.forEach(d=>d.to=f)}function a(c,f){if(c.type=="choice")return c.exprs.reduce((d,h)=>d.concat(a(h,f)),[]);if(c.type=="seq")for(let d=0;;d++){let h=a(c.exprs[d],f);if(d==c.exprs.length-1)return h;i(h,f=t())}else if(c.type=="star"){let d=t();return r(f,d),i(a(c.expr,d),d),[r(d)]}else if(c.type=="plus"){let d=t();return i(a(c.expr,f),d),i(a(c.expr,d),d),[r(d)]}else{if(c.type=="opt")return[r(f)].concat(a(c.expr,f));if(c.type=="range"){let d=f;for(let h=0;h<c.min;h++){let m=t();i(a(c.expr,d),m),d=m}if(c.max==-1)i(a(c.expr,d),d);else for(let h=c.min;h<c.max;h++){let m=t();r(d,m),i(a(c.expr,d),m),d=m}return[r(d)]}else{if(c.type=="name")return[r(f,void 0,c.value)];throw new Error("Unknown expr type")}}}}function d1(n,e){return e-n}function V0(n,e){let t=[];return r(e),t.sort(d1);function r(i){let a=n[i];if(a.length==1&&!a[0].term)return r(a[0].to);t.push(i);for(let c=0;c<a.length;c++){let{term:f,to:d}=a[c];!f&&t.indexOf(d)==-1&&r(d)}}}function Hk(n){let e=Object.create(null);return t(V0(n,0));function t(r){let i=[];r.forEach(c=>{n[c].forEach(({term:f,to:d})=>{if(!f)return;let h;for(let m=0;m<i.length;m++)i[m][0]==f&&(h=i[m][1]);V0(n,d).forEach(m=>{h||i.push([f,h=[]]),h.indexOf(m)==-1&&h.push(m)})})});let a=e[r.join(",")]=new js(r.indexOf(n.length-1)>-1);for(let c=0;c<i.length;c++){let f=i[c][1].sort(d1);a.next.push({type:i[c][0],next:e[f.join(",")]||t(f)})}return a}}function Uk(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],a=!i.validEnd,c=[];for(let f=0;f<i.next.length;f++){let{type:d,next:h}=i.next[f];c.push(d.name),a&&!(d.isText||d.hasRequiredAttrs())&&(a=!1),r.indexOf(h)==-1&&r.push(h)}a&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function h1(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function p1(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let a=n[r];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function m1(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let a=n[i];a.validate&&a.validate(e[i])}}function g1(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new Vk(n,r,e[r]);return t}let P0=class y1{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=g1(e,r.attrs),this.defaultAttrs=h1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==js.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:p1(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ir(this,this.computeAttrs(e),G.from(t),ze.setFrom(r))}createChecked(e=null,t,r){return t=G.from(t),this.checkContent(t),new Ir(this,this.computeAttrs(e),t,ze.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=G.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let i=this.contentMatch.matchFragment(t),a=i&&i.fillBefore(G.empty,!0);return a?new Ir(this,e,t.append(a),ze.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){m1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ze.none:e}static compile(e,t){let r=Object.create(null);e.forEach((a,c)=>r[a]=new y1(a,t,c));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function qk(n,e,t){let r=t.split("|");return i=>{let a=i===null?"null":typeof i;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${a}`)}}class Vk{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?qk(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Vc{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=g1(e,i.attrs),this.excluded=null;let a=h1(this.attrs);this.instance=a?new ze(this,a):null}create(e=null){return!e&&this.instance?this.instance:new ze(this,p1(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((a,c)=>r[a]=new Vc(a,i++,t,c)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){m1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class b1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=mt.from(e.nodes),t.marks=mt.from(e.marks||{}),this.nodes=P0.compile(this.spec.nodes,this),this.marks=Vc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],c=a.spec.content||"",f=a.spec.marks;if(a.contentMatch=r[c]||(r[c]=js.parse(c,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=f=="_"?null:f?I0(this,f.split(" ")):f==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],c=a.spec.excludes;a.excluded=c==null?[a]:c==""?[]:I0(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof P0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Sc(r,r.defaultAttrs,e,ze.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Ir.fromJSON(this,e)}markFromJSON(e){return ze.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function I0(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],a=n.marks[i],c=a;if(a)t.push(a);else for(let f in n.marks){let d=n.marks[f];(i=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(i)>-1)&&t.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function Pk(n){return n.tag!=null}function Ik(n){return n.style!=null}class Fr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(Pk(i))this.tags.push(i);else if(Ik(i)){let a=/[^=]*/.exec(i.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=e.nodes[i.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let r=new $0(this,t,!1);return r.addAll(e,ze.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new $0(this,t,!0);return r.addAll(e,ze.none,t.from,t.to),W.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(Yk(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let c=a.getAttrs(e);if(c===!1)continue;a.attrs=c||void 0}return a}}}matchStyle(e,t,r,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let c=this.styles[a],f=c.style;if(!(f.indexOf(e)!=0||c.context&&!r.matchesContext(c.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(c.getAttrs){let d=c.getAttrs(t);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let t=[];function r(i){let a=i.priority==null?50:i.priority,c=0;for(;c<t.length;c++){let f=t[c];if((f.priority==null?50:f.priority)<a)break}t.splice(c,0,i)}for(let i in e.marks){let a=e.marks[i].spec.parseDOM;a&&a.forEach(c=>{r(c=Y0(c)),c.mark||c.ignore||c.clearMark||(c.mark=i)})}for(let i in e.nodes){let a=e.nodes[i].spec.parseDOM;a&&a.forEach(c=>{r(c=Y0(c)),c.node||c.ignore||c.mark||(c.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Fr(e,Fr.schemaRules(e)))}}const x1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fk={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},v1={ol:!0,ul:!0},ua=1,ph=2,ra=4;function F0(n,e,t){return e!=null?(e?ua:0)|(e==="full"?ph:0):n&&n.whitespace=="pre"?ua|ph:t&~ra}class Qo{constructor(e,t,r,i,a,c){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=c,this.content=[],this.activeMarks=ze.none,this.match=a||(c&ra?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(G.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ua)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let t=G.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(G.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!x1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class $0{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,a,c=F0(null,t.preserveWhitespace,0)|(r?ra:0);i?a=new Qo(i.type,i.attrs,ze.none,!0,t.topMatch||i.type.contentMatch,c):r?a=new Qo(null,null,ze.none,!0,null,c):a=new Qo(e.schema.topNodeType,null,ze.none,!0,null,c),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,a=i.options&ph?"full":this.localPreserveWS||(i.options&ua)>0;if(a==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)a!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],f=e.previousSibling;(!c||f&&f.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),f;v1.hasOwnProperty(c)&&this.parser.normalizeLists&&$k(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,r));e:if(d?d.ignore:Fk.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,m=this.needsBlock;if(x1.hasOwnProperty(c))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),h=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let b=d&&d.skip?t:this.readStyles(e,t);b&&this.addAll(e,b),h&&this.sync(a),this.needsBlock=m}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?f:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],c=r.getPropertyValue(a);if(c)for(let f=void 0;;){let d=this.parser.matchStyle(a,c,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,r,i){let a,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(c,t.attrs||null,r,t.preserveWhitespace);d&&(a=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let f=this.top;if(c&&c.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}a&&this.sync(f)&&this.open--}addAll(e,t,r,i){let a=r||0;for(let c=r?e.childNodes[r]:e.firstChild,f=i==null?null:e.childNodes[i];c!=f;c=c.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(c,t);this.findAtPoint(e,a)}findPlace(e,t,r){let i,a;for(let c=this.open,f=0;c>=0;c--){let d=this.nodes[c],h=d.findWrapping(e);if(h&&(!i||i.length>h.length+f)&&(i=h,a=d,!h.length))break;if(d.solid){if(r)break;f+=2}}if(!i)return null;this.sync(a);for(let c=0;c<i.length;c++)t=this.enterInner(i[c],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let c=ze.none;for(let f of i.concat(e.marks))(a.type?a.type.allowsMarkType(f.type):G0(f.type,e.type))&&(c=f.addToSet(c));return a.content.push(e.mark(c)),!0}return!1}enter(e,t,r,i){let a=this.findPlace(e.create(t),r,!1);return a&&(a=this.enterInner(e,t,r,!0,i)),a}enterInner(e,t,r,i=!1,a){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let f=F0(e,a,c.options);c.options&ra&&c.content.length==0&&(f|=ra);let d=ze.none;return r=r.filter(h=>(c.type?c.type.allowsMarkType(h.type):G0(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new Qo(e,t,d,i,null,f)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ua)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(i?0:1),c=(f,d)=>{for(;f>=0;f--){let h=t[f];if(h==""){if(f==t.length-1||f==0)continue;for(;d>=a;d--)if(c(f-1,d))return!0;return!1}else{let m=d>0||d==0&&i?this.nodes[d].type:r&&d>=a?r.node(d-a).type:null;if(!m||m.name!=h&&!m.isInGroup(h))return!1;d--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function $k(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&v1.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Yk(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Y0(n){let e={};for(let t in n)e[t]=n[t];return e}function G0(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let a=[],c=f=>{a.push(f);for(let d=0;d<f.edgeCount;d++){let{type:h,next:m}=f.edge(d);if(h==e||a.indexOf(m)<0&&c(m))return!0}};if(c(i.contentMatch))return!0}}class qs{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Bd(t).createDocumentFragment());let i=r,a=[];return e.forEach(c=>{if(a.length||c.marks.length){let f=0,d=0;for(;f<a.length&&d<c.marks.length;){let h=c.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(a[f][0])||h.type.spec.spanning===!1)break;f++,d++}for(;f<a.length;)i=a.pop()[1];for(;d<c.marks.length;){let h=c.marks[d++],m=this.serializeMark(h,c.isInline,t);m&&(a.push([h,i]),i.appendChild(m.dom),i=m.contentDOM||m.dom)}}i.appendChild(this.serializeNodeInner(c,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=cc(Bd(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let a=this.serializeMark(e.marks[i],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&cc(Bd(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return cc(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new qs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=K0(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return K0(e.marks)}}function K0(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Bd(n){return n.document||window.document}const J0=new WeakMap;function Gk(n){let e=J0.get(n);return e===void 0&&J0.set(n,e=Kk(n)),e}function Kk(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function cc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=Gk(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=i.indexOf(" ");c>0&&(t=i.slice(0,c),i=i.slice(c+1));let f,d=t?n.createElementNS(t,i):n.createElement(i),h=e[1],m=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){m=2;for(let b in h)if(h[b]!=null){let x=b.indexOf(" ");x>0?d.setAttributeNS(b.slice(0,x),b.slice(x+1),h[b]):d.setAttribute(b,h[b])}}for(let b=m;b<e.length;b++){let x=e[b];if(x===0){if(b<e.length-1||b>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:S,contentDOM:v}=cc(n,x,t,r);if(d.appendChild(S),v){if(f)throw new RangeError("Multiple content holes");f=v}}}return{dom:d,contentDOM:f}}const S1=65535,w1=Math.pow(2,16);function Jk(n,e){return n+e*w1}function X0(n){return n&S1}function Xk(n){return(n-(n&S1))/w1}const N1=1,C1=2,uc=4,E1=8;class mh{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&E1)>0}get deletedBefore(){return(this.delInfo&(N1|uc))>0}get deletedAfter(){return(this.delInfo&(C1|uc))>0}get deletedAcross(){return(this.delInfo&uc)>0}}class Zt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Zt.empty)return Zt.empty}recover(e){let t=0,r=X0(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Xk(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,a=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?i:0);if(d>e)break;let h=this.ranges[f+a],m=this.ranges[f+c],b=d+h;if(e<=b){let x=h?e==d?-1:e==b?1:t:t,S=d+i+(x<0?0:m);if(r)return S;let v=e==(t<0?d:b)?null:Jk(f/3,e-d),N=e==d?C1:e==b?N1:uc;return(t<0?e!=d:e!=b)&&(N|=E1),new mh(S,N,v)}i+=m-h}return r?e+i:new mh(e+i,0,null)}touches(e,t){let r=0,i=X0(t),a=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[f+a],m=d+h;if(e<=m&&f==i*3)return!0;r+=this.ranges[f+c]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let c=this.ranges[i],f=c-(this.inverted?a:0),d=c+(this.inverted?0:a),h=this.ranges[i+t],m=this.ranges[i+r];e(f,f+h,d,d+m),a+=m-h}}invert(){return new Zt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Zt.empty:new Zt(e<0?[0,-e,0]:[0,0,e])}}Zt.empty=new Zt([]);class fa{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new fa(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new fa;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let a=this.from;a<this.to;a++){let c=this._maps[a],f=c.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(a);if(d!=null&&d>a&&d<this.to){a=d,e=this._maps[d].recover(f.recover);continue}}i|=f.delInfo,e=f.pos}return r?e:new mh(e,i,null)}}const zd=Object.create(null);class Et{getMap(){return Zt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=zd[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in zd)throw new RangeError("Duplicate use of step JSON ID "+e);return zd[e]=t,t.prototype.jsonID=e,t}}class We{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new We(e,null)}static fail(e){return new We(null,e)}static fromReplace(e,t,r,i){try{return We.ok(e.replace(t,r,i))}catch(a){if(a instanceof bc)return We.fail(a.message);throw a}}}function Ih(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let a=n.child(i);a.content.size&&(a=a.copy(Ih(a.content,e,a))),a.isInline&&(a=e(a,t,i)),r.push(a)}return G.fromArray(r)}class qr extends Et{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),a=new W(Ih(t.content,(c,f)=>!c.isAtom||!f.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),i),t.openStart,t.openEnd);return We.fromReplace(e,this.from,this.to,a)}invert(){return new Dn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new qr(t.pos,r.pos,this.mark)}merge(e){return e instanceof qr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new qr(t.from,t.to,e.markFromJSON(t.mark))}}Et.jsonID("addMark",qr);class Dn extends Et{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new W(Ih(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return We.fromReplace(e,this.from,this.to,r)}invert(){return new qr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Dn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Dn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Dn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Dn(t.from,t.to,e.markFromJSON(t.mark))}}Et.jsonID("removeMark",Dn);class Vr extends Et{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return We.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return We.fromReplace(e,this.pos,this.pos+1,new W(G.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Vr(this.pos,t.marks[i]);return new Vr(this.pos,this.mark)}}return new _s(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Vr(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Vr(t.pos,e.markFromJSON(t.mark))}}Et.jsonID("addNodeMark",Vr);class _s extends Et{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return We.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return We.fromReplace(e,this.pos,this.pos+1,new W(G.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Vr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _s(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _s(t.pos,e.markFromJSON(t.mark))}}Et.jsonID("removeNodeMark",_s);class at extends Et{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&gh(e,this.from,this.to)?We.fail("Structure replace would overwrite content"):We.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Zt([this.from,this.to-this.from,this.slice.size])}invert(e){return new at(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new at(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof at)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?W.empty:new W(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new at(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?W.empty:new W(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new at(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new at(t.from,t.to,W.fromJSON(e,t.slice),!!t.structure)}}Et.jsonID("replace",at);class ot extends Et{constructor(e,t,r,i,a,c,f=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=a,this.insert=c,this.structure=f}apply(e){if(this.structure&&(gh(e,this.from,this.gapFrom)||gh(e,this.gapTo,this.to)))return We.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return We.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?We.fromReplace(e,this.from,this.to,r):We.fail("Content does not fit in gap")}getMap(){return new Zt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ot(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||a>r.pos?null:new ot(t.pos,r.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ot(t.from,t.to,t.gapFrom,t.gapTo,W.fromJSON(e,t.slice),t.insert,!!t.structure)}}Et.jsonID("replaceAround",ot);function gh(n,e,t){let r=n.resolve(e),i=t-e,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let c=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,i--}}return!1}function Qk(n,e,t,r){let i=[],a=[],c,f;n.doc.nodesBetween(e,t,(d,h,m)=>{if(!d.isInline)return;let b=d.marks;if(!r.isInSet(b)&&m.type.allowsMarkType(r.type)){let x=Math.max(h,e),S=Math.min(h+d.nodeSize,t),v=r.addToSet(b);for(let N=0;N<b.length;N++)b[N].isInSet(v)||(c&&c.to==x&&c.mark.eq(b[N])?c.to=S:i.push(c=new Dn(x,S,b[N])));f&&f.to==x?f.to=S:a.push(f=new qr(x,S,r))}}),i.forEach(d=>n.step(d)),a.forEach(d=>n.step(d))}function Wk(n,e,t,r){let i=[],a=0;n.doc.nodesBetween(e,t,(c,f)=>{if(!c.isInline)return;a++;let d=null;if(r instanceof Vc){let h=c.marks,m;for(;m=r.isInSet(h);)(d||(d=[])).push(m),h=m.removeFromSet(h)}else r?r.isInSet(c.marks)&&(d=[r]):d=c.marks;if(d&&d.length){let h=Math.min(f+c.nodeSize,t);for(let m=0;m<d.length;m++){let b=d[m],x;for(let S=0;S<i.length;S++){let v=i[S];v.step==a-1&&b.eq(i[S].style)&&(x=v)}x?(x.to=h,x.step=a):i.push({style:b,from:Math.max(f,e),to:h,step:a})}}}),i.forEach(c=>n.step(new Dn(c.from,c.to,c.style)))}function Fh(n,e,t,r=t.contentMatch,i=!0){let a=n.doc.nodeAt(e),c=[],f=e+1;for(let d=0;d<a.childCount;d++){let h=a.child(d),m=f+h.nodeSize,b=r.matchType(h.type);if(!b)c.push(new at(f,m,W.empty));else{r=b;for(let x=0;x<h.marks.length;x++)t.allowsMarkType(h.marks[x].type)||n.step(new Dn(f,m,h.marks[x]));if(i&&h.isText&&t.whitespace!="pre"){let x,S=/\r?\n|\r/g,v;for(;x=S.exec(h.text);)v||(v=new W(G.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),c.push(new at(f+x.index,f+x.index+x[0].length,v))}}f=m}if(!r.validEnd){let d=r.fillBefore(G.empty,!0);n.replace(f,f,new W(d,0,0))}for(let d=c.length-1;d>=0;d--)n.step(c[d])}function Zk(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function $i(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),a=n.$from.index(r),c=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(a,c,t))return r;if(r==0||i.type.spec.isolating||!Zk(i,a,c))break}return null}function e2(n,e,t){let{$from:r,$to:i,depth:a}=e,c=r.before(a+1),f=i.after(a+1),d=c,h=f,m=G.empty,b=0;for(let v=a,N=!1;v>t;v--)N||r.index(v)>0?(N=!0,m=G.from(r.node(v).copy(m)),b++):d--;let x=G.empty,S=0;for(let v=a,N=!1;v>t;v--)N||i.after(v+1)<i.end(v)?(N=!0,x=G.from(i.node(v).copy(x)),S++):h++;n.step(new ot(d,h,c,f,new W(m.append(x),b,S),m.size-b,!0))}function $h(n,e,t=null,r=n){let i=t2(n,e),a=i&&n2(r,e);return a?i.map(Q0).concat({type:e,attrs:t}).concat(a.map(Q0)):null}function Q0(n){return{type:n,attrs:null}}function t2(n,e){let{parent:t,startIndex:r,endIndex:i}=n,a=t.contentMatchAt(r).findWrapping(e);if(!a)return null;let c=a.length?a[0]:e;return t.canReplaceWith(r,i,c)?a:null}function n2(n,e){let{parent:t,startIndex:r,endIndex:i}=n,a=t.child(r),c=e.contentMatch.findWrapping(a.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let h=r;d&&h<i;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:c}function r2(n,e,t){let r=G.empty;for(let c=t.length-1;c>=0;c--){if(r.size){let f=t[c].type.contentMatch.matchFragment(r);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=G.from(t[c].type.create(t[c].attrs,r))}let i=e.start,a=e.end;n.step(new ot(i,a,i,a,new W(r,0,0),t.length,!0))}function s2(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(c,f)=>{let d=typeof i=="function"?i(c):i;if(c.isTextblock&&!c.hasMarkup(r,d)&&i2(n.doc,n.mapping.slice(a).map(f),r)){let h=null;if(r.schema.linebreakReplacement){let S=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);S&&!v?h=!1:!S&&v&&(h=!0)}h===!1&&T1(n,c,f,a),Fh(n,n.mapping.slice(a).map(f,1),r,void 0,h===null);let m=n.mapping.slice(a),b=m.map(f,1),x=m.map(f+c.nodeSize,1);return n.step(new ot(b,x,b+1,x-1,new W(G.from(r.create(d,null,c.marks)),0,0),1,!0)),h===!0&&M1(n,c,f,a),!1}})}function M1(n,e,t,r){e.forEach((i,a)=>{if(i.isText){let c,f=/\r?\n|\r/g;for(;c=f.exec(i.text);){let d=n.mapping.slice(r).map(t+1+a+c.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function T1(n,e,t,r){e.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let c=n.mapping.slice(r).map(t+1+a);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function i2(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function l2(n,e,t,r,i){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let c=t.create(r,null,i||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,c);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ot(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new W(G.from(c),0,0),1,!0))}function sr(n,e,t=1,r){let i=n.resolve(e),a=i.depth-t,c=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!c.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,m=t-2;h>a;h--,m--){let b=i.node(h),x=i.index(h);if(b.type.spec.isolating)return!1;let S=b.content.cutByIndex(x,b.childCount),v=r&&r[m+1];v&&(S=S.replaceChild(0,v.type.create(v.attrs)));let N=r&&r[m]||b;if(!b.canReplace(x+1,b.childCount)||!N.type.validContent(S))return!1}let f=i.indexAfter(a),d=r&&r[0];return i.node(a).canReplaceWith(f,f,d?d.type:i.node(a+1).type)}function a2(n,e,t=1,r){let i=n.doc.resolve(e),a=G.empty,c=G.empty;for(let f=i.depth,d=i.depth-t,h=t-1;f>d;f--,h--){a=G.from(i.node(f).copy(a));let m=r&&r[h];c=G.from(m?m.type.create(m.attrs,c):i.node(f).copy(c))}n.step(new at(e,e,new W(a.append(c),t,t),!0))}function Xr(n,e){let t=n.resolve(e),r=t.index();return k1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function o2(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let a=e.child(i),c=a.type==r?n.type.schema.nodes.text:a.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function k1(n,e){return!!(n&&e&&!n.isLeaf&&o2(n,e))}function Pc(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let a,c,f=r.index(i);if(i==r.depth?(a=r.nodeBefore,c=r.nodeAfter):t>0?(a=r.node(i+1),f++,c=r.node(i).maybeChild(f)):(a=r.node(i).maybeChild(f-1),c=r.node(i+1)),a&&!a.isTextblock&&k1(a,c)&&r.node(i).canReplace(f,f+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function c2(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,a=n.doc.resolve(e-t),c=a.node().type;if(i&&c.inlineContent){let m=c.whitespace=="pre",b=!!c.contentMatch.matchType(i);m&&!b?r=!1:!m&&b&&(r=!0)}let f=n.steps.length;if(r===!1){let m=n.doc.resolve(e+t);T1(n,m.node(),m.before(),f)}c.inlineContent&&Fh(n,e+t-1,c,a.node().contentMatchAt(a.index()),r==null);let d=n.mapping.slice(f),h=d.map(e-t);if(n.step(new at(h,d.map(e+t,-1),W.empty,!0)),r===!0){let m=n.doc.resolve(h);M1(n,m.node(),m.before(),n.steps.length)}return n}function u2(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let a=r.index(i);if(r.node(i).canReplaceWith(a,a,t))return r.before(i+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let a=r.indexAfter(i);if(r.node(i).canReplaceWith(a,a,t))return r.after(i+1);if(a<r.node(i).childCount)return null}return null}function O1(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let a=0;a<t.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let c=r.depth;c>=0;c--){let f=c==r.depth?0:r.pos<=(r.start(c+1)+r.end(c+1))/2?-1:1,d=r.index(c)+(f>0?1:0),h=r.node(c),m=!1;if(a==1)m=h.canReplace(d,d,i);else{let b=h.contentMatchAt(d).findWrapping(i.firstChild.type);m=b&&h.canReplaceWith(d,d,b[0])}if(m)return f==0?r.pos:f<0?r.before(c+1):r.after(c+1)}return null}function Ic(n,e,t=e,r=W.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),a=n.resolve(t);return A1(i,a,r)?new at(e,t,r):new f2(i,a,r).fit()}function A1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class f2{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=G.empty;for(let i=0;i<=e.depth;i++){let a=e.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=G.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let a=this.placed,c=r.depth,f=i.depth;for(;c&&f&&a.childCount==1;)a=a.firstChild.content,c--,f--;let d=new W(a,c,f);return e>-1?new ot(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new at(r.pos,i.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let a=t.firstChild;if(t.childCount>1&&(i=0),a.type.spec.isolating&&i<=r){e=r;break}t=a.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,a=null;r?(a=Ld(this.unplaced.content,r-1).firstChild,i=a.content):i=this.unplaced.content;let c=i.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:h}=this.frontier[f],m,b=null;if(t==1&&(c?h.matchType(c.type)||(b=h.fillBefore(G.from(c),!1)):a&&d.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:f,parent:a,inject:b};if(t==2&&c&&(m=h.findWrapping(c.type)))return{sliceDepth:r,frontierDepth:f,parent:a,wrap:m};if(a&&h.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ld(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new W(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ld(e,t);if(i.childCount<=1&&t>0){let a=e.size-t<=t+i.size;this.unplaced=new W(Zl(e,t-1,1),t-1,a?t-1:r)}else this.unplaced=new W(Zl(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let N=0;N<a.length;N++)this.openFrontierNode(a[N]);let c=this.unplaced,f=r?r.content:c.content,d=c.openStart-e,h=0,m=[],{match:b,type:x}=this.frontier[t];if(i){for(let N=0;N<i.childCount;N++)m.push(i.child(N));b=b.matchFragment(i)}let S=f.size+e-(c.content.size-c.openEnd);for(;h<f.childCount;){let N=f.child(h),C=b.matchType(N.type);if(!C)break;h++,(h>1||d==0||N.content.size)&&(b=C,m.push(D1(N.mark(x.allowedMarks(N.marks)),h==1?d:0,h==f.childCount?S:-1)))}let v=h==f.childCount;v||(S=-1),this.placed=ea(this.placed,t,G.from(m)),this.frontier[t].match=b,v&&S<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let N=0,C=f;N<S;N++){let M=C.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),C=M.content}this.unplaced=v?e==0?W.empty:new W(Zl(c.content,e-1,1),e-1,S<0?c.openEnd:e-1):new W(Zl(c.content,e,h),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Hd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=Hd(e,t,i,r,a);if(c){for(let f=t-1;f>=0;f--){let{match:d,type:h}=this.frontier[f],m=Hd(e,f,h,d,!0);if(!m||m.childCount)continue e}return{depth:t,fit:c,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ea(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),a=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,a)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ea(this.placed,this.depth,G.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(G.empty,!0);t.childCount&&(this.placed=ea(this.placed,this.frontier.length,t))}}function Zl(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Zl(n.firstChild.content,e-1,t)))}function ea(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(ea(n.lastChild.content,e-1,t)))}function Ld(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function D1(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,D1(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(G.empty,!0)))),n.copy(r)}function Hd(n,e,t,r,i){let a=n.node(e),c=i?n.indexAfter(e):n.index(e);if(c==a.childCount&&!t.compatibleContent(a.type))return null;let f=r.fillBefore(a.content,!0,c);return f&&!d2(t,a.content,c)?f:null}function d2(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function h2(n){return n.spec.defining||n.spec.definingForContent}function p2(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),a=n.doc.resolve(t);if(A1(i,a,r))return n.step(new at(e,t,r));let c=j1(i,n.doc.resolve(t));c[c.length-1]==0&&c.pop();let f=-(i.depth+1);c.unshift(f);for(let x=i.depth,S=i.pos-1;x>0;x--,S--){let v=i.node(x).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;c.indexOf(x)>-1?f=x:i.before(x)==S&&c.splice(1,0,-x)}let d=c.indexOf(f),h=[],m=r.openStart;for(let x=r.content,S=0;;S++){let v=x.firstChild;if(h.push(v),S==r.openStart)break;x=v.content}for(let x=m-1;x>=0;x--){let S=h[x],v=h2(S.type);if(v&&!S.sameMarkup(i.node(Math.abs(f)-1)))m=x;else if(v||!S.type.isTextblock)break}for(let x=r.openStart;x>=0;x--){let S=(x+m+1)%(r.openStart+1),v=h[S];if(v)for(let N=0;N<c.length;N++){let C=c[(N+d)%c.length],M=!0;C<0&&(M=!1,C=-C);let _=i.node(C-1),q=i.index(C-1);if(_.canReplaceWith(q,q,v.type,v.marks))return n.replace(i.before(C),M?a.after(C):t,new W(R1(r.content,0,r.openStart,S),S,r.openEnd))}}let b=n.steps.length;for(let x=c.length-1;x>=0&&(n.replace(e,t,r),!(n.steps.length>b));x--){let S=c[x];S<0||(e=i.before(S),t=a.after(S))}}function R1(n,e,t,r,i){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(R1(a.content,e+1,t,r,a)))}if(e>r){let a=i.contentMatchAt(0),c=a.fillBefore(n).append(n);n=c.append(a.matchFragment(c).fillBefore(G.empty,!0))}return n}function m2(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=u2(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new W(G.from(r),0,0))}function g2(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),a=j1(r,i);for(let c=0;c<a.length;c++){let f=a[c],d=c==a.length-1;if(d&&f==0||r.node(f).type.contentMatch.validEnd)return n.delete(r.start(f),i.end(f));if(f>0&&(d||r.node(f-1).canReplace(r.index(f-1),i.indexAfter(f-1))))return n.delete(r.before(f),i.after(f))}for(let c=1;c<=r.depth&&c<=i.depth;c++)if(e-r.start(c)==r.depth-c&&t>r.end(c)&&i.end(c)-t!=i.depth-c&&r.start(c-1)==i.start(c-1)&&r.node(c-1).canReplace(r.index(c-1),i.index(c-1)))return n.delete(r.before(c),t);n.delete(e,t)}function j1(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let a=n.start(i);if(a<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(a==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==a-1)&&t.push(i)}return t}class _i extends Et{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return We.fail("No node at attribute step's position");let r=Object.create(null);for(let a in t.attrs)r[a]=t.attrs[a];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return We.fromReplace(e,this.pos,this.pos+1,new W(G.from(i),0,t.isLeaf?0:1))}getMap(){return Zt.empty}invert(e){return new _i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _i(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new _i(t.pos,t.attr,t.value)}}Et.jsonID("attr",_i);class da extends Et{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return We.ok(r)}getMap(){return Zt.empty}invert(e){return new da(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new da(t.attr,t.value)}}Et.jsonID("docAttr",da);let zi=class extends Error{};zi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};zi.prototype=Object.create(Error.prototype);zi.prototype.constructor=zi;zi.prototype.name="TransformError";class y2{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new fa}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new zi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=W.empty){let i=Ic(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new W(G.from(r),0,0))}delete(e,t){return this.replace(e,t,W.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return p2(this,e,t,r),this}replaceRangeWith(e,t,r){return m2(this,e,t,r),this}deleteRange(e,t){return g2(this,e,t),this}lift(e,t){return e2(this,e,t),this}join(e,t=1){return c2(this,e,t),this}wrap(e,t){return r2(this,e,t),this}setBlockType(e,t=e,r,i=null){return s2(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return l2(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new _i(e,t,r)),this}setDocAttribute(e,t){return this.step(new da(e,t)),this}addNodeMark(e,t){return this.step(new Vr(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof ze)t.isInSet(r.marks)&&this.step(new _s(e,t));else{let i=r.marks,a,c=[];for(;a=t.isInSet(i);)c.push(new _s(e,a)),i=a.removeFromSet(i);for(let f=c.length-1;f>=0;f--)this.step(c[f])}return this}split(e,t=1,r){return a2(this,e,t,r),this}addMark(e,t,r){return Qk(this,e,t,r),this}removeMark(e,t,r){return Wk(this,e,t,r),this}clearIncompatible(e,t,r){return Fh(this,e,t,r),this}}const Ud=Object.create(null);class ye{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new b2(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=W.empty){let r=t.content.lastChild,i=null;for(let f=0;f<t.openEnd;f++)i=r,r=r.lastChild;let a=e.steps.length,c=this.ranges;for(let f=0;f<c.length;f++){let{$from:d,$to:h}=c[f],m=e.mapping.slice(a);e.replaceRange(m.map(d.pos),m.map(h.pos),f?W.empty:t),f==0&&eb(e,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:c,$to:f}=i[a],d=e.mapping.slice(r),h=d.map(c.pos),m=d.map(f.pos);a?e.deleteRange(h,m):(e.replaceRangeWith(h,m,t),eb(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new he(e):Oi(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let a=e.depth-1;a>=0;a--){let c=t<0?Oi(e.node(0),e.node(a),e.before(a+1),e.index(a),t,r):Oi(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,r);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new en(e.node(0))}static atStart(e){return Oi(e,e,0,0,1)||new en(e)}static atEnd(e){return Oi(e,e,e.content.size,e.childCount,-1)||new en(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ud[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ud)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ud[e]=t,t.prototype.jsonID=e,t}getBookmark(){return he.between(this.$anchor,this.$head).getBookmark()}}ye.prototype.visible=!0;class b2{constructor(e,t){this.$from=e,this.$to=t}}let W0=!1;function Z0(n){!W0&&!n.parent.inlineContent&&(W0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class he extends ye{constructor(e,t=e){Z0(e),Z0(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ye.near(r);let i=e.resolve(t.map(this.anchor));return new he(i.parent.inlineContent?i:r,r)}replace(e,t=W.empty){if(super.replace(e,t),t==W.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof he&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Fc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new he(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let a=ye.findFrom(t,r,!0)||ye.findFrom(t,-r,!0);if(a)t=a.$head;else return ye.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(ye.findFrom(e,-r,!0)||ye.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new he(e,t)}}ye.jsonID("text",he);class Fc{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Fc(e.map(this.anchor),e.map(this.head))}resolve(e){return he.between(e.resolve(this.anchor),e.resolve(this.head))}}class ie extends ye{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),a=e.resolve(i);return r?ye.near(a):new ie(a)}content(){return new W(G.from(this.node),0,0)}eq(e){return e instanceof ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Yh(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ie(e.resolve(t.anchor))}static create(e,t){return new ie(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ie.prototype.visible=!1;ye.jsonID("node",ie);class Yh{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Fc(r,r):new Yh(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ie.isSelectable(r)?new ie(t):ye.near(t)}}class en extends ye{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=W.empty){if(t==W.empty){e.delete(0,e.doc.content.size);let r=ye.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new en(e)}map(e){return new en(e)}eq(e){return e instanceof en}getBookmark(){return x2}}ye.jsonID("all",en);const x2={map(){return this},resolve(n){return new en(n)}};function Oi(n,e,t,r,i,a=!1){if(e.inlineContent)return he.create(n,t);for(let c=r-(i>0?0:1);i>0?c<e.childCount:c>=0;c+=i){let f=e.child(c);if(f.isAtom){if(!a&&ie.isSelectable(f))return ie.create(n,t-(i<0?f.nodeSize:0))}else{let d=Oi(n,f,t+i,i<0?f.childCount:0,i,a);if(d)return d}t+=f.nodeSize*i}return null}function eb(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof at||i instanceof ot))return;let a=n.mapping.maps[r],c;a.forEach((f,d,h,m)=>{c==null&&(c=m)}),n.setSelection(ye.near(n.doc.resolve(c),t))}const tb=1,Wo=2,nb=4;class v2 extends y2{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|tb)&~Wo,this.storedMarks=null,this}get selectionSet(){return(this.updated&tb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Wo,this}ensureMarks(e){return ze.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Wo)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Wo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ze.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let a=this.storedMarks;if(!a){let c=this.doc.resolve(t);a=r==t?c.marks():c.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,a)),this.selection.empty||this.setSelection(ye.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=nb,this}get scrolledIntoView(){return(this.updated&nb)>0}}function rb(n,e){return!e||!n?n:n.bind(e)}class ta{constructor(e,t,r){this.name=e,this.init=rb(t.init,r),this.apply=rb(t.apply,r)}}const S2=[new ta("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ta("selection",{init(n,e){return n.selection||ye.atStart(e.doc)},apply(n){return n.selection}}),new ta("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new ta("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class qd{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=S2.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ta(r.key,r.spec.state,r))})}}class Di{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let a=!1;for(let c=0;c<this.config.plugins.length;c++){let f=this.config.plugins[c];if(f.spec.appendTransaction){let d=i?i[c].n:0,h=i?i[c].state:this,m=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,h,r);if(m&&r.filterTransaction(m,c)){if(m.setMeta("appendedTransaction",e),!i){i=[];for(let b=0;b<this.config.plugins.length;b++)i.push(b<c?{state:r,n:t.length}:{state:this,n:0})}t.push(m),r=r.applyInner(m),a=!0}i&&(i[c]={state:r,n:t.length})}}if(!a)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Di(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let a=r[i];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new v2(this)}static create(e){let t=new qd(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Di(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new qd(this.schema,e.plugins),r=t.fields,i=new Di(t);for(let a=0;a<r.length;a++){let c=r[a].name;i[c]=this.hasOwnProperty(c)?this[c]:r[a].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],a=i.spec.state;a&&a.toJSON&&(t[r]=a.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new qd(e.schema,e.plugins),a=new Di(i);return i.fields.forEach(c=>{if(c.name=="doc")a.doc=Ir.fromJSON(e.schema,t.doc);else if(c.name=="selection")a.selection=ye.fromJSON(a.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let f in r){let d=r[f],h=d.spec.state;if(d.key==c.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){a[c.name]=h.fromJSON.call(d,e,t[f],a);return}}a[c.name]=c.init(e,a)}}),a}}function _1(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=_1(i,e,{})),t[r]=i}return t}class Vt{constructor(e){this.spec=e,this.props={},e.props&&_1(e.props,this,this.props),this.key=e.key?e.key.key:B1("plugin")}getState(e){return e[this.key]}}const Vd=Object.create(null);function B1(n){return n in Vd?n+"$"+ ++Vd[n]:(Vd[n]=0,n+"$")}class Ln{constructor(e="key"){this.key=B1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const gt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Li=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let yh=null;const tr=function(n,e,t){let r=yh||(yh=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},w2=function(){yh=null},Bs=function(n,e,t,r){return t&&(sb(n,e,t,r,-1)||sb(n,e,t,r,1))},N2=/^(img|br|input|textarea|hr)$/i;function sb(n,e,t,r,i){for(var a;;){if(n==t&&e==r)return!0;if(e==(i<0?0:hn(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Ca(n)||N2.test(n.nodeName)||n.contentEditable=="false")return!1;e=gt(n)+(i<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(i<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((a=c.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=i;else return!1;else n=c,e=i<0?hn(n):0}else return!1}}function hn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function C2(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=hn(n)}else if(n.parentNode&&!Ca(n))e=gt(n),n=n.parentNode;else return null}}function E2(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ca(n))e=gt(n)+1,n=n.parentNode;else return null}}function M2(n,e,t){for(let r=e==0,i=e==hn(n);r||i;){if(n==t)return!0;let a=gt(n);if(n=n.parentNode,!n)return!1;r=r&&a==0,i=i&&a==hn(n)}}function Ca(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const $c=function(n){return n.focusNode&&Bs(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function vs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function T2(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function k2(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(hn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(hn(r.startContainer),r.startOffset)}}}const jn=typeof navigator<"u"?navigator:null,ib=typeof document<"u"?document:null,Qr=jn&&jn.userAgent||"",bh=/Edge\/(\d+)/.exec(Qr),z1=/MSIE \d/.exec(Qr),xh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Qr),qt=!!(z1||xh||bh),$r=z1?document.documentMode:xh?+xh[1]:bh?+bh[1]:0,vn=!qt&&/gecko\/(\d+)/i.test(Qr);vn&&+(/Firefox\/(\d+)/.exec(Qr)||[0,0])[1];const vh=!qt&&/Chrome\/(\d+)/.exec(Qr),Ct=!!vh,L1=vh?+vh[1]:0,kt=!qt&&!!jn&&/Apple Computer/.test(jn.vendor),Hi=kt&&(/Mobile\/\w+/.test(Qr)||!!jn&&jn.maxTouchPoints>2),dn=Hi||(jn?/Mac/.test(jn.platform):!1),O2=jn?/Win/.test(jn.platform):!1,nr=/Android \d/.test(Qr),Ea=!!ib&&"webkitFontSmoothing"in ib.documentElement.style,A2=Ea?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function D2(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function er(n,e){return typeof n=="number"?n:n[e]}function R2(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function lb(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=Li(c);continue}let f=c,d=f==a.body,h=d?D2(a):R2(f),m=0,b=0;if(e.top<h.top+er(r,"top")?b=-(h.top-e.top+er(i,"top")):e.bottom>h.bottom-er(r,"bottom")&&(b=e.bottom-e.top>h.bottom-h.top?e.top+er(i,"top")-h.top:e.bottom-h.bottom+er(i,"bottom")),e.left<h.left+er(r,"left")?m=-(h.left-e.left+er(i,"left")):e.right>h.right-er(r,"right")&&(m=e.right-h.right+er(i,"right")),m||b)if(d)a.defaultView.scrollBy(m,b);else{let S=f.scrollLeft,v=f.scrollTop;b&&(f.scrollTop+=b),m&&(f.scrollLeft+=m);let N=f.scrollLeft-S,C=f.scrollTop-v;e={left:e.left-N,top:e.top-C,right:e.right-N,bottom:e.bottom-C}}let x=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(x))break;c=x=="absolute"?c.offsetParent:Li(c)}}function j2(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let a=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let f=n.root.elementFromPoint(a,c);if(!f||f==n.dom||!n.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){r=f,i=d.top;break}}return{refDOM:r,refTop:i,stack:H1(n.dom)}}function H1(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Li(r));return e}function _2({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;U1(t,r==0?0:r-e)}function U1(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:a}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let Mi=null;function B2(n){if(n.setActive)return n.setActive();if(Mi)return n.focus(Mi);let e=H1(n);n.focus(Mi==null?{get preventScroll(){return Mi={preventScroll:!0},!0}}:void 0),Mi||(Mi=!1,U1(e,0))}function q1(n,e){let t,r=2e8,i,a=0,c=e.top,f=e.top,d,h;for(let m=n.firstChild,b=0;m;m=m.nextSibling,b++){let x;if(m.nodeType==1)x=m.getClientRects();else if(m.nodeType==3)x=tr(m).getClientRects();else continue;for(let S=0;S<x.length;S++){let v=x[S];if(v.top<=c&&v.bottom>=f){c=Math.max(v.bottom,c),f=Math.min(v.top,f);let N=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(N<r){t=m,r=N,i=N&&t.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,m.nodeType==1&&N&&(a=b+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!d&&v.left<=e.left&&v.right>=e.left&&(d=m,h={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!t&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(a=b+1)}}return!t&&d&&(t=d,i=h,r=0),t&&t.nodeType==3?z2(t,i):!t||r&&t.nodeType==1?{node:n,offset:a}:q1(t,i)}function z2(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let a=zr(r,1);if(a.top!=a.bottom&&Gh(e,a))return{node:n,offset:i+(e.left>=(a.left+a.right)/2?1:0)}}return{node:n,offset:0}}function Gh(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function L2(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function H2(n,e,t){let{node:r,offset:i}=q1(e,t),a=-1;if(r.nodeType==1&&!r.firstChild){let c=r.getBoundingClientRect();a=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(r,i,a)}function U2(n,e,t,r){let i=-1;for(let a=e,c=!1;a!=n.dom;){let f=n.docView.nearestDesc(a,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&(!c&&d.left>r.left||d.top>r.top?i=f.posBefore:(!c&&d.right<r.left||d.bottom<r.top)&&(i=f.posAfter),c=!0),!f.contentDOM&&i<0&&!f.node.isText))return(f.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;a=f.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function V1(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),a=i;;){let c=n.childNodes[a];if(c.nodeType==1){let f=c.getClientRects();for(let d=0;d<f.length;d++){let h=f[d];if(Gh(e,h))return V1(c,e,h)}}if((a=(a+1)%r)==i)break}return n}function q2(n,e){let t=n.dom.ownerDocument,r,i=0,a=k2(t,e.left,e.top);a&&({node:r,offset:i}=a);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let h=n.dom.getBoundingClientRect();if(!Gh(e,h)||(c=V1(n.dom,e,h),!c))return null}if(kt)for(let h=c;r&&h;h=Li(h))h.draggable&&(r=void 0);if(c=L2(c,e),r){if(vn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let m=r.childNodes[i],b;m.nodeName=="IMG"&&(b=m.getBoundingClientRect()).right<=e.left&&b.bottom>e.top&&i++}let h;Ea&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(f=U2(n,r,i,e))}f==null&&(f=H2(n,c,e));let d=n.docView.nearestDesc(c,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function ab(n){return n.top<n.bottom||n.left<n.right}function zr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(ab(r))return r}return Array.prototype.find.call(t,ab)||n.getBoundingClientRect()}const V2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function P1(n,e,t){let{node:r,offset:i,atom:a}=n.docView.domFromPos(e,t<0?-1:1),c=Ea||vn;if(r.nodeType==3)if(c&&(V2.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let d=zr(tr(r,i,i),t);if(vn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=zr(tr(r,i-1,i-1),-1);if(h.top==d.top){let m=zr(tr(r,i,i+1),-1);if(m.top!=d.top)return Xl(m,m.left<h.left)}}return d}else{let d=i,h=i,m=t<0?1:-1;return t<0&&!i?(h++,m=-1):t>=0&&i==r.nodeValue.length?(d--,m=1):t<0?d--:h++,Xl(zr(tr(r,d,h),m),m<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&i&&(t<0||i==hn(r))){let d=r.childNodes[i-1];if(d.nodeType==1)return Pd(d.getBoundingClientRect(),!1)}if(a==null&&i<hn(r)){let d=r.childNodes[i];if(d.nodeType==1)return Pd(d.getBoundingClientRect(),!0)}return Pd(r.getBoundingClientRect(),t>=0)}if(a==null&&i&&(t<0||i==hn(r))){let d=r.childNodes[i-1],h=d.nodeType==3?tr(d,hn(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return Xl(zr(h,1),!1)}if(a==null&&i<hn(r)){let d=r.childNodes[i];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?tr(d,0,c?0:1):d.nodeType==1?d:null:null;if(h)return Xl(zr(h,-1),!0)}return Xl(zr(r.nodeType==3?tr(r):r,-t),t>=0)}function Xl(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Pd(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function I1(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function P2(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return I1(n,e,()=>{let{node:a}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(a,!0);if(!f)break;if(f.node.isBlock){a=f.contentDOM||f.dom;break}a=f.dom.parentNode}let c=P1(n,i.pos,1);for(let f=a.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=tr(f,0,f.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.bottom>m.top+1&&(t=="up"?c.top-m.top>(m.bottom-c.top)*2:m.bottom-c.bottom>(c.bottom-m.top)*2))return!1}}return!0})}const I2=/[\u0590-\u08ac]/;function F2(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=!i,c=i==r.parent.content.size,f=n.domSelection();return f?!I2.test(r.parent.textContent)||!f.modify?t=="left"||t=="backward"?a:c:I1(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:m,anchorOffset:b}=n.domSelectionRange(),x=f.caretBidiLevel;f.modify("move",t,"character");let S=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:v,focusOffset:N}=n.domSelectionRange(),C=v&&!S.contains(v.nodeType==1?v:v.parentNode)||d==v&&h==N;try{f.collapse(m,b),d&&(d!=m||h!=b)&&f.extend&&f.extend(d,h)}catch{}return x!=null&&(f.caretBidiLevel=x),C}):r.pos==r.start()||r.pos==r.end()}let ob=null,cb=null,ub=!1;function $2(n,e,t){return ob==e&&cb==t?ub:(ob=e,cb=t,ub=t=="up"||t=="down"?P2(n,e,t):F2(n,e,t))}const mn=0,fb=1,Ns=2,_n=3;class Ma{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=mn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,c;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(c)+c.size:this.posAtStart}else{let a,c;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(c):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>gt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let a=this.getDesc(i),c;if(a&&(!t||a.node))if(r&&(c=a.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))r=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],a=r+i.size;if(r==e&&a!=r){for(;!i.border&&i.children.length;)for(let c=0;c<i.children.length;c++){let f=i.children[c];if(f.size){i=f;break}}return i}if(e<a)return i.descAt(e-r-i.border);r=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let a=0;r<this.children.length;r++){let c=this.children[r],f=a+c.size;if(f>e||c instanceof $1){i=e-a;break}a=f}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof F1&&a.side>=0;r--);if(t<=0){let a,c=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,c=!1);return a&&t&&c&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?gt(a.dom)+1:0}}else{let a,c=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,c=!1);return a&&c&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?gt(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let c=r,f=0;;f++){let d=this.children[f],h=c+d.size;if(i==-1&&e<=h){let m=c+d.border;if(e>=m&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,m);e=c;for(let b=f;b>0;b--){let x=this.children[b-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){i=gt(x.dom)+1;break}e-=x.size}i==-1&&(i=0)}if(i>-1&&(h>t||f==this.children.length-1)){t=h;for(let m=f+1;m<this.children.length;m++){let b=this.children[m];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(-1)){a=gt(b.dom);break}t+=b.size}a==-1&&(a=this.contentDOM.childNodes.length);break}c=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let a=Math.min(e,t),c=Math.max(e,t);for(let S=0,v=0;S<this.children.length;S++){let N=this.children[S],C=v+N.size;if(a>v&&c<C)return N.setSelection(e-v-N.border,t-v-N.border,r,i);v=C}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),m=r.domSelectionRange(),b=!1;if((vn||kt)&&e==t){let{node:S,offset:v}=f;if(S.nodeType==3){if(b=!!(v&&S.nodeValue[v-1]==`
`),b&&v==S.nodeValue.length)for(let N=S,C;N;N=N.parentNode){if(C=N.nextSibling){C.nodeName=="BR"&&(f=d={node:C.parentNode,offset:gt(C)+1});break}let M=N.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let N=S.childNodes[v-1];b=N&&(N.nodeName=="BR"||N.contentEditable=="false")}}if(vn&&m.focusNode&&m.focusNode!=d.node&&m.focusNode.nodeType==1){let S=m.focusNode.childNodes[m.focusOffset];S&&S.contentEditable=="false"&&(i=!0)}if(!(i||b&&kt)&&Bs(f.node,f.offset,m.anchorNode,m.anchorOffset)&&Bs(d.node,d.offset,m.focusNode,m.focusOffset))return;let x=!1;if((h.extend||e==t)&&!b){h.collapse(f.node,f.offset);try{e!=t&&h.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(e>t){let v=f;f=d,d=v}let S=document.createRange();S.setEnd(d.node,d.offset),S.setStart(f.node,f.offset),h.removeAllRanges(),h.addRange(S)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let a=this.children[i],c=r+a.size;if(r==c?e<=c&&t>=r:e<c&&t>r){let f=r+a.border,d=c-a.border;if(e>=f&&t<=d){this.dirty=e==r||t==c?Ns:fb,e==f&&t==d&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=_n:a.markDirty(e-f,t-f);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Ns:_n}r=c}this.dirty=Ns}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Ns:fb;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class F1 extends Ma{constructor(e,t,r,i){let a,c=t.type.toDOM;if(typeof c=="function"&&(c=c(r,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(c.nodeType!=1){let f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==mn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Y2 extends Ma{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class zs extends Ma{constructor(e,t,r,i,a){super(e,[],r,i),this.mark=t,this.spec=a}static create(e,t,r,i){let a=i.nodeViews[t.type.name],c=a&&a(t,i,r);return(!c||!c.dom)&&(c=qs.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new zs(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&_n||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=_n&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=mn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=mn}}slice(e,t,r){let i=zs.create(this.parent,this.mark,!0,r),a=this.children,c=this.size;t<c&&(a=wh(a,t,c,r)),e>0&&(a=wh(a,0,e,r));for(let f=0;f<a.length;f++)a[f].parent=i;return i.children=a,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Yr extends Ma{constructor(e,t,r,i,a,c,f,d,h){super(e,[],a,c),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=f}static create(e,t,r,i,a,c){let f=a.nodeViews[t.type.name],d,h=f&&f(t,a,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},r,i),m=h&&h.dom,b=h&&h.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:b}=qs.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!b&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let x=m;return m=K1(m,r,t),h?d=new G2(e,t,r,i,m,b||null,x,h,a,c+1):t.isText?new Yc(e,t,r,i,m,x,a):new Yr(e,t,r,i,m,b||null,x,a,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>G.empty)}return e}matchesNode(e,t,r){return this.dirty==mn&&e.eq(this.node)&&wc(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,a=e.composing?this.localCompositionInfo(e,t):null,c=a&&a.pos>-1?a:null,f=a&&a.pos<0,d=new J2(this,c&&c.node,e);W2(this.node,this.innerDeco,(h,m,b)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!b&&d.syncToMarks(m==this.node.childCount?ze.none:this.node.child(m).marks,r,e),d.placeWidget(h,e,i)},(h,m,b,x)=>{d.syncToMarks(h.marks,r,e);let S;d.findNodeMatch(h,m,b,x)||f&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(S=d.findIndexWithChild(a.node))>-1&&d.updateNodeAt(h,m,b,S,e)||d.updateNextNode(h,m,b,e,x,i)||d.addNode(h,m,b,e,i),i+=h.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Ns)&&(c&&this.protectLocalComposition(e,c),Y1(this.contentDOM,this.children,e),Hi&&Z2(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof he)||r<t||i>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let c=a.nodeValue,f=eO(this.node.content,c,r-t,i-t);return f<0?null:{node:a,pos:f,text:c}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let c=new Y2(this,a,t,i);e.input.compositionNodes.push(c),this.children=wh(this.children,r,r+i.length,e,c)}update(e,t,r,i){return this.dirty==_n||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=mn}updateOuterDeco(e){if(wc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=G1(this.dom,this.nodeDOM,Sh(this.outerDeco,this.node,t),Sh(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function db(n,e,t,r,i){K1(r,e,n);let a=new Yr(void 0,n,e,t,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class Yc extends Yr{constructor(e,t,r,i,a,c,f){super(e,t,r,i,a,null,c,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==_n||this.dirty!=mn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=mn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=mn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),a=document.createTextNode(i.text);return new Yc(this.parent,i,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=_n)}get domAtom(){return!1}isText(e){return this.node.text==e}}class $1 extends Ma{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==mn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class G2 extends Yr{constructor(e,t,r,i,a,c,f,d,h,m){super(e,t,r,i,a,c,f,h,m),this.spec=d}update(e,t,r,i){if(this.dirty==_n)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,r);return a&&this.updateInner(e,t,r,i),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Y1(n,e,t){let r=n.firstChild,i=!1;for(let a=0;a<e.length;a++){let c=e[a],f=c.dom;if(f.parentNode==n){for(;f!=r;)r=hb(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(f,r);if(c instanceof zs){let d=r?r.previousSibling:n.lastChild;Y1(c.contentDOM,c.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=hb(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const sa=function(n){n&&(this.nodeName=n)};sa.prototype=Object.create(null);const Cs=[new sa];function Sh(n,e,t){if(n.length==0)return Cs;let r=t?Cs[0]:new sa,i=[r];for(let a=0;a<n.length;a++){let c=n[a].type.attrs;if(c){c.nodeName&&i.push(r=new sa(c.nodeName));for(let f in c){let d=c[f];d!=null&&(t&&i.length==1&&i.push(r=new sa(e.isInline?"span":"div")),f=="class"?r.class=(r.class?r.class+" ":"")+d:f=="style"?r.style=(r.style?r.style+";":"")+d:f!="nodeName"&&(r[f]=d))}}}return i}function G1(n,e,t,r){if(t==Cs&&r==Cs)return e;let i=e;for(let a=0;a<r.length;a++){let c=r[a],f=t[a];if(a){let d;f&&f.nodeName==c.nodeName&&i!=n&&(d=i.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(i),f=Cs[0]),i=d}K2(i,f||Cs[0],c)}return i}function K2(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)i.indexOf(r[a])==-1&&n.classList.remove(r[a]);for(let a=0;a<i.length;a++)r.indexOf(i[a])==-1&&n.classList.add(i[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function K1(n,e,t){return G1(n,n,Cs,Sh(e,t,n.nodeType!=1))}function wc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function hb(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class J2{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=X2(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,a=this.stack.length>>1,c=Math.min(a,e.length);for(;i<c&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=mn,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let f=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(e[a])&&!this.isLocked(h.dom)){f=d;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let d=zs.create(this.top,e[a],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,r,i){let a=-1,c;if(i>=this.preMatch.index&&(c=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,r))a=this.top.children.indexOf(c,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let h=this.top.children[f];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){a=f;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,r,i,a){let c=this.top.children[i];return c.dirty==_n&&c.dom==c.contentDOM&&(c.dirty=Ns),c.update(e,t,r,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,a,c){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof Yr){let h=this.preMatch.matched.get(d);if(h!=null&&h!=a)return!1;let m=d.dom,b,x=this.isLocked(m)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=_n&&wc(t,d.outerDeco));if(!x&&d.update(e,t,r,i))return this.destroyBetween(this.index,f),d.dom!=m&&(this.changed=!0),this.index++,!0;if(!x&&(b=this.recreateWrapper(d,e,t,r,i,c)))return this.destroyBetween(this.index,f),this.top.children[this.index]=b,b.contentDOM&&(b.dirty=Ns,b.updateChildren(i,c+1),b.dirty=mn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,a,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!wc(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let f=Yr.create(this.top,t,r,i,a,c);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,r,i,a){let c=Yr.create(this.top,e,t,r,i,a);c.contentDOM&&c.updateChildren(i,a+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new F1(this.top,e,t,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof zs;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Yc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((kt||Ct)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new $1(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function X2(n,e){let t=e,r=t.children.length,i=n.childCount,a=new Map,c=[];e:for(;i>0;){let f;for(;;)if(r){let h=t.children[r-1];if(h instanceof zs)t=h,r=h.children.length;else{f=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=n.child(i-1))break;--i,a.set(f,i),c.push(f)}}return{index:i,matched:a,matches:c.reverse()}}function Q2(n,e){return n.type.side-e.type.side}function W2(n,e,t,r){let i=e.locals(n),a=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let m=n.child(h);r(m,i,e.forChild(a,m),h),a+=m.nodeSize}return}let c=0,f=[],d=null;for(let h=0;;){let m,b;for(;c<i.length&&i[c].to==a;){let C=i[c++];C.widget&&(m?(b||(b=[m])).push(C):m=C)}if(m)if(b){b.sort(Q2);for(let C=0;C<b.length;C++)t(b[C],h,!!d)}else t(m,h,!!d);let x,S;if(d)S=-1,x=d,d=null;else if(h<n.childCount)S=h,x=n.child(h++);else break;for(let C=0;C<f.length;C++)f[C].to<=a&&f.splice(C--,1);for(;c<i.length&&i[c].from<=a&&i[c].to>a;)f.push(i[c++]);let v=a+x.nodeSize;if(x.isText){let C=v;c<i.length&&i[c].from<C&&(C=i[c].from);for(let M=0;M<f.length;M++)f[M].to<C&&(C=f[M].to);C<v&&(d=x.cut(C-a),x=x.cut(0,C-a),v=C,S=-1)}else for(;c<i.length&&i[c].to<v;)c++;let N=x.isInline&&!x.isLeaf?f.filter(C=>!C.inline):f.slice();r(x,N,e.forChild(a,x),S),a=v}}function Z2(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function eO(n,e,t,r){for(let i=0,a=0;i<n.childCount&&a<=r;){let c=n.child(i++),f=a;if(a+=c.nodeSize,!c.isText)continue;let d=c.text;for(;i<n.childCount;){let h=n.child(i++);if(a+=h.nodeSize,!h.isText)break;d+=h.text}if(a>=t){if(a>=r&&d.slice(r-e.length-f,r-f)==e)return r-e.length;let h=f<r?d.lastIndexOf(e,r-f-1):-1;if(h>=0&&h+e.length+f>=t)return f+h;if(t==r&&d.length>=r+e.length-f&&d.slice(r-f,r-f+e.length)==e)return r}}return-1}function wh(n,e,t,r,i){let a=[];for(let c=0,f=0;c<n.length;c++){let d=n[c],h=f,m=f+=d.size;h>=t||m<=e?a.push(d):(h<e&&a.push(d.slice(0,e-h,r)),i&&(a.push(i),i=void 0),m>t&&a.push(d.slice(t-h,d.size,r)))}return a}function Kh(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),a=i&&i.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let f=r.resolve(c),d,h;if($c(t)){for(d=c;i&&!i.node;)i=i.parent;let b=i.node;if(i&&b.isAtom&&ie.isSelectable(b)&&i.parent&&!(b.isInline&&M2(t.focusNode,t.focusOffset,i.dom))){let x=i.posBefore;h=new ie(c==x?f:r.resolve(x))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let b=c,x=c;for(let S=0;S<t.rangeCount;S++){let v=t.getRangeAt(S);b=Math.min(b,n.docView.posFromDOM(v.startContainer,v.startOffset,1)),x=Math.max(x,n.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(b<0)return null;[d,c]=x==n.state.selection.anchor?[x,b]:[b,x],f=r.resolve(c)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let m=r.resolve(d);if(!h){let b=e=="pointer"||n.state.selection.head<f.pos&&!a?1:-1;h=Jh(n,m,f,b)}return h}function J1(n){return n.editable?n.hasFocus():Q1(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ir(n,e=!1){let t=n.state.selection;if(X1(n,t),!!J1(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ct){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Bs(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)nO(n);else{let{anchor:r,head:i}=t,a,c;pb&&!(t instanceof he)&&(t.$from.parent.inlineContent||(a=mb(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=mb(n,t.to))),n.docView.setSelection(r,i,n,e),pb&&(a&&gb(a),c&&gb(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&tO(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const pb=kt||Ct&&L1<63;function mb(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,a=r?t.childNodes[r-1]:null;if(kt&&i&&i.contentEditable=="false")return Id(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return Id(i);if(a)return Id(a)}}function Id(n){return n.contentEditable="true",kt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function gb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function tO(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!J1(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function nO(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,gt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&qt&&$r<=11&&(r.disabled=!0,r.disabled=!1)}function X1(n,e){if(e instanceof ie){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(yb(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else yb(n)}function yb(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Jh(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||he.between(e,t,r)}function bb(n){return n.editable&&!n.hasFocus()?!1:Q1(n)}function Q1(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function rO(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Bs(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Nh(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),a=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return a&&ye.findFrom(a,e)}function Lr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function xb(n,e,t){let r=n.state.selection;if(r instanceof he)if(t.indexOf("s")>-1){let{$head:i}=r,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let c=n.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return Lr(n,new he(r.$anchor,c))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Nh(n.state,e);return i&&i instanceof ie?Lr(n,i):!1}else if(!(dn&&t.indexOf("m")>-1)){let i=r.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,c;if(!a||a.isText)return!1;let f=e<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(c=n.docView.descAt(f))&&!c.contentDOM?ie.isSelectable(a)?Lr(n,new ie(e<0?n.state.doc.resolve(i.pos-a.nodeSize):i)):Ea?Lr(n,new he(n.state.doc.resolve(e<0?f:f+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ie&&r.node.isInline)return Lr(n,new he(e>0?r.$to:r.$from));{let i=Nh(n.state,e);return i?Lr(n,i):!1}}}function Nc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ia(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ti(n,e){return e<0?sO(n):iO(n)}function sO(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,a,c=!1;for(vn&&t.nodeType==1&&r<Nc(t)&&ia(t.childNodes[r],-1)&&(c=!0);;)if(r>0){if(t.nodeType!=1)break;{let f=t.childNodes[r-1];if(ia(f,-1))i=t,a=--r;else if(f.nodeType==3)t=f,r=t.nodeValue.length;else break}}else{if(W1(t))break;{let f=t.previousSibling;for(;f&&ia(f,-1);)i=t.parentNode,a=gt(f),f=f.previousSibling;if(f)t=f,r=Nc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}c?Ch(n,t,r):i&&Ch(n,i,a)}function iO(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Nc(t),a,c;for(;;)if(r<i){if(t.nodeType!=1)break;let f=t.childNodes[r];if(ia(f,1))a=t,c=++r;else break}else{if(W1(t))break;{let f=t.nextSibling;for(;f&&ia(f,1);)a=f.parentNode,c=gt(f)+1,f=f.nextSibling;if(f)t=f,r=0,i=Nc(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}a&&Ch(n,a,c)}function W1(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function lO(n,e){for(;n&&e==n.childNodes.length&&!Ca(n);)e=gt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function aO(n,e){for(;n&&!e&&!Ca(n);)e=gt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Ch(n,e,t){if(e.nodeType!=3){let a,c;(c=lO(e,t))?(e=c,t=0):(a=aO(e,t))&&(e=a,t=a.nodeValue.length)}let r=n.domSelection();if(!r)return;if($c(r)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&ir(n)},50)}function vb(n,e){let t=n.state.doc.resolve(e);if(!(Ct||O2)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),c=(a.top+a.bottom)/2;if(c>i.top&&c<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),c=(a.top+a.bottom)/2;if(c>i.top&&c<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Sb(n,e,t){let r=n.state.selection;if(r instanceof he&&!r.empty||t.indexOf("s")>-1||dn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:a}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Nh(n.state,e);if(c&&c instanceof ie)return Lr(n,c)}if(!i.parent.inlineContent){let c=e<0?i:a,f=r instanceof en?ye.near(c,e):ye.findFrom(c,e);return f?Lr(n,f):!1}return!1}function wb(n,e){if(!(n.state.selection instanceof he))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let c=n.state.tr;return e<0?c.delete(t.pos-a.nodeSize,t.pos):c.delete(t.pos,t.pos+a.nodeSize),n.dispatch(c),!0}return!1}function Nb(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function oO(n){if(!kt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Nb(n,r,"true"),setTimeout(()=>Nb(n,r,"false"),20)}return!1}function cO(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function uO(n,e){let t=e.keyCode,r=cO(e);if(t==8||dn&&t==72&&r=="c")return wb(n,-1)||Ti(n,-1);if(t==46&&!e.shiftKey||dn&&t==68&&r=="c")return wb(n,1)||Ti(n,1);if(t==13||t==27)return!0;if(t==37||dn&&t==66&&r=="c"){let i=t==37?vb(n,n.state.selection.from)=="ltr"?-1:1:-1;return xb(n,i,r)||Ti(n,i)}else if(t==39||dn&&t==70&&r=="c"){let i=t==39?vb(n,n.state.selection.from)=="ltr"?1:-1:1;return xb(n,i,r)||Ti(n,i)}else{if(t==38||dn&&t==80&&r=="c")return Sb(n,-1,r)||Ti(n,-1);if(t==40||dn&&t==78&&r=="c")return oO(n)||Sb(n,1,r)||Ti(n,1);if(r==(dn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Xh(n,e){n.someProp("transformCopied",S=>{e=S(e,n)});let t=[],{content:r,openStart:i,openEnd:a}=e;for(;i>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,a--;let S=r.firstChild;t.push(S.type.name,S.attrs!=S.type.defaultAttrs?S.attrs:null),r=S.content}let c=n.someProp("clipboardSerializer")||qs.fromSchema(n.state.schema),f=sv(),d=f.createElement("div");d.appendChild(c.serializeFragment(r,{document:f}));let h=d.firstChild,m,b=0;for(;h&&h.nodeType==1&&(m=rv[h.nodeName.toLowerCase()]);){for(let S=m.length-1;S>=0;S--){let v=f.createElement(m[S]);for(;d.firstChild;)v.appendChild(d.firstChild);d.appendChild(v),b++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${a}${b?` -${b}`:""} ${JSON.stringify(t)}`);let x=n.someProp("clipboardTextSerializer",S=>S(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:x,slice:e}}function Z1(n,e,t,r,i){let a=i.parent.type.spec.code,c,f;if(!t&&!e)return null;let d=e&&(r||a||!t);if(d){if(n.someProp("transformPastedText",x=>{e=x(e,a||r,n)}),a)return e?new W(G.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):W.empty;let b=n.someProp("clipboardTextParser",x=>x(e,i,r,n));if(b)f=b;else{let x=i.marks(),{schema:S}=n.state,v=qs.fromSchema(S);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(N=>{let C=c.appendChild(document.createElement("p"));N&&C.appendChild(v.serializeNode(S.text(N,x)))})}}else n.someProp("transformPastedHTML",b=>{t=b(t,n)}),c=pO(t),Ea&&mO(c);let h=c&&c.querySelector("[data-pm-slice]"),m=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let b=+m[3];b>0;b--){let x=c.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;c=x}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||Fr.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||m),context:i,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!fO.test(x.parentNode.nodeName)?{ignore:!0}:null}})),m)f=gO(Cb(f,+m[1],+m[2]),m[4]);else if(f=W.maxOpen(dO(f.content,i),!0),f.openStart||f.openEnd){let b=0,x=0;for(let S=f.content.firstChild;b<f.openStart&&!S.type.spec.isolating;b++,S=S.firstChild);for(let S=f.content.lastChild;x<f.openEnd&&!S.type.spec.isolating;x++,S=S.lastChild);f=Cb(f,b,x)}return n.someProp("transformPasted",b=>{f=b(f,n)}),f}const fO=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function dO(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),a,c=[];if(n.forEach(f=>{if(!c)return;let d=i.findWrapping(f.type),h;if(!d)return c=null;if(h=c.length&&a.length&&tv(d,a,f,c[c.length-1],0))c[c.length-1]=h;else{c.length&&(c[c.length-1]=nv(c[c.length-1],a.length));let m=ev(f,d);c.push(m),i=i.matchType(m.type),a=d}}),c)return G.from(c)}return n}function ev(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,G.from(n));return n}function tv(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let a=tv(n,e,t,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(G.from(ev(t,n,i+1))))}}function nv(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,nv(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(G.empty,!0);return n.copy(t.append(r))}function Eh(n,e,t,r,i,a){let c=e<0?n.firstChild:n.lastChild,f=c.content;return n.childCount>1&&(a=0),i<r-1&&(f=Eh(f,e,t,r,i+1,a)),i>=t&&(f=e<0?c.contentMatchAt(0).fillBefore(f,a<=i).append(f):f.append(c.contentMatchAt(c.childCount).fillBefore(G.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(f))}function Cb(n,e,t){return e<n.openStart&&(n=new W(Eh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new W(Eh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const rv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Eb=null;function sv(){return Eb||(Eb=document.implementation.createHTMLDocument("title"))}let Fd=null;function hO(n){let e=window.trustedTypes;return e?(Fd||(Fd=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Fd.createHTML(n)):n}function pO(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=sv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&rv[r[1].toLowerCase()])&&(n=i.map(a=>"<"+a+">").join("")+n+i.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=hO(n),i)for(let a=0;a<i.length;a++)t=t.querySelector(i[a])||t;return t}function mO(n){let e=n.querySelectorAll(Ct?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function gO(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:a,openEnd:c}=n;for(let f=r.length-2;f>=0;f-=2){let d=t.nodes[r[f]];if(!d||d.hasRequiredAttrs())break;i=G.from(d.create(r[f+1],i)),a++,c++}return new W(i,a,c)}const Ot={},At={},yO={touchstart:!0,touchmove:!0};class bO{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function xO(n){for(let e in Ot){let t=Ot[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{SO(n,r)&&!Qh(n,r)&&(n.editable||!(r.type in At))&&t(n,r)},yO[e]?{passive:!0}:void 0)}kt&&n.dom.addEventListener("input",()=>null),Mh(n)}function Pr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function vO(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Mh(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Qh(n,r))})}function Qh(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function SO(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function wO(n,e){!Qh(n,e)&&Ot[e.type]&&(n.editable||!(e.type in At))&&Ot[e.type](n,e)}At.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!lv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(nr&&Ct&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Hi&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,vs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||uO(n,t)?t.preventDefault():Pr(n,"key")};At.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};At.keypress=(n,e)=>{let t=e;if(lv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||dn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof he)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),a=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",c=>c(n,r.$from.pos,r.$to.pos,i,a))&&n.dispatch(a()),t.preventDefault()}};function Gc(n){return{left:n.clientX,top:n.clientY}}function NO(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Wh(n,e,t,r,i){if(r==-1)return!1;let a=n.state.doc.resolve(r);for(let c=a.depth+1;c>0;c--)if(n.someProp(e,f=>c>a.depth?f(n,t,a.nodeAfter,a.before(c),i,!0):f(n,t,a.node(c),a.before(c),i,!1)))return!0;return!1}function Bi(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function CO(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ie.isSelectable(r)?(Bi(n,new ie(t)),!0):!1}function EO(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof ie&&(r=t.node);let a=n.state.doc.resolve(e);for(let c=a.depth+1;c>0;c--){let f=c>a.depth?a.nodeAfter:a.node(c);if(ie.isSelectable(f)){r&&t.$from.depth>0&&c>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?i=a.before(t.$from.depth):i=a.before(c);break}}return i!=null?(Bi(n,ie.create(n.state.doc,i)),!0):!1}function MO(n,e,t,r,i){return Wh(n,"handleClickOn",e,t,r)||n.someProp("handleClick",a=>a(n,e,r))||(i?EO(n,t):CO(n,t))}function TO(n,e,t,r){return Wh(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function kO(n,e,t,r){return Wh(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||OO(n,t,r)}function OO(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Bi(n,he.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let a=i.depth+1;a>0;a--){let c=a>i.depth?i.nodeAfter:i.node(a),f=i.before(a);if(c.inlineContent)Bi(n,he.create(r,f+1,f+1+c.content.size));else if(ie.isSelectable(c))Bi(n,ie.create(r,f));else continue;return!0}}function Zh(n){return Cc(n)}const iv=dn?"metaKey":"ctrlKey";Ot.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Zh(n),i=Date.now(),a="singleClick";i-n.input.lastClick.time<500&&NO(t,n.input.lastClick)&&!t[iv]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:a,button:t.button};let c=n.posAtCoords(Gc(t));c&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new AO(n,c,t,!!r)):(a=="doubleClick"?TO:kO)(n,c.pos,c.inside,t)?t.preventDefault():Pr(n,"pointer"))};class AO{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[iv],this.allowDefault=r.shiftKey;let a,c;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),c=t.inside;else{let m=e.state.doc.resolve(t.pos);a=m.parent,c=m.depth?m.before():0}const f=i?null:r.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.dom.nodeType==1?d.dom:null;let{selection:h}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||h instanceof ie&&h.from<=c&&h.to>c)&&(this.mightDrag={node:a,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&vn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Pr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ir(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Gc(e))),this.updateAllowDefault(e),this.allowDefault||!t?Pr(this.view,"pointer"):MO(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||kt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ct&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Bi(this.view,ye.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Pr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Pr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ot.touchstart=n=>{n.input.lastTouch=Date.now(),Zh(n),Pr(n,"pointer")};Ot.touchmove=n=>{n.input.lastTouch=Date.now(),Pr(n,"pointer")};Ot.contextmenu=n=>Zh(n);function lv(n,e){return n.composing?!0:kt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const DO=nr?5e3:-1;At.compositionstart=At.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof he&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Cc(n,!0),n.markCursor=null;else if(Cc(n,!e.selection.empty),vn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,a=r.focusOffset;i&&i.nodeType==1&&a!=0;){let c=a<0?i.lastChild:i.childNodes[a-1];if(!c)break;if(c.nodeType==3){let f=n.domSelection();f&&f.collapse(c,c.nodeValue.length);break}else i=c,a=-1}}n.input.composing=!0}av(n,DO)};At.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,av(n,20))};function av(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Cc(n),e))}function ov(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=jO());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function RO(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=C2(e.focusNode,e.focusOffset),r=E2(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||r==a)return a;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return r}}return t||r}function jO(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Cc(n,e=!1){if(!(nr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ov(n),e||n.docView&&n.docView.dirty){let t=Kh(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function _O(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const ha=qt&&$r<15||Hi&&A2<604;Ot.copy=At.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let a=ha?null:t.clipboardData,c=r.content(),{dom:f,text:d}=Xh(n,c);a?(t.preventDefault(),a.clearData(),a.setData("text/html",f.innerHTML),a.setData("text/plain",d)):_O(n,f),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function BO(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function zO(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?pa(n,r.value,null,i,e):pa(n,r.textContent,r.innerHTML,i,e)},50)}function pa(n,e,t,r,i){let a=Z1(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,i,a||W.empty)))return!0;if(!a)return!1;let c=BO(a),f=c?n.state.tr.replaceSelectionWith(c,r):n.state.tr.replaceSelection(a);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function cv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}At.paste=(n,e)=>{let t=e;if(n.composing&&!nr)return;let r=ha?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&pa(n,cv(r),r.getData("text/html"),i,t)?t.preventDefault():zO(n,t)};class uv{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const LO=dn?"altKey":"ctrlKey";function fv(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[LO]}Ot.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,a=i.empty?null:n.posAtCoords(Gc(t)),c;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof ie?i.to-1:i.to))){if(r&&r.mightDrag)c=ie.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let b=n.docView.nearestDesc(t.target,!0);b&&b.node.type.spec.draggable&&b!=n.docView&&(c=ie.create(n.state.doc,b.posBefore))}}let f=(c||n.state.selection).content(),{dom:d,text:h,slice:m}=Xh(n,f);(!t.dataTransfer.files.length||!Ct||L1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ha?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",ha||t.dataTransfer.setData("text/plain",h),n.dragging=new uv(m,fv(n,t),c)};Ot.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};At.dragover=At.dragenter=(n,e)=>e.preventDefault();At.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Gc(t));if(!i)return;let a=n.state.doc.resolve(i.pos),c=r&&r.slice;c?n.someProp("transformPasted",v=>{c=v(c,n)}):c=Z1(n,cv(t.dataTransfer),ha?null:t.dataTransfer.getData("text/html"),!1,a);let f=!!(r&&fv(n,t));if(n.someProp("handleDrop",v=>v(n,t,c||W.empty,f))){t.preventDefault();return}if(!c)return;t.preventDefault();let d=c?O1(n.state.doc,a.pos,c):a.pos;d==null&&(d=a.pos);let h=n.state.tr;if(f){let{node:v}=r;v?v.replace(h):h.deleteSelection()}let m=h.mapping.map(d),b=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,x=h.doc;if(b?h.replaceRangeWith(m,m,c.content.firstChild):h.replaceRange(m,m,c),h.doc.eq(x))return;let S=h.doc.resolve(m);if(b&&ie.isSelectable(c.content.firstChild)&&S.nodeAfter&&S.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new ie(S));else{let v=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((N,C,M,_)=>v=_),h.setSelection(Jh(n,S,h.doc.resolve(v)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};Ot.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ir(n)},20))};Ot.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Ot.beforeinput=(n,e)=>{if(Ct&&nr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,vs(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in At)Ot[n]=At[n];function ma(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ec{constructor(e,t){this.toDOM=e,this.spec=t||Os,this.side=this.spec.side||0}map(e,t,r,i){let{pos:a,deleted:c}=e.mapResult(t.from+i,this.side<0?-1:1);return c?null:new pn(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ec&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ma(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Gr{constructor(e,t){this.attrs=e,this.spec=t||Os}map(e,t,r,i){let a=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,c=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return a>=c?null:new pn(a,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Gr&&ma(this.attrs,e.attrs)&&ma(this.spec,e.spec)}static is(e){return e.type instanceof Gr}destroy(){}}class ep{constructor(e,t){this.attrs=e,this.spec=t||Os}map(e,t,r,i){let a=e.mapResult(t.from+i,1);if(a.deleted)return null;let c=e.mapResult(t.to+i,-1);return c.deleted||c.pos<=a.pos?null:new pn(a.pos-r,c.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),a;return i==t.from&&!(a=e.child(r)).isText&&i+a.nodeSize==t.to}eq(e){return this==e||e instanceof ep&&ma(this.attrs,e.attrs)&&ma(this.spec,e.spec)}destroy(){}}class pn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new pn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new pn(e,e,new Ec(t,r))}static inline(e,t,r,i){return new pn(e,t,new Gr(r,i))}static node(e,t,r,i){return new pn(e,t,new ep(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Gr}get widget(){return this.type instanceof Ec}}const Ai=[],Os={};class tt{constructor(e,t){this.local=e.length?e:Ai,this.children=t.length?t:Ai}static create(e,t){return t.length?Mc(t,e,0,Os):wt}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,a){for(let c=0;c<this.local.length;c++){let f=this.local[c];f.from<=t&&f.to>=e&&(!a||a(f.spec))&&r.push(f.copy(f.from+i,f.to+i))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let f=this.children[c]+1;this.children[c+2].findInner(e-f,t-f,r,i+f,a)}}map(e,t,r){return this==wt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Os)}mapInner(e,t,r,i,a){let c;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,r,i);d&&d.type.valid(t,d)?(c||(c=[])).push(d):a.onRemove&&a.onRemove(this.local[f].spec)}return this.children.length?HO(this.children,c||[],e,t,r,i,a):c?new tt(c.sort(As),Ai):wt}add(e,t){return t.length?this==wt?tt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,a=0;e.forEach((f,d)=>{let h=d+r,m;if(m=hv(t,f,h)){for(i||(i=this.children.slice());a<i.length&&i[a]<d;)a+=3;i[a]==d?i[a+2]=i[a+2].addInner(f,m,h+1):i.splice(a,0,d,d+f.nodeSize,Mc(m,f,h+1,Os)),a+=3}});let c=dv(a?pv(t):t,-r);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||c.splice(f--,1);return new tt(c.length?this.local.concat(c).sort(As):this.local,i||this.children)}remove(e){return e.length==0||this==wt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let a=0;a<r.length;a+=3){let c,f=r[a]+t,d=r[a+1]+t;for(let m=0,b;m<e.length;m++)(b=e[m])&&b.from>f&&b.to<d&&(e[m]=null,(c||(c=[])).push(b));if(!c)continue;r==this.children&&(r=this.children.slice());let h=r[a+2].removeInner(c,f+1);h!=wt?r[a+2]=h:(r.splice(a,3),a-=3)}if(i.length){for(let a=0,c;a<e.length;a++)if(c=e[a])for(let f=0;f<i.length;f++)i[f].eq(c,t)&&(i==this.local&&(i=this.local.slice()),i.splice(f--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new tt(i,r):wt}forChild(e,t){if(this==wt)return this;if(t.isLeaf)return tt.empty;let r,i;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(r=this.children[f+2]);break}let a=e+1,c=a+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<c&&d.to>a&&d.type instanceof Gr){let h=Math.max(a,d.from)-a,m=Math.min(c,d.to)-a;h<m&&(i||(i=[])).push(d.copy(h,m))}}if(i){let f=new tt(i.sort(As),Ai);return r?new Ur([f,r]):f}return r||wt}eq(e){if(this==e)return!0;if(!(e instanceof tt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return tp(this.localsInner(e))}localsInner(e){if(this==wt)return Ai;if(e.inlineContent||!this.local.some(Gr.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Gr||t.push(this.local[r]);return t}forEachSet(e){e(this)}}tt.empty=new tt([],[]);tt.removeOverlap=tp;const wt=tt.empty;class Ur{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Os));return Ur.from(r)}forChild(e,t){if(t.isLeaf)return tt.empty;let r=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(e,t);a!=wt&&(a instanceof Ur?r=r.concat(a.members):r.push(a))}return Ur.from(r)}eq(e){if(!(e instanceof Ur)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(e);if(a.length)if(!t)t=a;else{r&&(t=t.slice(),r=!1);for(let c=0;c<a.length;c++)t.push(a[c])}}return t?tp(r?t:t.sort(As)):Ai}static from(e){switch(e.length){case 0:return wt;case 1:return e[0];default:return new Ur(e.every(t=>t instanceof tt)?e:e.reduce((t,r)=>t.concat(r instanceof tt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function HO(n,e,t,r,i,a,c){let f=n.slice();for(let h=0,m=a;h<t.maps.length;h++){let b=0;t.maps[h].forEach((x,S,v,N)=>{let C=N-v-(S-x);for(let M=0;M<f.length;M+=3){let _=f[M+1];if(_<0||x>_+m-b)continue;let q=f[M]+m-b;S>=q?f[M+1]=x<=q?-2:-1:x>=m&&C&&(f[M]+=C,f[M+1]+=C)}b+=C}),m=t.maps[h].map(m,-1)}let d=!1;for(let h=0;h<f.length;h+=3)if(f[h+1]<0){if(f[h+1]==-2){d=!0,f[h+1]=-1;continue}let m=t.map(n[h]+a),b=m-i;if(b<0||b>=r.content.size){d=!0;continue}let x=t.map(n[h+1]+a,-1),S=x-i,{index:v,offset:N}=r.content.findIndex(b),C=r.maybeChild(v);if(C&&N==b&&N+C.nodeSize==S){let M=f[h+2].mapInner(t,C,m+1,n[h]+a+1,c);M!=wt?(f[h]=b,f[h+1]=S,f[h+2]=M):(f[h+1]=-2,d=!0)}else d=!0}if(d){let h=UO(f,n,e,t,i,a,c),m=Mc(h,r,0,c);e=m.local;for(let b=0;b<f.length;b+=3)f[b+1]<0&&(f.splice(b,3),b-=3);for(let b=0,x=0;b<m.children.length;b+=3){let S=m.children[b];for(;x<f.length&&f[x]<S;)x+=3;f.splice(x,0,m.children[b],m.children[b+1],m.children[b+2])}}return new tt(e.sort(As),f)}function dv(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new pn(i.from+e,i.to+e,i.type))}return t}function UO(n,e,t,r,i,a,c){function f(d,h){for(let m=0;m<d.local.length;m++){let b=d.local[m].map(r,i,h);b?t.push(b):c.onRemove&&c.onRemove(d.local[m].spec)}for(let m=0;m<d.children.length;m+=3)f(d.children[m+2],d.children[m]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&f(n[d+2],e[d]+a+1);return t}function hv(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let a=0,c;a<n.length;a++)(c=n[a])&&c.from>t&&c.to<r&&((i||(i=[])).push(c),n[a]=null);return i}function pv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Mc(n,e,t,r){let i=[],a=!1;e.forEach((f,d)=>{let h=hv(n,f,d+t);if(h){a=!0;let m=Mc(h,f,t+d+1,r);m!=wt&&i.push(d,d+f.nodeSize,m)}});let c=dv(a?pv(n):n,-t).sort(As);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||(r.onRemove&&r.onRemove(c[f].spec),c.splice(f--,1));return c.length||i.length?new tt(c,i):wt}function As(n,e){return n.from-e.from||n.to-e.to}function tp(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let a=e[i];if(a.from==r.from){a.to!=r.to&&(e==n&&(e=n.slice()),e[i]=a.copy(a.from,r.to),Mb(e,i+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,a.from),Mb(e,i,r.copy(a.from,r.to)));break}}}return e}function Mb(n,e,t){for(;e<n.length&&As(t,n[e])>0;)e++;n.splice(e,0,t)}function $d(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=wt&&e.push(r)}),n.cursorWrapper&&e.push(tt.create(n.state.doc,[n.cursorWrapper.deco])),Ur.from(e)}const qO={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},VO=qt&&$r<=11;class PO{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class IO{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new PO,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);qt&&$r<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),VO&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qO)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(bb(this.view)){if(this.suppressingSelectionUpdates)return ir(this.view);if(qt&&$r<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Bs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let a=e.focusNode;a;a=Li(a))t.add(a);for(let a=e.anchorNode;a;a=Li(a))if(t.has(a)){r=a;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&bb(e)&&!this.ignoreSelectionChange(r),a=-1,c=-1,f=!1,d=[];if(e.editable)for(let m=0;m<t.length;m++){let b=this.registerMutation(t[m],d);b&&(a=a<0?b.from:Math.min(b.from,a),c=c<0?b.to:Math.max(b.to,c),b.typeOver&&(f=!0))}if(vn&&d.length){let m=d.filter(b=>b.nodeName=="BR");if(m.length==2){let[b,x]=m;b.parentNode&&b.parentNode.parentNode==x.parentNode?x.remove():b.remove()}else{let{focusNode:b}=this.currentSelection;for(let x of m){let S=x.parentNode;S&&S.nodeName=="LI"&&(!b||YO(e,b)!=S)&&x.remove()}}}let h=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&$c(r)&&(h=Kh(e))&&h.eq(ye.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ir(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,c),FO(e)),this.handleDOMChange(a,c,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ir(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let b=e.addedNodes[m];t.push(b),b.nodeType==3&&(this.lastChangedTextNode=b)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,a=e.nextSibling;if(qt&&$r<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:b,nextSibling:x}=e.addedNodes[m];(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(i=b),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(a=x)}let c=i&&i.parentNode==e.target?gt(i)+1:0,f=r.localPosFromDOM(e.target,c,-1),d=a&&a.parentNode==e.target?gt(a):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:f,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Tb=new WeakMap,kb=!1;function FO(n){if(!Tb.has(n)&&(Tb.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=vn,kb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),kb=!0}}function Ob(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return Bs(c.node,c.offset,i,a)&&([t,r,i,a]=[i,a,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:a}}function $O(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Ob(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Ob(n,t):null}function YO(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function GO(n,e,t){let{node:r,fromOffset:i,toOffset:a,from:c,to:f}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,m=d.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(h=[{node:m,offset:d.anchorOffset}],$c(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Ct&&n.input.lastKeyCode===8)for(let C=a;C>i;C--){let M=r.childNodes[C-1],_=M.pmViewDesc;if(M.nodeName=="BR"&&!_){a=C;break}if(!_||_.size)break}let b=n.state.doc,x=n.someProp("domParser")||Fr.fromSchema(n.state.schema),S=b.resolve(c),v=null,N=x.parse(r,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:i,to:a,preserveWhitespace:S.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:KO,context:S});if(h&&h[0].pos!=null){let C=h[0].pos,M=h[1]&&h[1].pos;M==null&&(M=C),v={anchor:C+c,head:M+c}}return{doc:N,sel:v,from:c,to:f}}function KO(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(kt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||kt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const JO=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function XO(n,e,t,r,i){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let L=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,J=Kh(n,L);if(J&&!n.state.selection.eq(J)){if(Ct&&nr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",re=>re(n,vs(13,"Enter"))))return;let le=n.state.tr.setSelection(J);L=="pointer"?le.setMeta("pointer",!0):L=="key"&&le.scrollIntoView(),a&&le.setMeta("composition",a),n.dispatch(le)}return}let c=n.state.doc.resolve(e),f=c.sharedDepth(t);e=c.before(f+1),t=n.state.doc.resolve(t).after(f+1);let d=n.state.selection,h=GO(n,e,t),m=n.state.doc,b=m.slice(h.from,h.to),x,S;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(x=n.state.selection.to,S="end"):(x=n.state.selection.from,S="start"),n.input.lastKeyCode=null;let v=ZO(b.content,h.doc.content,h.from,x,S);if(v&&n.input.domChangeCount++,(Hi&&n.input.lastIOSEnter>Date.now()-225||nr)&&i.some(L=>L.nodeType==1&&!JO.test(L.nodeName))&&(!v||v.endA>=v.endB)&&n.someProp("handleKeyDown",L=>L(n,vs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!v)if(r&&d instanceof he&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))v={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let L=Ab(n,n.state.doc,h.sel);if(L&&!L.eq(n.state.selection)){let J=n.state.tr.setSelection(L);a&&J.setMeta("composition",a),n.dispatch(J)}}return}n.state.selection.from<n.state.selection.to&&v.start==v.endB&&n.state.selection instanceof he&&(v.start>n.state.selection.from&&v.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?v.start=n.state.selection.from:v.endA<n.state.selection.to&&v.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(v.endB+=n.state.selection.to-v.endA,v.endA=n.state.selection.to)),qt&&$r<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>h.from&&h.doc.textBetween(v.start-h.from-1,v.start-h.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let N=h.doc.resolveNoCache(v.start-h.from),C=h.doc.resolveNoCache(v.endB-h.from),M=m.resolve(v.start),_=N.sameParent(C)&&N.parent.inlineContent&&M.end()>=v.endA,q;if((Hi&&n.input.lastIOSEnter>Date.now()-225&&(!_||i.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!_&&N.pos<h.doc.content.size&&(!N.sameParent(C)||!N.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(N.pos,C.pos,"",""))&&(q=ye.findFrom(h.doc.resolve(N.pos+1),1,!0))&&q.head>N.pos)&&n.someProp("handleKeyDown",L=>L(n,vs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>v.start&&WO(m,v.start,v.endA,N,C)&&n.someProp("handleKeyDown",L=>L(n,vs(8,"Backspace")))){nr&&Ct&&n.domObserver.suppressSelectionUpdates();return}Ct&&v.endB==v.start&&(n.input.lastChromeDelete=Date.now()),nr&&!_&&N.start()!=C.start()&&C.parentOffset==0&&N.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==v.endA&&(v.endB-=2,C=h.doc.resolveNoCache(v.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(L){return L(n,vs(13,"Enter"))})},20));let K=v.start,F=v.endA,Z=L=>{let J=L||n.state.tr.replace(K,F,h.doc.slice(v.start-h.from,v.endB-h.from));if(h.sel){let le=Ab(n,J.doc,h.sel);le&&!(Ct&&n.composing&&le.empty&&(v.start!=v.endB||n.input.lastChromeDelete<Date.now()-100)&&(le.head==K||le.head==J.mapping.map(F)-1)||qt&&le.empty&&le.head==K)&&J.setSelection(le)}return a&&J.setMeta("composition",a),J.scrollIntoView()},Y;if(_){if(N.pos==C.pos){qt&&$r<=11&&N.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ir(n),20));let L=Z(n.state.tr.delete(K,F)),J=m.resolve(v.start).marksAcross(m.resolve(v.endA));J&&L.ensureMarks(J),n.dispatch(L)}else if(v.endA==v.endB&&(Y=QO(N.parent.content.cut(N.parentOffset,C.parentOffset),M.parent.content.cut(M.parentOffset,v.endA-M.start())))){let L=Z(n.state.tr);Y.type=="add"?L.addMark(K,F,Y.mark):L.removeMark(K,F,Y.mark),n.dispatch(L)}else if(N.parent.child(N.index()).isText&&N.index()==C.index()-(C.textOffset?0:1)){let L=N.parent.textBetween(N.parentOffset,C.parentOffset),J=()=>Z(n.state.tr.insertText(L,K,F));n.someProp("handleTextInput",le=>le(n,K,F,L,J))||n.dispatch(J())}}else n.dispatch(Z())}function Ab(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Jh(n,e.resolve(t.anchor),e.resolve(t.head))}function QO(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,a=r,c,f,d;for(let m=0;m<r.length;m++)i=r[m].removeFromSet(i);for(let m=0;m<t.length;m++)a=t[m].removeFromSet(a);if(i.length==1&&a.length==0)f=i[0],c="add",d=m=>m.mark(f.addToSet(m.marks));else if(i.length==0&&a.length==1)f=a[0],c="remove",d=m=>m.mark(f.removeFromSet(m.marks));else return null;let h=[];for(let m=0;m<e.childCount;m++)h.push(d(e.child(m)));if(G.from(h).eq(n))return{mark:f,type:c}}function WO(n,e,t,r,i){if(t-e<=i.pos-r.pos||Yd(r,!0,!1)<i.pos)return!1;let a=n.resolve(e);if(!r.parent.isTextblock){let f=a.nodeAfter;return f!=null&&t==e+f.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let c=n.resolve(Yd(a,!0,!0));return!c.parent.isTextblock||c.pos>t||Yd(c,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(c.parent.content)}function Yd(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let a=n.node(r).maybeChild(n.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function ZO(n,e,t,r,i){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:c,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let d=Math.max(0,a-Math.min(c,f));r-=c+d-a}if(c<a&&n.size<e.size){let d=r<=a&&r>=c?a-r:0;a-=d,a&&a<e.size&&Db(e.textBetween(a-1,a+1))&&(a+=d?1:-1),f=a+(f-c),c=a}else if(f<a){let d=r<=a&&r>=f?a-r:0;a-=d,a&&a<n.size&&Db(n.textBetween(a-1,a+1))&&(a+=d?1:-1),c=a+(c-f),f=a}return{start:a,endA:c,endB:f}}function Db(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class mv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new bO,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(zb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_b(this),jb(this),this.nodeViews=Bb(this),this.docView=db(this.state.doc,Rb(this),$d(this),this.dom,this),this.domObserver=new IO(this,(r,i,a,c)=>XO(this,r,i,a,c)),this.domObserver.start(),xO(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Mh(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(zb),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,a=!1,c=!1;e.storedMarks&&this.composing&&(ov(this),c=!0),this.state=e;let f=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let S=Bb(this);tA(S,this.nodeViews)&&(this.nodeViews=S,a=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&Mh(this),this.editable=_b(this),jb(this);let d=$d(this),h=Rb(this),m=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",b=a||!this.docView.matchesNode(e.doc,h,d);(b||!e.selection.eq(i.selection))&&(c=!0);let x=m=="preserve"&&c&&this.dom.style.overflowAnchor==null&&j2(this);if(c){this.domObserver.stop();let S=b&&(qt||Ct)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&eA(i.selection,e.selection);if(b){let v=Ct?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=RO(this)),(a||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=db(e.doc,h,d,this.dom,this)),v&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rO(this))?ir(this,S):(X1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():x&&_2(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ie){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&lb(this,t.getBoundingClientRect(),e)}else lb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let a=r.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(i=a)}this.dragging=new uv(e.slice,e.move,i<0?void 0:ie.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let c=0;c<this.directPlugins.length;c++){let f=this.directPlugins[c].props[e];if(f!=null&&(i=t?t(f):f))return i}let a=this.state.plugins;if(a)for(let c=0;c<a.length;c++){let f=a[c].props[e];if(f!=null&&(i=t?t(f):f))return i}}hasFocus(){if(qt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&B2(this.dom),ir(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return q2(this,e)}coordsAtPos(e,t=1){return P1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return $2(this,t||this.state,e)}pasteHTML(e,t){return pa(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return pa(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Xh(this,e)}destroy(){this.docView&&(vO(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],$d(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,w2())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return wO(this,e)}domSelectionRange(){let e=this.domSelection();return e?kt&&this.root.nodeType===11&&T2(this.dom.ownerDocument)==this.dom&&$O(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}mv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Rb(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[pn.node(0,n.state.doc.content.size,e)]}function jb(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:pn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function _b(n){return!n.someProp("editable",e=>e(n.state)===!1)}function eA(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Bb(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function tA(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function zb(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Jr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Tc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nA=typeof navigator<"u"&&/Mac/.test(navigator.platform),rA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yt=0;yt<10;yt++)Jr[48+yt]=Jr[96+yt]=String(yt);for(var yt=1;yt<=24;yt++)Jr[yt+111]="F"+yt;for(var yt=65;yt<=90;yt++)Jr[yt]=String.fromCharCode(yt+32),Tc[yt]=String.fromCharCode(yt);for(var Gd in Jr)Tc.hasOwnProperty(Gd)||(Tc[Gd]=Jr[Gd]);function sA(n){var e=nA&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||rA&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Tc:Jr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const iA=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),lA=typeof navigator<"u"&&/Win/.test(navigator.platform);function aA(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,a,c;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))iA?c=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),c&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function oA(n){let e=Object.create(null);for(let t in n)e[aA(t)]=n[t];return e}function Kd(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function cA(n){return new Vt({props:{handleKeyDown:gv(n)}})}function gv(n){let e=oA(n);return function(t,r){let i=sA(r),a,c=e[Kd(i,r)];if(c&&c(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let f=e[Kd(i,r,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(lA&&r.ctrlKey&&r.altKey)&&(a=Jr[r.keyCode])&&a!=i){let f=e[Kd(a,r)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}const np=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function yv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const bv=(n,e,t)=>{let r=yv(n,t);if(!r)return!1;let i=rp(r);if(!i){let c=r.blockRange(),f=c&&$i(c);return f==null?!1:(e&&e(n.tr.lift(c,f).scrollIntoView()),!0)}let a=i.nodeBefore;if(Tv(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Ui(a,"end")||ie.isSelectable(a)))for(let c=r.depth;;c--){let f=Ic(n.doc,r.before(c),r.after(c),W.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=n.tr.step(f);d.setSelection(Ui(a,"end")?ye.findFrom(d.doc.resolve(d.mapping.map(i.pos,-1)),-1):ie.create(d.doc,i.pos-a.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||r.node(c-1).childCount>1)break}return a.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},uA=(n,e,t)=>{let r=yv(n,t);if(!r)return!1;let i=rp(r);return i?xv(n,i,e):!1},fA=(n,e,t)=>{let r=Sv(n,t);if(!r)return!1;let i=sp(r);return i?xv(n,i,e):!1};function xv(n,e,t){let r=e.nodeBefore,i=r,a=e.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let m=i.lastChild;if(!m)return!1;i=m}let c=e.nodeAfter,f=c,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let m=f.firstChild;if(!m)return!1;f=m}let h=Ic(n.doc,a,d,W.empty);if(!h||h.from!=a||h instanceof at&&h.slice.size>=d-a)return!1;if(t){let m=n.tr.step(h);m.setSelection(he.create(m.doc,a)),t(m.scrollIntoView())}return!0}function Ui(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const vv=(n,e,t)=>{let{$head:r,empty:i}=n.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;a=rp(r)}let c=a&&a.nodeBefore;return!c||!ie.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ie.create(n.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)};function rp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Sv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const wv=(n,e,t)=>{let r=Sv(n,t);if(!r)return!1;let i=sp(r);if(!i)return!1;let a=i.nodeAfter;if(Tv(n,i,e,1))return!0;if(r.parent.content.size==0&&(Ui(a,"start")||ie.isSelectable(a))){let c=Ic(n.doc,r.before(),r.after(),W.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection(Ui(a,"start")?ye.findFrom(f.doc.resolve(f.mapping.map(i.pos)),1):ie.create(f.doc,f.mapping.map(i.pos))),e(f.scrollIntoView())}return!0}}return a.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},Nv=(n,e,t)=>{let{$head:r,empty:i}=n.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;a=sp(r)}let c=a&&a.nodeAfter;return!c||!ie.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ie.create(n.doc,a.pos)).scrollIntoView()),!0)};function sp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const dA=(n,e)=>{let t=n.selection,r=t instanceof ie,i;if(r){if(t.node.isTextblock||!Xr(n.doc,t.from))return!1;i=t.from}else if(i=Pc(n.doc,t.from,-1),i==null)return!1;if(e){let a=n.tr.join(i);r&&a.setSelection(ie.create(a.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},hA=(n,e)=>{let t=n.selection,r;if(t instanceof ie){if(t.node.isTextblock||!Xr(n.doc,t.to))return!1;r=t.to}else if(r=Pc(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},pA=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),a=i&&$i(i);return a==null?!1:(e&&e(n.tr.lift(i,a).scrollIntoView()),!0)},Cv=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function ip(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const mA=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),a=t.indexAfter(-1),c=ip(i.contentMatchAt(a));if(!c||!i.canReplaceWith(a,a,c))return!1;if(e){let f=t.after(),d=n.tr.replaceWith(f,f,c.createAndFill());d.setSelection(ye.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},Ev=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof en||r.parent.inlineContent||i.parent.inlineContent)return!1;let a=ip(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let c=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,f=n.tr.insert(c,a.createAndFill());f.setSelection(he.create(f.doc,c+1)),e(f.scrollIntoView())}return!0},Mv=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(sr(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let r=t.blockRange(),i=r&&$i(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function gA(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ie&&e.selection.node.isBlock)return!r.parentOffset||!sr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],c,f,d=!1,h=!1;for(let S=r.depth;;S--)if(r.node(S).isBlock){d=r.end(S)==r.pos+(r.depth-S),h=r.start(S)==r.pos-(r.depth-S),f=ip(r.node(S-1).contentMatchAt(r.indexAfter(S-1))),a.unshift(d&&f?{type:f}:null),c=S;break}else{if(S==1)return!1;a.unshift(null)}let m=e.tr;(e.selection instanceof he||e.selection instanceof en)&&m.deleteSelection();let b=m.mapping.map(r.pos),x=sr(m.doc,b,a.length,a);if(x||(a[0]=f?{type:f}:null,x=sr(m.doc,b,a.length,a)),!x)return!1;if(m.split(b,a.length,a),!d&&h&&r.node(c).type!=f){let S=m.mapping.map(r.before(c)),v=m.doc.resolve(S);f&&r.node(c-1).canReplaceWith(v.index(),v.index()+1,f)&&m.setNodeMarkup(m.mapping.map(r.before(c)),f)}return t&&t(m.scrollIntoView()),!0}}const yA=gA(),bA=(n,e)=>{let{$from:t,to:r}=n.selection,i,a=t.sharedDepth(r);return a==0?!1:(i=t.before(a),e&&e(n.tr.setSelection(ie.create(n.doc,i))),!0)};function xA(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,a=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(i.isTextblock||Xr(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Tv(n,e,t,r){let i=e.nodeBefore,a=e.nodeAfter,c,f,d=i.type.spec.isolating||a.type.spec.isolating;if(!d&&xA(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(c=(f=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&f.matchType(c[0]||a.type).validEnd){if(t){let S=e.pos+a.nodeSize,v=G.empty;for(let M=c.length-1;M>=0;M--)v=G.from(c[M].create(null,v));v=G.from(i.copy(v));let N=n.tr.step(new ot(e.pos-1,S,e.pos,S,new W(v,1,0),c.length,!0)),C=N.doc.resolve(S+2*c.length);C.nodeAfter&&C.nodeAfter.type==i.type&&Xr(N.doc,C.pos)&&N.join(C.pos),t(N.scrollIntoView())}return!0}let m=a.type.spec.isolating||r>0&&d?null:ye.findFrom(e,1),b=m&&m.$from.blockRange(m.$to),x=b&&$i(b);if(x!=null&&x>=e.depth)return t&&t(n.tr.lift(b,x).scrollIntoView()),!0;if(h&&Ui(a,"start",!0)&&Ui(i,"end")){let S=i,v=[];for(;v.push(S),!S.isTextblock;)S=S.lastChild;let N=a,C=1;for(;!N.isTextblock;N=N.firstChild)C++;if(S.canReplace(S.childCount,S.childCount,N.content)){if(t){let M=G.empty;for(let q=v.length-1;q>=0;q--)M=G.from(v[q].copy(M));let _=n.tr.step(new ot(e.pos-v.length,e.pos+a.nodeSize,e.pos+C,e.pos+a.nodeSize-C,new W(M,v.length,0),0,!0));t(_.scrollIntoView())}return!0}}return!1}function kv(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(t&&t(e.tr.setSelection(he.create(e.doc,n<0?i.start(a):i.end(a)))),!0):!1}}const vA=kv(-1),SA=kv(1);function wA(n,e=null){return function(t,r){let{$from:i,$to:a}=t.selection,c=i.blockRange(a),f=c&&$h(c,n,e);return f?(r&&r(t.tr.wrap(c,f).scrollIntoView()),!0):!1}}function Lb(n,e=null){return function(t,r){let i=!1;for(let a=0;a<t.selection.ranges.length&&!i;a++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[a];t.doc.nodesBetween(c,f,(d,h)=>{if(i)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)i=!0;else{let m=t.doc.resolve(h),b=m.index();i=m.parent.canReplaceWith(b,b+1,n)}})}if(!i)return!1;if(r){let a=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[c];a.setBlockType(f,d,n,e)}r(a.scrollIntoView())}return!0}}function lp(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}lp(np,bv,vv);lp(np,wv,Nv);lp(Cv,Ev,Mv,yA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function NA(n,e=null){return function(t,r){let{$from:i,$to:a}=t.selection,c=i.blockRange(a);if(!c)return!1;let f=r?t.tr:null;return CA(f,c,n,e)?(r&&r(f.scrollIntoView()),!0):!1}}function CA(n,e,t,r=null){let i=!1,a=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);a=new vc(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new vc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let f=$h(a,t,r,e);return f?(n&&EA(n,e,f,i,t),!0):!1}function EA(n,e,t,r,i){let a=G.empty;for(let m=t.length-1;m>=0;m--)a=G.from(t[m].type.create(t[m].attrs,a));n.step(new ot(e.start-(r?2:0),e.end,e.start,e.end,new W(a,0,0),t.length,!0));let c=0;for(let m=0;m<t.length;m++)t[m].type==i&&(c=m+1);let f=t.length-c,d=e.start+t.length-(r?2:0),h=e.parent;for(let m=e.startIndex,b=e.endIndex,x=!0;m<b;m++,x=!1)!x&&sr(n.doc,d,f)&&(n.split(d,f),d+=2*f),d+=h.child(m).nodeSize;return n}function MA(n){return function(e,t){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);return a?t?r.node(a.depth-1).type==n?TA(e,t,n,a):kA(e,t,a):!0:!1}}function TA(n,e,t,r){let i=n.tr,a=r.end,c=r.$to.end(r.depth);a<c&&(i.step(new ot(a-1,c,a,c,new W(G.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new vc(i.doc.resolve(r.$from.pos),i.doc.resolve(c),r.depth));const f=$i(r);if(f==null)return!1;i.lift(r,f);let d=i.doc.resolve(i.mapping.map(a,-1)-1);return Xr(i.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&i.join(d.pos),e(i.scrollIntoView()),!0}function kA(n,e,t){let r=n.tr,i=t.parent;for(let S=t.end,v=t.endIndex-1,N=t.startIndex;v>N;v--)S-=i.child(v).nodeSize,r.delete(S-1,S+1);let a=r.doc.resolve(t.start),c=a.nodeAfter;if(r.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==i.childCount,h=a.node(-1),m=a.index(-1);if(!h.canReplace(m+(f?0:1),m+1,c.content.append(d?G.empty:G.from(i))))return!1;let b=a.pos,x=b+c.nodeSize;return r.step(new ot(b-(f?1:0),x+(d?1:0),b+1,x-1,new W((f?G.empty:G.from(i.copy(G.empty))).append(d?G.empty:G.from(i.copy(G.empty))),f?0:1,d?0:1),f?0:1)),e(r.scrollIntoView()),!0}function OA(n){return function(e,t){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!a)return!1;let c=a.startIndex;if(c==0)return!1;let f=a.parent,d=f.child(c-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==f.type,m=G.from(h?n.create():null),b=new W(G.from(n.create(null,G.from(f.type.create(null,m)))),h?3:1,0),x=a.start,S=a.end;t(e.tr.step(new ot(x-(h?3:1),S,x,S,b,1,!0)).scrollIntoView())}return!0}}function Kc(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,a=t.storedMarks,t}}}class Jc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:a}=r,c=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...m)=>{const b=d(...m)(c);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(a),b}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:a}=this,{view:c}=i,f=[],d=!!e,h=e||a.tr,m=()=>(!d&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(h),f.every(x=>x===!0)),b={...Object.fromEntries(Object.entries(r).map(([x,S])=>[x,(...N)=>{const C=this.buildProps(h,t),M=S(...N)(C);return f.push(M),b}])),run:m};return b}createCan(e){const{rawCommands:t,state:r}=this,i=!1,a=e||r.tr,c=this.buildProps(a,i);return{...Object.fromEntries(Object.entries(t).map(([d,h])=>[d,(...m)=>h(...m)({...c,dispatch:void 0})])),chain:()=>this.createChain(a,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:a}=this,{view:c}=i,f={tr:e,editor:i,view:c,state:Kc({state:a,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>h(...m)(f)]))}};return f}}class AA{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ne(n,e,t){return n.config[e]===void 0&&n.parent?ne(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ne(n.parent,e,t):null}):n.config[e]}function Xc(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Ov(n){const e=[],{nodeExtensions:t,markExtensions:r}=Xc(n),i=[...t,...r],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage,extensions:i},d=ne(c,"addGlobalAttributes",f);if(!d)return;d().forEach(m=>{m.types.forEach(b=>{Object.entries(m.attributes).forEach(([x,S])=>{e.push({type:b,name:x,attribute:{...a,...S}})})})})}),i.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage},d=ne(c,"addAttributes",f);if(!d)return;const h=d();Object.entries(h).forEach(([m,b])=>{const x={...a,...b};typeof x?.default=="function"&&(x.default=x.default()),x?.isRequired&&x?.default===void 0&&delete x.default,e.push({type:c.name,name:m,attribute:x})})}),e}function ut(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function ft(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,a])=>{if(!r[i]){r[i]=a;return}if(i==="class"){const f=a?String(a).split(" "):[],d=r[i]?r[i].split(" "):[],h=f.filter(m=>!d.includes(m));r[i]=[...d,...h].join(" ")}else if(i==="style"){const f=a?a.split(";").map(m=>m.trim()).filter(Boolean):[],d=r[i]?r[i].split(";").map(m=>m.trim()).filter(Boolean):[],h=new Map;d.forEach(m=>{const[b,x]=m.split(":").map(S=>S.trim());h.set(b,x)}),f.forEach(m=>{const[b,x]=m.split(":").map(S=>S.trim());h.set(b,x)}),r[i]=Array.from(h.entries()).map(([m,b])=>`${m}: ${b}`).join("; ")}else r[i]=a}),r},{})}function Th(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>ft(t,r),{})}function Av(n){return typeof n=="function"}function xe(n,e=void 0,...t){return Av(n)?e?n.bind(e)(...t):n(...t):n}function DA(n={}){return Object.keys(n).length===0&&n.constructor===Object}function RA(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Hb(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((a,c)=>{const f=c.attribute.parseHTML?c.attribute.parseHTML(t):RA(t.getAttribute(c.name));return f==null?a:{...a,[c.name]:f}},{});return{...r,...i}}}}function Ub(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&DA(t)?!1:t!=null))}function jA(n,e){var t;const r=Ov(n),{nodeExtensions:i,markExtensions:a}=Xc(n),c=(t=i.find(h=>ne(h,"topNode")))===null||t===void 0?void 0:t.name,f=Object.fromEntries(i.map(h=>{const m=r.filter(M=>M.type===h.name),b={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((M,_)=>{const q=ne(_,"extendNodeSchema",b);return{...M,...q?q(h):{}}},{}),S=Ub({...x,content:xe(ne(h,"content",b)),marks:xe(ne(h,"marks",b)),group:xe(ne(h,"group",b)),inline:xe(ne(h,"inline",b)),atom:xe(ne(h,"atom",b)),selectable:xe(ne(h,"selectable",b)),draggable:xe(ne(h,"draggable",b)),code:xe(ne(h,"code",b)),whitespace:xe(ne(h,"whitespace",b)),linebreakReplacement:xe(ne(h,"linebreakReplacement",b)),defining:xe(ne(h,"defining",b)),isolating:xe(ne(h,"isolating",b)),attrs:Object.fromEntries(m.map(M=>{var _;return[M.name,{default:(_=M?.attribute)===null||_===void 0?void 0:_.default}]}))}),v=xe(ne(h,"parseHTML",b));v&&(S.parseDOM=v.map(M=>Hb(M,m)));const N=ne(h,"renderHTML",b);N&&(S.toDOM=M=>N({node:M,HTMLAttributes:Th(M,m)}));const C=ne(h,"renderText",b);return C&&(S.toText=C),[h.name,S]})),d=Object.fromEntries(a.map(h=>{const m=r.filter(C=>C.type===h.name),b={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((C,M)=>{const _=ne(M,"extendMarkSchema",b);return{...C,..._?_(h):{}}},{}),S=Ub({...x,inclusive:xe(ne(h,"inclusive",b)),excludes:xe(ne(h,"excludes",b)),group:xe(ne(h,"group",b)),spanning:xe(ne(h,"spanning",b)),code:xe(ne(h,"code",b)),attrs:Object.fromEntries(m.map(C=>{var M;return[C.name,{default:(M=C?.attribute)===null||M===void 0?void 0:M.default}]}))}),v=xe(ne(h,"parseHTML",b));v&&(S.parseDOM=v.map(C=>Hb(C,m)));const N=ne(h,"renderHTML",b);return N&&(S.toDOM=C=>N({mark:C,HTMLAttributes:Th(C,m)})),[h.name,S]}));return new b1({topNode:c,nodes:f,marks:d})}function Jd(n,e){return e.nodes[n]||e.marks[n]||null}function qb(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function ap(n,e){const t=qs.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const _A=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,a,c,f)=>{var d,h;const m=((h=(d=i.type.spec).toText)===null||h===void 0?void 0:h.call(d,{node:i,pos:a,parent:c,index:f}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?m:m.slice(0,Math.max(0,r-a))}),t};function op(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Qc{constructor(e){this.find=e.find,this.handler=e.handler}}const BA=(n,e)=>{if(op(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Zo(n){var e;const{editor:t,from:r,to:i,text:a,rules:c,plugin:f}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(x=>x.type.spec.code))return!1;let m=!1;const b=_A(h)+a;return c.forEach(x=>{if(m)return;const S=BA(b,x.find);if(!S)return;const v=d.state.tr,N=Kc({state:d.state,transaction:v}),C={from:r-(S[0].length-a.length),to:i},{commands:M,chain:_,can:q}=new Jc({editor:t,state:N});x.handler({state:N,range:C,match:S,commands:M,chain:_,can:q})===null||!v.steps.length||(v.setMeta(f,{transform:v,from:r,to:i,text:a}),d.dispatch(v),m=!0)}),m}function zA(n){const{editor:e,rules:t}=n,r=new Vt({state:{init(){return null},apply(i,a,c){const f=i.getMeta(r);if(f)return f;const d=i.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:m}=d;typeof m=="string"?m=m:m=ap(G.from(m),c.schema);const{from:b}=d,x=b+m.length;Zo({editor:e,from:b,to:x,text:m,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,c,f){return Zo({editor:e,from:a,to:c,text:f,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&Zo({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:c}=i.state.selection;return c?Zo({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function LA(n){return Object.prototype.toString.call(n).slice(8,-1)}function ec(n){return LA(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Wc(n,e){const t={...n};return ec(n)&&ec(e)&&Object.keys(e).forEach(r=>{ec(e[r])&&ec(n[r])?t[r]=Wc(n[r],e[r]):t[r]=e[r]}),t}class Bn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=xe(ne(this,"addOptions",{name:this.name}))),this.storage=xe(ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Bn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Wc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Bn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=xe(ne(t,"addOptions",{name:t.name})),t.storage=xe(ne(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const c=i.marks();if(!!!c.find(h=>h?.type.name===t.name))return!1;const d=c.find(h=>h?.type.name===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function HA(n){return typeof n=="number"}class UA{constructor(e){this.find=e.find,this.handler=e.handler}}const qA=(n,e,t)=>{if(op(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const a=[i.text];return a.index=i.index,a.input=n,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function VA(n){const{editor:e,state:t,from:r,to:i,rule:a,pasteEvent:c,dropEvent:f}=n,{commands:d,chain:h,can:m}=new Jc({editor:e,state:t}),b=[];return t.doc.nodesBetween(r,i,(S,v)=>{if(!S.isTextblock||S.type.spec.code)return;const N=Math.max(r,v),C=Math.min(i,v+S.content.size),M=S.textBetween(N-v,C-v,void 0,"￼");qA(M,a.find,c).forEach(q=>{if(q.index===void 0)return;const K=N+q.index+1,F=K+q[0].length,Z={from:t.tr.mapping.map(K),to:t.tr.mapping.map(F)},Y=a.handler({state:t,range:Z,match:q,commands:d,chain:h,can:m,pasteEvent:c,dropEvent:f});b.push(Y)})}),b.every(S=>S!==null)}let tc=null;const PA=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function IA(n){const{editor:e,rules:t}=n;let r=null,i=!1,a=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:m,from:b,to:x,rule:S,pasteEvt:v})=>{const N=m.tr,C=Kc({state:m,transaction:N});if(!(!VA({editor:e,state:C,from:Math.max(b-1,0),to:x.b-1,rule:S,pasteEvent:v,dropEvent:f})||!N.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,N}};return t.map(m=>new Vt({view(b){const x=v=>{var N;r=!((N=b.dom.parentElement)===null||N===void 0)&&N.contains(v.target)?b.dom.parentElement:null,r&&(tc=e)},S=()=>{tc&&(tc=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",S),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",S)}}},props:{handleDOMEvents:{drop:(b,x)=>{if(a=r===b.dom.parentElement,f=x,!a){const S=tc;S?.isEditable&&setTimeout(()=>{const v=S.state.selection;v&&S.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(b,x)=>{var S;const v=(S=x.clipboardData)===null||S===void 0?void 0:S.getData("text/html");return c=x,i=!!v?.includes("data-pm-slice"),!1}}},appendTransaction:(b,x,S)=>{const v=b[0],N=v.getMeta("uiEvent")==="paste"&&!i,C=v.getMeta("uiEvent")==="drop"&&!a,M=v.getMeta("applyPasteRules"),_=!!M;if(!N&&!C&&!_)return;if(_){let{text:F}=M;typeof F=="string"?F=F:F=ap(G.from(F),S.schema);const{from:Z}=M,Y=Z+F.length,L=PA(F);return d({rule:m,state:S,from:Z,to:{b:Y},pasteEvt:L})}const q=x.doc.content.findDiffStart(S.doc.content),K=x.doc.content.findDiffEnd(S.doc.content);if(!(!HA(q)||!K||q===K.b))return d({rule:m,state:S,from:q,to:K,pasteEvt:c})}}))}function FA(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Ri{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ri.resolve(e),this.schema=jA(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Ri.sort(Ri.flatten(e)),r=FA(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=ne(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const a=ne(r,"priority")||100,c=ne(i,"priority")||100;return a>c?-1:a<c?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Jd(t.name,this.schema)},i=ne(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Ri.sort([...this.extensions].reverse()),r=[],i=[],a=t.map(c=>{const f={name:c.name,options:c.options,storage:c.storage,editor:e,type:Jd(c.name,this.schema)},d=[],h=ne(c,"addKeyboardShortcuts",f);let m={};if(c.type==="mark"&&ne(c,"exitable",f)&&(m.ArrowRight=()=>Bn.handleExit({editor:e,mark:c})),h){const N=Object.fromEntries(Object.entries(h()).map(([C,M])=>[C,()=>M({editor:e})]));m={...m,...N}}const b=cA(m);d.push(b);const x=ne(c,"addInputRules",f);qb(c,e.options.enableInputRules)&&x&&r.push(...x());const S=ne(c,"addPasteRules",f);qb(c,e.options.enablePasteRules)&&S&&i.push(...S());const v=ne(c,"addProseMirrorPlugins",f);if(v){const N=v();d.push(...N)}return d}).flat();return[zA({editor:e,rules:r}),...IA({editor:e,rules:i}),...a]}get attributes(){return Ov(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Xc(this.extensions);return Object.fromEntries(t.filter(r=>!!ne(r,"addNodeView")).map(r=>{const i=this.attributes.filter(d=>d.type===r.name),a={name:r.name,options:r.options,storage:r.storage,editor:e,type:ut(r.name,this.schema)},c=ne(r,"addNodeView",a);if(!c)return[];const f=(d,h,m,b,x)=>{const S=Th(d,i);return c()({node:d,view:h,getPos:m,decorations:b,innerDecorations:x,editor:e,extension:r,HTMLAttributes:S})};return[r.name,f]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Jd(e.name,this.schema)};e.type==="mark"&&(!((t=xe(ne(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=ne(e,"onBeforeCreate",r),a=ne(e,"onCreate",r),c=ne(e,"onUpdate",r),f=ne(e,"onSelectionUpdate",r),d=ne(e,"onTransaction",r),h=ne(e,"onFocus",r),m=ne(e,"onBlur",r),b=ne(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),c&&this.editor.on("update",c),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),m&&this.editor.on("blur",m),b&&this.editor.on("destroy",b)})}}class bt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=xe(ne(this,"addOptions",{name:this.name}))),this.storage=xe(ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new bt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Wc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new bt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=xe(ne(t,"addOptions",{name:t.name})),t.storage=xe(ne(t,"addStorage",{name:t.name,options:t.options})),t}}function Dv(n,e,t){const{from:r,to:i}=e,{blockSeparator:a=`

`,textSerializers:c={}}=t||{};let f="";return n.nodesBetween(r,i,(d,h,m,b)=>{var x;d.isBlock&&h>r&&(f+=a);const S=c?.[d.type.name];if(S)return m&&(f+=S({node:d,pos:h,parent:m,index:b,range:e})),!1;d.isText&&(f+=(x=d?.text)===null||x===void 0?void 0:x.slice(Math.max(r,h)-h,i-h))}),f}function Rv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const $A=bt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Vt({key:new Ln("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:a}=i,c=Math.min(...a.map(m=>m.$from.pos)),f=Math.max(...a.map(m=>m.$to.pos)),d=Rv(t);return Dv(r,{from:c,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),YA=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),GA=(n=!1)=>({commands:e})=>e.setContent("",n),KA=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:a,$to:c})=>{n.doc.nodesBetween(a.pos,c.pos,(f,d)=>{if(f.type.isText)return;const{doc:h,mapping:m}=e,b=h.resolve(m.map(d)),x=h.resolve(m.map(d+f.nodeSize)),S=b.blockRange(x);if(!S)return;const v=$i(S);if(f.type.isTextblock){const{defaultType:N}=b.parent.contentMatchAt(b.index());e.setNodeMarkup(S.start,N)}(v||v===0)&&e.lift(S,v)})}),!0},JA=n=>e=>n(e),XA=()=>({state:n,dispatch:e})=>Ev(n,e),QA=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,a=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const c=r.mapping.map(e);return r.insert(c,a.content),r.setSelection(new he(r.doc.resolve(Math.max(c-1,0)))),!0},WA=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===r.type){if(e){const f=i.before(a),d=i.after(a);n.delete(f,d).scrollIntoView()}return!0}return!1},ZA=n=>({tr:e,state:t,dispatch:r})=>{const i=ut(n,t.schema),a=e.selection.$anchor;for(let c=a.depth;c>0;c-=1)if(a.node(c).type===i){if(r){const d=a.before(c),h=a.after(c);e.delete(d,h).scrollIntoView()}return!0}return!1},eD=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},tD=()=>({state:n,dispatch:e})=>np(n,e),nD=()=>({commands:n})=>n.keyboardShortcut("Enter"),rD=()=>({state:n,dispatch:e})=>mA(n,e);function kc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:op(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function jv(n,e,t={}){return n.find(r=>r.type===e&&kc(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function Vb(n,e,t={}){return!!jv(n,e,t)}function cp(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(m=>m.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(m=>m.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!jv([...i.node.marks],e,t)))return;let c=i.index,f=n.start()+i.offset,d=c+1,h=f+i.node.nodeSize;for(;c>0&&Vb([...n.parent.child(c-1).marks],e,t);)c-=1,f-=n.parent.child(c).nodeSize;for(;d<n.parent.childCount&&Vb([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:f,to:h}}function Wr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const sD=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const a=Wr(n,r.schema),{doc:c,selection:f}=t,{$from:d,from:h,to:m}=f;if(i){const b=cp(d,a,e);if(b&&b.from<=h&&b.to>=m){const x=he.create(c,b.from,b.to);t.setSelection(x)}}return!0},iD=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function _v(n){return n instanceof he}function Es(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Bv(n,e=null){if(!e)return null;const t=ye.atStart(n),r=ye.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,a=r.to;return e==="all"?he.create(n,Es(0,i,a),Es(n.content.size,i,a)):he.create(n,Es(e,i,a),Es(e,i,a))}function lD(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function up(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const aD=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:a})=>{e={scrollIntoView:!0,...e};const c=()=>{(up()||lD())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(a&&n===null&&!_v(t.state.selection))return c(),!0;const f=Bv(i.doc,n)||t.state.selection,d=t.state.selection.eq(f);return a&&(d||i.setSelection(f),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),c()),!0},oD=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),cD=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),zv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&zv(r)}return n};function nc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return zv(t)}function ga(n,e,t){if(n instanceof Ir||n instanceof G)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return G.fromArray(n.map(f=>e.nodeFromJSON(f)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",a),ga("",e,t)}if(i){if(t.errorOnInvalidContent){let c=!1,f="";const d=new b1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(c=!0,f=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Fr.fromSchema(d).parseSlice(nc(n),t.parseOptions):Fr.fromSchema(d).parse(nc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const a=Fr.fromSchema(e);return t.slice?a.parseSlice(nc(n),t.parseOptions).content:a.parse(nc(n),t.parseOptions)}return ga("",e,t)}function uD(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof at||i instanceof ot))return;const a=n.mapping.maps[r];let c=0;a.forEach((f,d,h,m)=>{c===0&&(c=m)}),n.setSelection(ye.near(n.doc.resolve(c),t))}const fD=n=>!("type"in n),dD=(n,e,t)=>({tr:r,dispatch:i,editor:a})=>{var c;if(i){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;const d=C=>{a.emit("contentError",{editor:a,error:C,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{ga(e,a.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(C){d(C)}try{f=ga(e,a.schema,{parseOptions:h,errorOnInvalidContent:(c=t.errorOnInvalidContent)!==null&&c!==void 0?c:a.options.enableContentCheck})}catch(C){return d(C),!1}let{from:m,to:b}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},x=!0,S=!0;if((fD(f)?f:[f]).forEach(C=>{C.check(),x=x?C.isText&&C.marks.length===0:!1,S=S?C.isBlock:!1}),m===b&&S){const{parent:C}=r.doc.resolve(m);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(m-=1,b+=1)}let N;if(x){if(Array.isArray(e))N=e.map(C=>C.text||"").join("");else if(e instanceof G){let C="";e.forEach(M=>{M.text&&(C+=M.text)}),N=C}else typeof e=="object"&&e&&e.text?N=e.text:N=e;r.insertText(N,m,b)}else N=f,r.replaceWith(m,b,N);t.updateSelection&&uD(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:m,text:N}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:m,text:N})}return!0},hD=()=>({state:n,dispatch:e})=>dA(n,e),pD=()=>({state:n,dispatch:e})=>hA(n,e),mD=()=>({state:n,dispatch:e})=>bv(n,e),gD=()=>({state:n,dispatch:e})=>wv(n,e),yD=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Pc(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},bD=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Pc(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},xD=()=>({state:n,dispatch:e})=>uA(n,e),vD=()=>({state:n,dispatch:e})=>fA(n,e);function Lv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function SD(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,a,c;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))up()||Lv()?c=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}const wD=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const a=SD(n).split(/-(?!$)/),c=a.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),f=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,f))});return d?.steps.forEach(h=>{const m=h.map(r.mapping);m&&i&&r.maybeStep(m)}),!0};function ya(n,e,t={}){const{from:r,to:i,empty:a}=n.selection,c=e?ut(e,n.schema):null,f=[];n.doc.nodesBetween(r,i,(b,x)=>{if(b.isText)return;const S=Math.max(r,x),v=Math.min(i,x+b.nodeSize);f.push({node:b,from:S,to:v})});const d=i-r,h=f.filter(b=>c?c.name===b.node.type.name:!0).filter(b=>kc(b.node.attrs,t,{strict:!1}));return a?!!h.length:h.reduce((b,x)=>b+x.to-x.from,0)>=d}const ND=(n,e={})=>({state:t,dispatch:r})=>{const i=ut(n,t.schema);return ya(t,i,e)?pA(t,r):!1},CD=()=>({state:n,dispatch:e})=>Mv(n,e),ED=n=>({state:e,dispatch:t})=>{const r=ut(n,e.schema);return MA(r)(e,t)},MD=()=>({state:n,dispatch:e})=>Cv(n,e);function Zc(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Pb(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const TD=(n,e)=>({tr:t,state:r,dispatch:i})=>{let a=null,c=null;const f=Zc(typeof n=="string"?n:n.name,r.schema);return f?(f==="node"&&(a=ut(n,r.schema)),f==="mark"&&(c=Wr(n,r.schema)),i&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,m)=>{a&&a===h.type&&t.setNodeMarkup(m,void 0,Pb(h.attrs,e)),c&&h.marks.length&&h.marks.forEach(b=>{c===b.type&&t.addMark(m,m+h.nodeSize,c.create(Pb(b.attrs,e)))})})}),!0):!1},kD=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),OD=()=>({tr:n,dispatch:e})=>{if(e){const t=new en(n.doc);n.setSelection(t)}return!0},AD=()=>({state:n,dispatch:e})=>vv(n,e),DD=()=>({state:n,dispatch:e})=>Nv(n,e),RD=()=>({state:n,dispatch:e})=>bA(n,e),jD=()=>({state:n,dispatch:e})=>SA(n,e),_D=()=>({state:n,dispatch:e})=>vA(n,e);function kh(n,e,t={},r={}){return ga(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const BD=(n,e=!1,t={},r={})=>({editor:i,tr:a,dispatch:c,commands:f})=>{var d,h;const{doc:m}=a;if(t.preserveWhitespace!=="full"){const b=kh(n,i.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:i.options.enableContentCheck});return c&&a.replaceWith(0,m.content.size,b).setMeta("preventUpdate",!e),!0}return c&&a.setMeta("preventUpdate",!e),f.insertContentAt({from:0,to:m.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck})};function Hv(n,e){const t=Wr(e,n.schema),{from:r,to:i,empty:a}=n.selection,c=[];a?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,d=>{c.push(...d.marks)});const f=c.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function zD(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function LD(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function fp(n){return e=>LD(e.$from,n)}function HD(n,e){const t={from:0,to:n.content.size};return Dv(n,t,e)}function UD(n,e){const t=ut(e,n.schema),{from:r,to:i}=n.selection,a=[];n.doc.nodesBetween(r,i,f=>{a.push(f)});const c=a.reverse().find(f=>f.type.name===t.name);return c?{...c.attrs}:{}}function qD(n,e){const t=Zc(typeof e=="string"?e:e.name,n.schema);return t==="node"?UD(n,e):t==="mark"?Hv(n,e):{}}function Uv(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const a=t.resolve(n),c=cp(a,i.type);c&&r.push({mark:i,...c})}):t.nodesBetween(n,e,(i,a)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(c=>({from:a,to:a+i.nodeSize,mark:c})))}),r}function fc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(a=>a.type===e&&a.name===r);return i?i.attribute.keepOnSplit:!1}))}function Oh(n,e,t={}){const{empty:r,ranges:i}=n.selection,a=e?Wr(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(b=>a?a.name===b.type.name:!0).find(b=>kc(b.attrs,t,{strict:!1}));let c=0;const f=[];if(i.forEach(({$from:b,$to:x})=>{const S=b.pos,v=x.pos;n.doc.nodesBetween(S,v,(N,C)=>{if(!N.isText&&!N.marks.length)return;const M=Math.max(S,C),_=Math.min(v,C+N.nodeSize),q=_-M;c+=q,f.push(...N.marks.map(K=>({mark:K,from:M,to:_})))})}),c===0)return!1;const d=f.filter(b=>a?a.name===b.mark.type.name:!0).filter(b=>kc(b.mark.attrs,t,{strict:!1})).reduce((b,x)=>b+x.to-x.from,0),h=f.filter(b=>a?b.mark.type!==a&&b.mark.type.excludes(a):!0).reduce((b,x)=>b+x.to-x.from,0);return(d>0?d+h:d)>=c}function VD(n,e,t={}){if(!e)return ya(n,null,t)||Oh(n,null,t);const r=Zc(e,n.schema);return r==="node"?ya(n,e,t):r==="mark"?Oh(n,e,t):!1}function Ib(n,e){const{nodeExtensions:t}=Xc(e),r=t.find(c=>c.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},a=xe(ne(r,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function dp(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(a=>{i!==!1&&(dp(a,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function PD(n){return n instanceof ie}function ID(n,e,t){var r;const{selection:i}=e;let a=null;if(_v(i)&&(a=i.$cursor),a){const f=(r=n.storedMarks)!==null&&r!==void 0?r:a.marks();return!!t.isInSet(f)||!f.some(d=>d.type.excludes(t))}const{ranges:c}=i;return c.some(({$from:f,$to:d})=>{let h=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,d.pos,(m,b,x)=>{if(h)return!1;if(m.isInline){const S=!x||x.type.allowsMarkType(t),v=!!t.isInSet(m.marks)||!m.marks.some(N=>N.type.excludes(t));h=S&&v}return!h}),h})}const FD=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:a}=t,{empty:c,ranges:f}=a,d=Wr(n,r.schema);if(i)if(c){const h=Hv(r,d);t.addStoredMark(d.create({...h,...e}))}else f.forEach(h=>{const m=h.$from.pos,b=h.$to.pos;r.doc.nodesBetween(m,b,(x,S)=>{const v=Math.max(S,m),N=Math.min(S+x.nodeSize,b);x.marks.find(M=>M.type===d)?x.marks.forEach(M=>{d===M.type&&t.addMark(v,N,d.create({...M.attrs,...e}))}):t.addMark(v,N,d.create(e))})});return ID(r,t,d)},$D=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),YD=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const a=ut(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:f})=>Lb(a,{...c,...e})(t)?!0:f.clearNodes()).command(({state:f})=>Lb(a,{...c,...e})(f,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},GD=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Es(n,0,r.content.size),a=ie.create(r,i);e.setSelection(a)}return!0},KD=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:a}=typeof n=="number"?{from:n,to:n}:n,c=he.atStart(r).from,f=he.atEnd(r).to,d=Es(i,c,f),h=Es(a,c,f),m=he.create(r,d,h);e.setSelection(m)}return!0},JD=n=>({state:e,dispatch:t})=>{const r=ut(n,e.schema);return OA(r)(e,t)};function Fb(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e?.includes(i.type.name));n.tr.ensureMarks(r)}}const XD=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:a,doc:c}=e,{$from:f,$to:d}=a,h=i.extensionManager.attributes,m=fc(h,f.node().type.name,f.node().attrs);if(a instanceof ie&&a.node.isBlock)return!f.parentOffset||!sr(c,f.pos)?!1:(r&&(n&&Fb(t,i.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const b=d.parentOffset===d.parent.content.size,x=f.depth===0?void 0:zD(f.node(-1).contentMatchAt(f.indexAfter(-1)));let S=b&&x?[{type:x,attrs:m}]:void 0,v=sr(e.doc,e.mapping.map(f.pos),1,S);if(!S&&!v&&sr(e.doc,e.mapping.map(f.pos),1,x?[{type:x}]:void 0)&&(v=!0,S=x?[{type:x,attrs:m}]:void 0),r){if(v&&(a instanceof he&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,S),x&&!b&&!f.parentOffset&&f.parent.type!==x)){const N=e.mapping.map(f.before()),C=e.doc.resolve(N);f.node(-1).canReplaceWith(C.index(),C.index()+1,x)&&e.setNodeMarkup(e.mapping.map(f.before()),x)}n&&Fb(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return v},QD=(n,e={})=>({tr:t,state:r,dispatch:i,editor:a})=>{var c;const f=ut(n,r.schema),{$from:d,$to:h}=r.selection,m=r.selection.node;if(m&&m.isBlock||d.depth<2||!d.sameParent(h))return!1;const b=d.node(-1);if(b.type!==f)return!1;const x=a.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let M=G.empty;const _=d.index(-1)?1:d.index(-2)?2:3;for(let L=d.depth-_;L>=d.depth-3;L-=1)M=G.from(d.node(L).copy(M));const q=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,K={...fc(x,d.node().type.name,d.node().attrs),...e},F=((c=f.contentMatch.defaultType)===null||c===void 0?void 0:c.createAndFill(K))||void 0;M=M.append(G.from(f.createAndFill(null,F)||void 0));const Z=d.before(d.depth-(_-1));t.replace(Z,d.after(-q),new W(M,4-_,0));let Y=-1;t.doc.nodesBetween(Z,t.doc.content.size,(L,J)=>{if(Y>-1)return!1;L.isTextblock&&L.content.size===0&&(Y=J+1)}),Y>-1&&t.setSelection(he.near(t.doc.resolve(Y))),t.scrollIntoView()}return!0}const S=h.pos===d.end()?b.contentMatchAt(0).defaultType:null,v={...fc(x,b.type.name,b.attrs),...e},N={...fc(x,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const C=S?[{type:f,attrs:v},{type:S,attrs:N}]:[{type:f,attrs:v}];if(!sr(t.doc,d.pos,2))return!1;if(i){const{selection:M,storedMarks:_}=r,{splittableMarks:q}=a.extensionManager,K=_||M.$to.parentOffset&&M.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!K||!i)return!0;const F=K.filter(Z=>q.includes(Z.type.name));t.ensureMarks(F)}return!0},Xd=(n,e)=>{const t=fp(c=>c.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Xr(n.doc,t.pos)&&n.join(t.pos),!0},Qd=(n,e)=>{const t=fp(c=>c.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===i?.type&&Xr(n.doc,r)&&n.join(r),!0},WD=(n,e,t,r={})=>({editor:i,tr:a,state:c,dispatch:f,chain:d,commands:h,can:m})=>{const{extensions:b,splittableMarks:x}=i.extensionManager,S=ut(n,c.schema),v=ut(e,c.schema),{selection:N,storedMarks:C}=c,{$from:M,$to:_}=N,q=M.blockRange(_),K=C||N.$to.parentOffset&&N.$from.marks();if(!q)return!1;const F=fp(Z=>Ib(Z.type.name,b))(N);if(q.depth>=1&&F&&q.depth-F.depth<=1){if(F.node.type===S)return h.liftListItem(v);if(Ib(F.node.type.name,b)&&S.validContent(F.node.content)&&f)return d().command(()=>(a.setNodeMarkup(F.pos,S),!0)).command(()=>Xd(a,S)).command(()=>Qd(a,S)).run()}return!t||!K||!f?d().command(()=>m().wrapInList(S,r)?!0:h.clearNodes()).wrapInList(S,r).command(()=>Xd(a,S)).command(()=>Qd(a,S)).run():d().command(()=>{const Z=m().wrapInList(S,r),Y=K.filter(L=>x.includes(L.type.name));return a.ensureMarks(Y),Z?!0:h.clearNodes()}).wrapInList(S,r).command(()=>Xd(a,S)).command(()=>Qd(a,S)).run()},ZD=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:a=!1}=t,c=Wr(n,r.schema);return Oh(r,c,e)?i.unsetMark(c,{extendEmptyMarkRange:a}):i.setMark(c,e)},eR=(n,e,t={})=>({state:r,commands:i})=>{const a=ut(n,r.schema),c=ut(e,r.schema),f=ya(r,a,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),f?i.setNode(c,d):i.setNode(a,{...d,...t})},tR=(n,e={})=>({state:t,commands:r})=>{const i=ut(n,t.schema);return ya(t,i,e)?r.lift(i):r.wrapIn(i,e)},nR=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let a;if(i.spec.isInputRules&&(a=i.getState(n))){if(e){const c=n.tr,f=a.transform;for(let d=f.steps.length-1;d>=0;d-=1)c.step(f.steps[d].invert(f.docs[d]));if(a.text){const d=c.doc.resolve(a.from).marks();c.replaceWith(a.from,a.to,n.schema.text(a.text,d))}else c.delete(a.from,a.to)}return!0}}return!1},rR=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos)}),!0},sR=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var a;const{extendEmptyMarkRange:c=!1}=e,{selection:f}=t,d=Wr(n,r.schema),{$from:h,empty:m,ranges:b}=f;if(!i)return!0;if(m&&c){let{from:x,to:S}=f;const v=(a=h.marks().find(C=>C.type===d))===null||a===void 0?void 0:a.attrs,N=cp(h,d,v);N&&(x=N.from,S=N.to),t.removeMark(x,S,d)}else b.forEach(x=>{t.removeMark(x.$from.pos,x.$to.pos,d)});return t.removeStoredMark(d),!0},iR=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let a=null,c=null;const f=Zc(typeof n=="string"?n:n.name,r.schema);return f?(f==="node"&&(a=ut(n,r.schema)),f==="mark"&&(c=Wr(n,r.schema)),i&&t.selection.ranges.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;let b,x,S,v;t.selection.empty?r.doc.nodesBetween(h,m,(N,C)=>{a&&a===N.type&&(S=Math.max(C,h),v=Math.min(C+N.nodeSize,m),b=C,x=N)}):r.doc.nodesBetween(h,m,(N,C)=>{C<h&&a&&a===N.type&&(S=Math.max(C,h),v=Math.min(C+N.nodeSize,m),b=C,x=N),C>=h&&C<=m&&(a&&a===N.type&&t.setNodeMarkup(C,void 0,{...N.attrs,...e}),c&&N.marks.length&&N.marks.forEach(M=>{if(c===M.type){const _=Math.max(C,h),q=Math.min(C+N.nodeSize,m);t.addMark(_,q,c.create({...M.attrs,...e}))}}))}),x&&(b!==void 0&&t.setNodeMarkup(b,void 0,{...x.attrs,...e}),c&&x.marks.length&&x.marks.forEach(N=>{c===N.type&&t.addMark(S,v,c.create({...N.attrs,...e}))}))}),!0):!1},lR=(n,e={})=>({state:t,dispatch:r})=>{const i=ut(n,t.schema);return wA(i,e)(t,r)},aR=(n,e={})=>({state:t,dispatch:r})=>{const i=ut(n,t.schema);return NA(i,e)(t,r)};var oR=Object.freeze({__proto__:null,blur:YA,clearContent:GA,clearNodes:KA,command:JA,createParagraphNear:XA,cut:QA,deleteCurrentNode:WA,deleteNode:ZA,deleteRange:eD,deleteSelection:tD,enter:nD,exitCode:rD,extendMarkRange:sD,first:iD,focus:aD,forEach:oD,insertContent:cD,insertContentAt:dD,joinBackward:mD,joinDown:pD,joinForward:gD,joinItemBackward:yD,joinItemForward:bD,joinTextblockBackward:xD,joinTextblockForward:vD,joinUp:hD,keyboardShortcut:wD,lift:ND,liftEmptyBlock:CD,liftListItem:ED,newlineInCode:MD,resetAttributes:TD,scrollIntoView:kD,selectAll:OD,selectNodeBackward:AD,selectNodeForward:DD,selectParentNode:RD,selectTextblockEnd:jD,selectTextblockStart:_D,setContent:BD,setMark:FD,setMeta:$D,setNode:YD,setNodeSelection:GD,setTextSelection:KD,sinkListItem:JD,splitBlock:XD,splitListItem:QD,toggleList:WD,toggleMark:ZD,toggleNode:eR,toggleWrap:tR,undoInputRule:nR,unsetAllMarks:rR,unsetMark:sR,updateAttributes:iR,wrapIn:lR,wrapInList:aR});const cR=bt.create({name:"commands",addCommands(){return{...oR}}}),uR=bt.create({name:"drop",addProseMirrorPlugins(){return[new Vt({key:new Ln("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),fR=bt.create({name:"editable",addProseMirrorPlugins(){return[new Vt({key:new Ln("editable"),props:{editable:()=>this.editor.options.editable}})]}}),dR=new Ln("focusEvents"),hR=bt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Vt({key:dR,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),pR=bt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:f})=>{const{selection:d,doc:h}=f,{empty:m,$anchor:b}=d,{pos:x,parent:S}=b,v=b.parent.isTextblock&&x>0?f.doc.resolve(x-1):b,N=v.parent.type.spec.isolating,C=b.pos-b.parentOffset,M=N&&v.parent.childCount===1?C===b.pos:ye.atStart(h).from===x;return!m||!S.type.isTextblock||S.textContent.length||!M||M&&b.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},a={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return up()||Lv()?a:i},addProseMirrorPlugins(){return[new Vt({key:new Ln("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(N=>N.getMeta("composition")))return;const r=n.some(N=>N.docChanged)&&!e.doc.eq(t.doc),i=n.some(N=>N.getMeta("preventClearDocument"));if(!r||i)return;const{empty:a,from:c,to:f}=e.selection,d=ye.atStart(e.doc).from,h=ye.atEnd(e.doc).to;if(a||!(c===d&&f===h)||!dp(t.doc))return;const x=t.tr,S=Kc({state:t,transaction:x}),{commands:v}=new Jc({editor:this.editor,state:S});if(v.clearNodes(),!!x.steps.length)return x}})]}}),mR=bt.create({name:"paste",addProseMirrorPlugins(){return[new Vt({key:new Ln("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),gR=bt.create({name:"tabindex",addProseMirrorPlugins(){return[new Vt({key:new Ln("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ss{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Ss(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ss(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ss(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,c=this.pos+r+(a?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const f=this.resolvedPos.doc.resolve(c);if(!i&&f.depth<=this.depth)return;const d=new Ss(f,this.editor,i,i?t:null);i&&(d.actualDepth=this.depth+1),e.push(new Ss(f,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const a=i.node.attrs,c=Object.keys(t);for(let f=0;f<c.length;f+=1){const d=c[f];if(a[d]!==t[d])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(t);return this.children.forEach(c=>{r&&i.length>0||(c.node.type.name===e&&a.every(d=>t[d]===c.node.attrs[d])&&i.push(c),!(r&&i.length>0)&&(i=i.concat(c.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const yR=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function bR(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class xR extends AA{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=bR(yR,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Av(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(a=>{const c=typeof a=="string"?`${a}$`:a.key;r=r.filter(f=>!f.key.startsWith(c))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[fR,$A.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),cR,hR,pR,gR,uR,mR].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a?.type));this.extensionManager=new Ri(i,this)}createCommandManager(){this.commandManager=new Jc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=kh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(c){if(!(c instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(c.message))throw c;this.emit("contentError",{editor:this,error:c,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(f=>f.name!=="collaboration"),this.createExtensionManager()}}),t=kh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Bv(t,this.options.autofocus);this.view=new mv(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Di.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var f;return(f=this.capturedTransaction)===null||f===void 0?void 0:f.step(c)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),a=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return qD(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return VD(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ap(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return HD(this.state.doc,{blockSeparator:t,textSerializers:{...Rv(this.schema),...r}})}get isEmpty(){return dp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Ss(t,this)}get $doc(){return this.$pos(0)}}function Ls(n){return new Qc({find:n.find,handler:({state:e,range:t,match:r})=>{const i=xe(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:a}=e,c=r[r.length-1],f=r[0];if(c){const d=f.search(/\S/),h=t.from+f.indexOf(c),m=h+c.length;if(Uv(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(N=>N===n.type&&N!==S.mark.type)).filter(S=>S.to>h).length)return null;m<t.to&&a.delete(m,t.to),h>t.from&&a.delete(t.from+d,h);const x=t.from+d+c.length;a.addMark(t.from+d,x,n.type.create(i||{})),a.removeStoredMark(n.type)}}})}function qv(n){return new Qc({find:n.find,handler:({state:e,range:t,match:r})=>{const i=xe(n.getAttributes,void 0,r)||{},{tr:a}=e,c=t.from;let f=t.to;const d=n.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let m=c+h;m>f?m=f:f=m+r[1].length;const b=r[0][r[0].length-1];a.insertText(b,c+r[0].length-1),a.replaceWith(m,f,d)}else if(r[0]){const h=n.type.isInline?c:c-1;a.insert(h,n.type.create(i)).delete(a.mapping.map(c),a.mapping.map(f))}a.scrollIntoView()}})}function Ah(n){return new Qc({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),a=xe(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,a)}})}function ba(n){return new Qc({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const a=xe(n.getAttributes,void 0,r)||{},c=e.tr.delete(t.from,t.to),d=c.doc.resolve(t.from).blockRange(),h=d&&$h(d,n.type,a);if(!h)return null;if(c.wrap(d,h),n.keepMarks&&n.editor){const{selection:b,storedMarks:x}=e,{splittableMarks:S}=n.editor.extensionManager,v=x||b.$to.parentOffset&&b.$from.marks();if(v){const N=v.filter(C=>S.includes(C.type.name));c.ensureMarks(N)}}if(n.keepAttributes){const b=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(b,a).run()}const m=c.doc.resolve(t.from-1).nodeBefore;m&&m.type===n.type&&Xr(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,m))&&c.join(t.from-1)}})}class Dt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=xe(ne(this,"addOptions",{name:this.name}))),this.storage=xe(ne(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Dt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Wc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Dt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=xe(ne(t,"addOptions",{name:t.name})),t.storage=xe(ne(t,"addStorage",{name:t.name,options:t.options})),t}}function Hs(n){return new UA({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const a=xe(n.getAttributes,void 0,r,i);if(a===!1||a===null)return null;const{tr:c}=e,f=r[r.length-1],d=r[0];let h=t.to;if(f){const m=d.search(/\S/),b=t.from+d.indexOf(f),x=b+f.length;if(Uv(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(C=>C===n.type&&C!==v.mark.type)).filter(v=>v.to>b).length)return null;x<t.to&&c.delete(x,t.to),b>t.from&&c.delete(t.from+m,b),h=t.from+m+f.length,c.addMark(t.from+m,h,n.type.create(a||{})),c.removeStoredMark(n.type)}}})}function vR(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof ie){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let i=r.depth;for(;i>=0;){const a=r.index(i);if(r.node(i).contentMatchAt(a).matchType(e))return!0;i-=1}return!1}function SR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vv={exports:{}},Wd={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function wR(){if($b)return Wd;$b=1;var n=Tt;function e(b,x){return b===x&&(b!==0||1/b===1/x)||b!==b&&x!==x}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function f(b,x){var S=x(),v=r({inst:{value:S,getSnapshot:x}}),N=v[0].inst,C=v[1];return a(function(){N.value=S,N.getSnapshot=x,d(N)&&C({inst:N})},[b,S,x]),i(function(){return d(N)&&C({inst:N}),b(function(){d(N)&&C({inst:N})})},[b]),c(S),S}function d(b){var x=b.getSnapshot;b=b.value;try{var S=x();return!t(b,S)}catch{return!0}}function h(b,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Wd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Wd}Vv.exports=wR();var hp=Vv.exports;const NR=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},CR=({contentComponent:n})=>{const e=hp.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Tt.createElement(Tt.Fragment,null,Object.values(e))};function ER(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:eE.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class MR extends Tt.Component{constructor(e){var t;super(e),this.editorContentRef=Tt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=ER(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Tt.createElement(Tt.Fragment,null,Tt.createElement("div",{ref:NR(t,this.editorContentRef),...r}),e?.contentComponent&&Tt.createElement(CR,{contentComponent:e.contentComponent}))}}const TR=T.forwardRef((n,e)=>{const t=Tt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Tt.createElement(MR,{key:t,innerRef:e,...n})}),kR=Tt.memo(TR);var OR=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){var c=a[i];if(!(c==="_owner"&&e.$$typeof)&&!n(e[c],t[c]))return!1}return!0}return e!==e&&t!==t},AR=SR(OR),Pv={exports:{}},Zd={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function DR(){if(Yb)return Zd;Yb=1;var n=Tt,e=hp;function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,c=n.useEffect,f=n.useMemo,d=n.useDebugValue;return Zd.useSyncExternalStoreWithSelector=function(h,m,b,x,S){var v=a(null);if(v.current===null){var N={hasValue:!1,value:null};v.current=N}else N=v.current;v=f(function(){function M(Z){if(!_){if(_=!0,q=Z,Z=x(Z),S!==void 0&&N.hasValue){var Y=N.value;if(S(Y,Z))return K=Y}return K=Z}if(Y=K,r(q,Z))return Y;var L=x(Z);return S!==void 0&&S(Y,L)?Y:(q=Z,K=L)}var _=!1,q,K,F=b===void 0?null:b;return[function(){return M(m())},F===null?void 0:function(){return M(F())}]},[m,b,x,S]);var C=i(h,v[0],v[1]);return c(function(){N.hasValue=!0,N.value=C},[C]),d(C),C},Zd}Pv.exports=DR();var RR=Pv.exports;const jR=typeof window<"u"?T.useLayoutEffect:T.useEffect;class _R{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function BR(n){var e;const[t]=T.useState(()=>new _R(n.editor)),r=RR.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:AR);return jR(()=>t.watch(n.editor),[n.editor,t]),T.useDebugValue(r),r}const zR=!1,Dh=typeof window>"u",LR=Dh||!!(typeof window<"u"&&window.next);class pp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Dh||LR?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)===null||a===void 0?void 0:a.call(i,...r)},onBlur:(...r)=>{var i,a;return(a=(i=this.options.current).onBlur)===null||a===void 0?void 0:a.call(i,...r)},onCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onCreate)===null||a===void 0?void 0:a.call(i,...r)},onDestroy:(...r)=>{var i,a;return(a=(i=this.options.current).onDestroy)===null||a===void 0?void 0:a.call(i,...r)},onFocus:(...r)=>{var i,a;return(a=(i=this.options.current).onFocus)===null||a===void 0?void 0:a.call(i,...r)},onSelectionUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)===null||a===void 0?void 0:a.call(i,...r)},onTransaction:(...r)=>{var i,a;return(a=(i=this.options.current).onTransaction)===null||a===void 0?void 0:a.call(i,...r)},onUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onUpdate)===null||a===void 0?void 0:a.call(i,...r)},onContentError:(...r)=>{var i,a;return(a=(i=this.options.current).onContentError)===null||a===void 0?void 0:a.call(i,...r)},onDrop:(...r)=>{var i,a;return(a=(i=this.options.current).onDrop)===null||a===void 0?void 0:a.call(i,...r)},onPaste:(...r)=>{var i,a;return(a=(i=this.options.current).onPaste)===null||a===void 0?void 0:a.call(i,...r)}};return new xR(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,a)=>{var c;return i===((c=t.extensions)===null||c===void 0?void 0:c[a])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?pp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function HR(n={},e=[]){const t=T.useRef(n);t.current=n;const[r]=T.useState(()=>new pp(t)),i=hp.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return T.useDebugValue(i),T.useEffect(r.onRender(e)),BR({editor:i,selector:({transactionNumber:a})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&a===0?0:a+1}),i}const UR=T.createContext({editor:null});UR.Consumer;const qR=T.createContext({onDragStart:void 0}),VR=()=>T.useContext(qR);Tt.forwardRef((n,e)=>{const{onDragStart:t}=VR(),r=n.as||"div";return Tt.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const PR=/^\s*>\s$/,IR=Dt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ba({find:PR,type:this.type})]}}),FR=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,$R=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,YR=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,GR=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,KR=Bn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ls({find:FR,type:this.type}),Ls({find:YR,type:this.type})]},addPasteRules(){return[Hs({find:$R,type:this.type}),Hs({find:GR,type:this.type})]}}),JR="listItem",Gb="textStyle",Kb=/^\s*([-+*])\s$/,XR=Dt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(JR,this.editor.getAttributes(Gb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ba({find:Kb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ba({find:Kb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Gb),editor:this.editor})),[n]}}),QR=/(^|[^`])`([^`]+)`(?!`)/,WR=/(^|[^`])`([^`]+)`(?!`)/g,ZR=Bn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ls({find:QR,type:this.type})]},addPasteRules(){return[Hs({find:WR,type:this.type})]}}),ej=/^```([a-z]+)?[\s\n]$/,tj=/^~~~([a-z]+)?[\s\n]$/,nj=Dt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,a=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",ft(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,c=r.parent.textContent.endsWith(`

`);return!a||!c?!1:n.chain().command(({tr:f})=>(f.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:a}=t;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const f=i.after();return f===void 0?!1:r.nodeAt(f)?n.commands.command(({tr:h})=>(h.setSelection(ye.near(r.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Ah({find:ej,type:this.type,getAttributes:n=>({language:n[1]})}),Ah({find:tj,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Vt({key:new Ln("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,a=i?.mode;if(!t||!a)return!1;const{tr:c,schema:f}=n.state,d=f.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:a},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(he.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),rj=Dt.create({name:"doc",topNode:!0,content:"block+"});function sj(n={}){return new Vt({view(e){return new ij(e,n)}})}class ij{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=c=>{this[i](c)};return e.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,a=i.getBoundingClientRect(),c=a.width/i.offsetWidth,f=a.height/i.offsetHeight;if(t){let b=e.nodeBefore,x=e.nodeAfter;if(b||x){let S=this.editorView.nodeDOM(this.cursorPos-(b?b.nodeSize:0));if(S){let v=S.getBoundingClientRect(),N=b?v.bottom:v.top;b&&x&&(N=(N+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*f;r={left:v.left,right:v.right,top:N-C,bottom:N+C}}}}if(!r){let b=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*c;r={left:b.left-x,right:b.left+x,top:b.top,bottom:b.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,m=-pageYOffset;else{let b=d.getBoundingClientRect(),x=b.width/d.offsetWidth,S=b.height/d.offsetHeight;h=b.left-d.scrollLeft*x,m=b.top-d.scrollTop*S}this.element.style.left=(r.left-h)/c+"px",this.element.style.top=(r.top-m)/f+"px",this.element.style.width=(r.right-r.left)/c+"px",this.element.style.height=(r.bottom-r.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!a){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=O1(this.editorView.state.doc,c,this.editorView.dragging.slice);f!=null&&(c=f)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const lj=bt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[sj(this.options)]}});class Ye extends ye{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ye.valid(r)?new Ye(r):ye.near(r)}content(){return W.empty}eq(e){return e instanceof Ye&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ye(e.resolve(t.pos))}getBookmark(){return new mp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!aj(e)||!oj(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ye.valid(e))return e;let i=e.pos,a=null;for(let c=e.depth;;c--){let f=e.node(c);if(t>0?e.indexAfter(c)<f.childCount:e.index(c)>0){a=f.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;i+=t;let d=e.doc.resolve(i);if(Ye.valid(d))return d}for(;;){let c=t>0?a.firstChild:a.lastChild;if(!c){if(a.isAtom&&!a.isText&&!ie.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*t),r=!1;continue e}break}a=c,i+=t;let f=e.doc.resolve(i);if(Ye.valid(f))return f}return null}}}Ye.prototype.visible=!1;Ye.findFrom=Ye.findGapCursorFrom;ye.jsonID("gapcursor",Ye);class mp{constructor(e){this.pos=e}map(e){return new mp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ye.valid(t)?new Ye(t):ye.near(t)}}function aj(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function oj(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function cj(){return new Vt({props:{decorations:hj,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ye.valid(t)?new Ye(t):null},handleClick:fj,handleKeyDown:uj,handleDOMEvents:{beforeinput:dj}}})}const uj=gv({ArrowLeft:rc("horiz",-1),ArrowRight:rc("horiz",1),ArrowUp:rc("vert",-1),ArrowDown:rc("vert",1)});function rc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,a){let c=r.selection,f=e>0?c.$to:c.$from,d=c.empty;if(c instanceof he){if(!a.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=r.doc.resolve(e>0?f.after():f.before())}let h=Ye.findGapCursorFrom(f,e,d);return h?(i&&i(r.tr.setSelection(new Ye(h))),!0):!1}}function fj(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ye.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&ie.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ye(r))),!0)}function dj(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ye))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=G.empty;for(let c=r.length-1;c>=0;c--)i=G.from(r[c].createAndFill(null,i));let a=n.state.tr.replace(t.pos,t.pos,new W(i,0,0));return a.setSelection(he.near(a.doc.resolve(t.pos+1))),n.dispatch(a),!1}function hj(n){if(!(n.selection instanceof Ye))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",tt.create(n.doc,[pn.widget(n.selection.head,e,{key:"gapcursor"})])}const pj=bt.create({name:"gapCursor",addProseMirrorPlugins(){return[cj()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=xe(ne(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),mj=Dt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",ft(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:a}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:f}=r.extensionManager,d=a||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:m})=>{if(m&&d&&c){const b=d.filter(x=>f.includes(x.type.name));h.ensureMarks(b)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),gj=Dt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,ft(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Ah({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Oc=200,ct=function(){};ct.prototype.append=function(e){return e.length?(e=ct.from(e),!this.length&&e||e.length<Oc&&this.leafAppend(e)||this.length<Oc&&e.leafPrepend(this)||this.appendInner(e)):this};ct.prototype.prepend=function(e){return e.length?ct.from(e).append(this):this};ct.prototype.appendInner=function(e){return new yj(this,e)};ct.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ct.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ct.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ct.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};ct.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(a,c){return i.push(e(a,c))},t,r),i};ct.from=function(e){return e instanceof ct?e:e&&e.length?new Iv(e):ct.empty};var Iv=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new e(this.values.slice(i,a))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,a,c,f){for(var d=a;d<c;d++)if(i(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(i,a,c,f){for(var d=a-1;d>=c;d--)if(i(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Oc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Oc)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ct);ct.empty=new Iv([]);var yj=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,a,c){var f=this.left.length;if(i<f&&this.left.forEachInner(r,i,Math.min(a,f),c)===!1||a>f&&this.right.forEachInner(r,Math.max(i-f,0),Math.min(this.length,a)-f,c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,a,c){var f=this.left.length;if(i>f&&this.right.forEachInvertedInner(r,i-f,Math.max(a,f)-f,c+f)===!1||a<f&&this.left.forEachInvertedInner(r,Math.min(i,f),a,c)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(r,i):r>=a?this.right.slice(r-a,i-a):this.left.slice(r,a).append(this.right.slice(0,i-a))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ct);const bj=500;class xn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,a;t&&(i=this.remapping(r,this.items.length),a=i.maps.length);let c=e.tr,f,d,h=[],m=[];return this.items.forEach((b,x)=>{if(!b.step){i||(i=this.remapping(r,x+1),a=i.maps.length),a--,m.push(b);return}if(i){m.push(new An(b.map));let S=b.step.map(i.slice(a)),v;S&&c.maybeStep(S).doc&&(v=c.mapping.maps[c.mapping.maps.length-1],h.push(new An(v,void 0,void 0,h.length+m.length))),a--,v&&i.appendMap(v,a)}else c.maybeStep(b.step);if(b.selection)return f=i?b.selection.map(i.slice(a)):b.selection,d=new xn(this.items.slice(0,r).append(m.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:f}}addTransform(e,t,r,i){let a=[],c=this.eventCount,f=this.items,d=!i&&f.length?f.get(f.length-1):null;for(let m=0;m<e.steps.length;m++){let b=e.steps[m].invert(e.docs[m]),x=new An(e.mapping.maps[m],b,t),S;(S=d&&d.merge(x))&&(x=S,m?a.pop():f=f.slice(0,f.length-1)),a.push(x),t&&(c++,t=void 0),i||(d=x)}let h=c-r.depth;return h>vj&&(f=xj(f,h),c-=h),new xn(f.append(a),c)}remapping(e,t){let r=new fa;return this.items.forEach((i,a)=>{let c=i.mirrorOffset!=null&&a-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,c)},e,t),r}addMaps(e){return this.eventCount==0?this:new xn(this.items.append(e.map(t=>new An(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),a=e.mapping,c=e.steps.length,f=this.eventCount;this.items.forEach(x=>{x.selection&&f--},i);let d=t;this.items.forEach(x=>{let S=a.getMirror(--d);if(S==null)return;c=Math.min(c,S);let v=a.maps[S];if(x.step){let N=e.steps[S].invert(e.docs[S]),C=x.selection&&x.selection.map(a.slice(d+1,S));C&&f++,r.push(new An(v,N,C))}else r.push(new An(v))},i);let h=[];for(let x=t;x<c;x++)h.push(new An(a.maps[x]));let m=this.items.slice(0,i).append(h).append(r),b=new xn(m,f);return b.emptyItemCount()>bj&&(b=b.compress(this.items.length-r.length)),b}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],a=0;return this.items.forEach((c,f)=>{if(f>=e)i.push(c),c.selection&&a++;else if(c.step){let d=c.step.map(t.slice(r)),h=d&&d.getMap();if(r--,h&&t.appendMap(h,r),d){let m=c.selection&&c.selection.map(t.slice(r));m&&a++;let b=new An(h.invert(),d,m),x,S=i.length-1;(x=i.length&&i[S].merge(b))?i[S]=x:i.push(b)}}else c.map&&r--},this.items.length,0),new xn(ct.from(i.reverse()),a)}}xn.empty=new xn(ct.empty,0);function xj(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class An{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new An(t.getMap().invert(),t,this.selection)}}}class Hr{constructor(e,t,r,i,a){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=a}}const vj=20;function Sj(n,e,t,r){let i=t.getMeta(Ds),a;if(i)return i.historyState;t.getMeta(Cj)&&(n=new Hr(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Ds))return c.getMeta(Ds).redo?new Hr(n.done.addTransform(t,void 0,r,dc(e)),n.undone,Jb(t.mapping.maps),n.prevTime,n.prevComposition):new Hr(n.done,n.undone.addTransform(t,void 0,r,dc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=n.prevTime==0||!c&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-r.newGroupDelay||!wj(t,n.prevRanges)),h=c?eh(n.prevRanges,t.mapping):Jb(t.mapping.maps);return new Hr(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,dc(e)),xn.empty,h,t.time,f??n.prevComposition)}else return(a=t.getMeta("rebased"))?new Hr(n.done.rebased(t,a),n.undone.rebased(t,a),eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Hr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function wj(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&i>=e[a]&&(t=!0)}),t}function Jb(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,a,c)=>e.push(a,c));return e}function eh(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),a=e.map(n[r+1],-1);i<=a&&t.push(i,a)}return t}function Nj(n,e,t){let r=dc(e),i=Ds.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,r);if(!a)return null;let c=a.selection.resolve(a.transform.doc),f=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),i,r),d=new Hr(t?f:a.remaining,t?a.remaining:f,null,0,-1);return a.transform.setSelection(c).setMeta(Ds,{redo:t,historyState:d})}let th=!1,Xb=null;function dc(n){let e=n.plugins;if(Xb!=e){th=!1,Xb=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){th=!0;break}}return th}const Ds=new Ln("history"),Cj=new Ln("closeHistory");function Ej(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Vt({key:Ds,state:{init(){return new Hr(xn.empty,xn.empty,null,0,-1)},apply(e,t,r){return Sj(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?$v:r=="historyRedo"?Yv:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Fv(n,e){return(t,r)=>{let i=Ds.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let a=Nj(i,t,n);a&&r(e?a.scrollIntoView():a)}return!0}}const $v=Fv(!1,!0),Yv=Fv(!0,!0),Mj=bt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>$v(n,e),redo:()=>({state:n,dispatch:e})=>Yv(n,e)}},addProseMirrorPlugins(){return[Ej(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Tj=Dt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",ft(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!vR(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$from:r,$to:i}=t,a=n();return r.parentOffset===0?a.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):PD(t)?a.insertContentAt(i.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:c,dispatch:f})=>{var d;if(f){const{$to:h}=c.selection,m=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?c.setSelection(he.create(c.doc,h.pos+1)):h.nodeAfter.isBlock?c.setSelection(ie.create(c.doc,h.pos)):c.setSelection(he.create(c.doc,h.pos));else{const b=(d=h.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();b&&(c.insert(m,b),c.setSelection(he.create(c.doc,m+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[qv({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),kj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Oj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Aj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Dj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Rj=Bn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ls({find:kj,type:this.type}),Ls({find:Aj,type:this.type})]},addPasteRules(){return[Hs({find:Oj,type:this.type}),Hs({find:Dj,type:this.type})]}}),jj=Dt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ft(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),_j="listItem",Qb="textStyle",Wb=/^(\d+)\.\s$/,Bj=Dt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",ft(this.options.HTMLAttributes,t),0]:["ol",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(_j,this.editor.getAttributes(Qb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ba({find:Wb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ba({find:Wb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Qb)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),zj=Dt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Lj=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Hj=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Uj=Bn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ls({find:Lj,type:this.type})]},addPasteRules(){return[Hs({find:Hj,type:this.type})]}}),qj=Dt.create({name:"text",group:"inline"}),Vj=bt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(KR.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(IR.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(XR.configure(this.options.bulletList)),this.options.code!==!1&&n.push(ZR.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(nj.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(rj.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(lj.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(pj.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(mj.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(gj.configure(this.options.heading)),this.options.history!==!1&&n.push(Mj.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(Tj.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(Rj.configure(this.options.italic)),this.options.listItem!==!1&&n.push(jj.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(Bj.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(zj.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(Uj.configure(this.options.strike)),this.options.text!==!1&&n.push(qj.configure(this.options.text)),n}}),Pj=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Ij=Dt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",ft(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[qv({find:Pj,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),Fj=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,$j=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Yj=Bn.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Ls({find:Fj,type:this.type})]},addPasteRules(){return[Hs({find:$j,type:this.type})]}}),Gj=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const a=t.getAttribute("style"),c=(i=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${c};${a}`)})},Kj=Bn.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&Gj(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",ft(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(a=>!!a))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),Jj=bt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Xj=bt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Qj=["multipleChoice","written","scenario"];function eu({open:n,onClose:e,onSave:t,initialData:r=[]}){const[i,a]=T.useState([]),[c,f]=T.useState("multipleChoice"),[d,h]=T.useState({question:"",options:["","",""],correctIndex:0,wordLimit:150,imageUrl:""});T.useEffect(()=>{n&&(a(r),h({question:"",options:["","",""],correctIndex:0,wordLimit:150,imageUrl:""}))},[n,r]);const m=()=>d.question.trim()?c==="multipleChoice"?d.options.some(v=>v.trim()!==""):!0:!1,b=()=>{m()&&(a(S=>[...S,{type:c,...d}]),h({question:"",options:["","",""],correctIndex:0,wordLimit:150,imageUrl:""}))},x=()=>{const v=m()?[...i,{type:c,...d}]:i;t(v),e()};return n?y.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center",children:y.jsxs("div",{className:"bg-white p-6 rounded max-w-2xl w-full space-y-4 shadow-lg",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"📋 Build Assessment"}),y.jsx("label",{className:"block text-sm font-medium",children:"Question Type"}),y.jsx("select",{value:c,onChange:S=>f(S.target.value),className:"w-full border px-3 py-2 rounded",children:Qj.map(S=>y.jsx("option",{value:S,children:S},S))}),y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Question Prompt"}),y.jsx("input",{type:"text",value:d.question,onChange:S=>h({...d,question:S.target.value}),className:"w-full border px-3 py-2 rounded"}),c==="multipleChoice"&&y.jsxs(y.Fragment,{children:[d.options.map((S,v)=>y.jsxs("div",{className:"mt-2",children:[y.jsxs("label",{className:"text-sm block font-medium",children:["Option ",v+1]}),y.jsx("input",{type:"text",value:S,onChange:N=>{const C=[...d.options];C[v]=N.target.value,h({...d,options:C})},className:"w-full border px-3 py-2 rounded"})]},v)),y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Correct Answer"}),y.jsx("select",{value:d.correctIndex,onChange:S=>h({...d,correctIndex:parseInt(S.target.value)}),className:"w-full border px-3 py-2 rounded",children:d.options.map((S,v)=>y.jsxs("option",{value:v,children:["Option ",v+1]},v))})]}),c==="written"&&y.jsxs(y.Fragment,{children:[y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Word Limit"}),y.jsx("input",{type:"number",value:d.wordLimit,onChange:S=>h({...d,wordLimit:parseInt(S.target.value)}),className:"w-full border px-3 py-2 rounded"})]}),c==="scenario"&&y.jsxs(y.Fragment,{children:[y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Image URL"}),y.jsx("input",{type:"text",value:d.imageUrl,onChange:S=>h({...d,imageUrl:S.target.value}),className:"w-full border px-3 py-2 rounded"}),y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Scenario Description"}),y.jsx("textarea",{value:d.question,onChange:S=>h({...d,question:S.target.value}),className:"w-full border px-3 py-2 rounded",rows:3})]}),y.jsxs("div",{className:"flex justify-between items-center mt-4",children:[y.jsx("button",{type:"button",onClick:b,className:"text-green-600 hover:underline text-sm",children:"➕ Add Question"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cancel"}),y.jsx("button",{onClick:x,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"✅ Save Assessment"})]})]})]})}):null}function Wj({onSave:n,initialData:e={}}){const[t,r]=T.useState(e.title||""),[i,a]=T.useState(e.summary||""),[c,f]=T.useState(e.xp||10),[d,h]=T.useState(e.assessment||[]),[m,b]=T.useState(!1),x=!!e?.title,S=HR({extensions:[Vj.configure({bulletList:{keepMarks:!0},heading:{levels:[1,2,3]}}),Kj,Jj.configure({types:["textStyle"]}),Yj,Xj.configure({types:["heading","paragraph"]}),Ij],content:e.content||"<p>Start writing your chapter...</p>"});T.useEffect(()=>{const N=localStorage.getItem("chapterDraft");if(N&&!x&&S){const C=JSON.parse(N);r(C.title||""),a(C.summary||""),f(C.xp||10),h(C.assessment||[]),S.commands.setContent(C.content||"")}},[S]),T.useEffect(()=>{if(!x){const N={title:t,summary:i,content:S?.getHTML(),xp:c,assessment:d};localStorage.setItem("chapterDraft",JSON.stringify(N))}},[t,i,c,d,S?.getHTML()]);const v=N=>{if(N.preventDefault(),!t.trim()||!i.trim()||!S||d.length===0){alert("Please complete all fields and the assessment before saving.");return}const C={title:t,summary:i,content:S.getHTML(),xp:Number(c)||0,assessment:d};console.log("💾 Saving chapter:",C),n(C),x||localStorage.removeItem("chapterDraft"),r(""),a(""),f(10),h([]),S.commands.clearContent()};return y.jsxs("form",{onSubmit:v,className:"space-y-4",children:[y.jsx("input",{type:"text",placeholder:"Chapter Title",value:t,onChange:N=>r(N.target.value),className:"w-full border px-3 py-2 rounded",required:!0}),y.jsx("textarea",{placeholder:"Chapter Summary (what learners should expect)",value:i,onChange:N=>a(N.target.value),className:"w-full border px-3 py-2 rounded",rows:3,required:!0}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("label",{className:"text-sm font-medium",children:"XP Reward:"}),y.jsx("input",{type:"number",min:"0",value:c,onChange:N=>f(N.target.value),className:"w-24 border px-2 py-1 rounded"}),y.jsx("span",{className:"text-sm text-gray-500",children:"XP awarded on completion"})]}),y.jsxs("div",{className:"space-y-2 border-b pb-3",children:[y.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[y.jsx("span",{className:"font-semibold text-gray-700 w-20",children:"Font"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().toggleBold().run(),className:"btn",children:"Bold"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().toggleItalic().run(),className:"btn",children:"Italic"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().toggleBulletList().run(),className:"btn",children:"• List"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().toggleHeading({level:1}).run(),className:"btn",children:"H1"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().toggleHeading({level:2}).run(),className:"btn",children:"H2"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().toggleHeading({level:3}).run(),className:"btn",children:"H3"})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[y.jsx("span",{className:"font-semibold text-gray-700 w-20",children:"Color"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().setColor("#e11d48").run(),className:"btn text-rose-600",children:"Red"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().setColor("#2563eb").run(),className:"btn text-blue-600",children:"Blue"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().setHighlight().run(),className:"btn bg-yellow-200",children:"Highlight"})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[y.jsx("span",{className:"font-semibold text-gray-700 w-20",children:"Layout"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().setTextAlign("left").run(),className:"btn",children:"Left"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().setTextAlign("center").run(),className:"btn",children:"Center"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().setTextAlign("right").run(),className:"btn",children:"Right"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().toggleBlockquote().run(),className:"btn",children:"Quote"})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[y.jsx("span",{className:"font-semibold text-gray-700 w-20",children:"Media"}),y.jsx("button",{type:"button",onClick:()=>{const N=prompt("Image URL");N&&S.chain().focus().setImage({src:N}).run()},className:"btn",children:"Image"}),y.jsx("button",{type:"button",onClick:()=>S.chain().focus().unsetAllMarks().clearNodes().run(),className:"btn text-gray-500",children:"Clear"})]})]}),y.jsx("div",{className:"border rounded p-2 bg-white",children:y.jsx(kR,{editor:S})}),y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-md font-semibold",children:"📋 Chapter Assessment"}),y.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-blue-600 hover:underline",children:"✍️ Edit Assessment"}),d.length>0&&y.jsx("ul",{className:"mt-2 text-sm text-gray-700 list-disc pl-4",children:d.map((N,C)=>y.jsx("li",{children:N.question},C))}),y.jsx(eu,{open:m,onClose:()=>b(!1),onSave:N=>h(N),initialData:d})]}),y.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Save Chapter"})]})}function Zj({chapter:n}){return n?y.jsxs("div",{className:"space-y-6",children:[y.jsx("h2",{className:"text-xl font-semibold",children:n.title}),y.jsx("p",{className:"text-gray-700",children:n.summary||"No summary provided."}),y.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:n.content||"<p>No content yet.</p>"}}),n.assessment?.length>0&&y.jsxs("div",{className:"mt-4",children:[y.jsx("h3",{className:"font-semibold text-gray-800",children:"📋 Assessment"}),y.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-700",children:n.assessment.map((e,t)=>y.jsxs("li",{children:[y.jsxs("strong",{children:["Q",t+1," (",e.type,"):"]})," ",e.question]},t))})]}),y.jsx("button",{className:"mt-2 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Start Chapter"})]}):y.jsx("p",{className:"text-gray-500",children:"No chapter selected."})}const e3=({data:n=[],courseId:e,refresh:t,onAddChapter:r,onSelectItem:i,onAddTerm:a,onAddTopic:c,onAddLesson:f})=>{const[d,h]=T.useState(null),[m,b]=T.useState(null),x=(C,M)=>d&&d.type===C&&JSON.stringify(d.indexes)===JSON.stringify(M),S=(C,M,_)=>{h({type:C,indexes:M}),i({type:C,item:_,indexes:M})},v=()=>b(null),N=async()=>{const{type:C,indexes:M}=m;{const _=[...n];C==="term"?_.splice(M.termIndex,1):C==="topic"?_[M.termIndex].topics.splice(M.topicIndex,1):C==="lesson"?_[M.termIndex].topics[M.topicIndex].lessons.splice(M.lessonIndex,1):C==="chapter"&&_[M.termIndex].topics[M.topicIndex].lessons[M.lessonIndex].chapters.splice(M.chapterIndex,1),t(_),v();return}};return y.jsxs("div",{className:"space-y-4 text-sm",children:[y.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[y.jsx("button",{onClick:a,className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200",children:"Add Term"}),y.jsx("button",{disabled:d?.type!=="term",onClick:()=>{const{termIndex:C}=d?.indexes||{};c(C)},className:`px-3 py-1 rounded ${d?.type==="term"?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Add Topic"}),y.jsx("button",{disabled:d?.type!=="topic",onClick:()=>{const{termIndex:C,topicIndex:M}=d?.indexes||{};f(C,M)},className:`px-3 py-1 rounded ${d?.type==="topic"?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Add Lesson"}),y.jsx("button",{disabled:d?.type!=="lesson",onClick:()=>{const{termIndex:C,topicIndex:M,lessonIndex:_}=d?.indexes||{};r(C,M,_)},className:`px-3 py-1 rounded ${d?.type==="lesson"?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Add Chapter"})]}),n.map((C,M)=>y.jsxs("div",{className:"border-l-2 pl-2 space-y-1",children:[y.jsx("div",{className:`cursor-pointer ${x("term",{termIndex:M})?"text-indigo-600 font-semibold":"text-gray-800"}`,onClick:()=>S("term",{termIndex:M},C),children:C.title||`Term ${C.term}`}),C.topics?.map((_,q)=>y.jsxs("div",{className:"ml-4 border-l-2 pl-2 space-y-1",children:[y.jsx("div",{className:`cursor-pointer ${x("topic",{termIndex:M,topicIndex:q})?"text-indigo-600 font-semibold":"text-gray-700"}`,onClick:()=>S("topic",{termIndex:M,topicIndex:q},_),children:_.title}),_.lessons?.map((K,F)=>y.jsxs("div",{className:"ml-4 border-l-2 pl-2 space-y-1",children:[y.jsx("div",{className:`cursor-pointer ${x("lesson",{termIndex:M,topicIndex:q,lessonIndex:F})?"text-indigo-600 font-semibold":"text-gray-600"}`,onClick:()=>S("lesson",{termIndex:M,topicIndex:q,lessonIndex:F},K),children:K.title}),K.chapters?.map((Z,Y)=>y.jsx("div",{onClick:()=>S("chapter",{termIndex:M,topicIndex:q,lessonIndex:F,chapterIndex:Y},Z),className:`ml-4 pl-2 border-l-2 cursor-pointer ${x("chapter",{termIndex:M,topicIndex:q,lessonIndex:F,chapterIndex:Y})?"text-indigo-600 font-semibold":"text-gray-500"} hover:text-indigo-500`,children:Z.title},Y))]},F))]},q))]},M)),m?.mode==="delete"?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center",children:y.jsxs("div",{className:"bg-white p-6 rounded max-w-md w-full space-y-4",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Confirm Deletion"}),y.jsxs("p",{children:["Are you sure you want to delete this ",m.type,"? This will also remove all nested items underneath it."]}),y.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[y.jsx("button",{onClick:v,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),y.jsx("button",{onClick:N,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Yes, Delete"})]})]})}):null]})};function t3({initialData:n={},onSubmit:e,onClose:t}){const[r,i]=T.useState(n.title||""),[a,c]=T.useState(n.summary||""),[f,d]=T.useState(n.assessment||[]),[h,m]=T.useState(!1),b=()=>{const x={...n,title:r,summary:a,assessment:f};console.log("💾 Saving term:",x),e(x),t()};return y.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center",children:y.jsxs("div",{className:"bg-white p-6 rounded max-w-xl w-full space-y-4",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Edit Term"}),y.jsx("input",{type:"text",placeholder:"Term Title",value:r,onChange:x=>i(x.target.value),className:"w-full border px-3 py-2 rounded"}),y.jsx("textarea",{placeholder:"Summary",value:a,onChange:x=>c(x.target.value),className:"w-full border px-3 py-2 rounded",rows:3}),y.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-sm text-indigo-600 hover:underline",children:"✍️ Edit Assessment"}),y.jsx(eu,{open:h,initialData:f,onClose:()=>m(!1),onSave:d}),y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),y.jsx("button",{onClick:b,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Save"})]})]})})}function n3({initialData:n={},onSubmit:e,onClose:t}){const[r,i]=T.useState(n.title||""),[a,c]=T.useState(n.summary||""),[f,d]=T.useState(n.assessment||[]),[h,m]=T.useState(!1),b=()=>{const x={...n,title:r,summary:a,assessment:f};console.log("💾 Saving topic:",x),e(x),t()};return y.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center",children:y.jsxs("div",{className:"bg-white p-6 rounded max-w-xl w-full space-y-4",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Edit Topic"}),y.jsx("input",{type:"text",placeholder:"Topic Title",value:r,onChange:x=>i(x.target.value),className:"w-full border px-3 py-2 rounded"}),y.jsx("textarea",{placeholder:"Summary",value:a,onChange:x=>c(x.target.value),className:"w-full border px-3 py-2 rounded",rows:3}),y.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-sm text-indigo-600 hover:underline",children:"✍️ Edit Assessment"}),y.jsx(eu,{open:h,initialData:f,onClose:()=>m(!1),onSave:d}),y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),y.jsx("button",{onClick:b,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Save"})]})]})})}function r3({initialData:n={},onSubmit:e,onClose:t}){const[r,i]=T.useState(n.title||""),[a,c]=T.useState(n.summary||""),[f,d]=T.useState(n.assessment||[]),[h,m]=T.useState(!1),b=()=>{const x={...n,title:r,summary:a,assessment:f};console.log("💾 Saving lesson:",x),e(x),t()};return y.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 flex items-center justify-center",children:y.jsxs("div",{className:"bg-white p-6 rounded max-w-xl w-full space-y-4",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Edit Lesson"}),y.jsx("input",{type:"text",placeholder:"Lesson Title",value:r,onChange:x=>i(x.target.value),className:"w-full border px-3 py-2 rounded"}),y.jsx("textarea",{placeholder:"Summary",value:a,onChange:x=>c(x.target.value),className:"w-full border px-3 py-2 rounded",rows:3}),y.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-sm text-indigo-600 hover:underline",children:"✍️ Edit Assessment"}),y.jsx(eu,{open:h,initialData:f,onClose:()=>m(!1),onSave:d}),y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"}),y.jsx("button",{onClick:b,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"Save"})]})]})})}const Zb=!1,s3={_id:"lesson1",title:"Algebra Basics",terms:[{title:"Term 1",summary:"Foundations of Algebra",assessment:[],topics:[{title:"Expressions",summary:"Simplifying expressions",assessment:[],lessons:[{title:"Intro to Variables",summary:"What is a variable?",assessment:[],chapters:[{title:"Chapter 1",summary:"Understanding variables",content:"<p>Variables are symbols...</p>",xp:10,assessment:[]}]}]}]}]};function i3({lessonId:n}){const[e,t]=T.useState(null),[r,i]=T.useState(null),[a,c]=T.useState(null),[f,d]=T.useState(null),[h,m]=T.useState(null),[b,x]=T.useState(!1),[S,v]=T.useState(null),N=async()=>{{t(s3);return}};T.useEffect(()=>{N()},[n]);const C=async re=>{try{const{termIndex:ce,topicIndex:He,lessonIndex:Je}=a;if(!Zb){const U={...e};U.terms[ce].topics[He].lessons[Je].chapters.push(re),t(U),x(!1),c(null),localStorage.removeItem("chapterDraft");return}const Ae=`/api/lessons/${n}/term/${ce}/topic/${He}/lesson/${Je}/chapter`;await Ue.post(Ae,re),x(!1),c(null),localStorage.removeItem("chapterDraft"),N()}catch(ce){console.error("❌ Failed to save chapter:",ce)}},M=async re=>{try{const{termIndex:ce,topicIndex:He,lessonIndex:Je,chapterIndex:Ae}=r||{};if(typeof Ae!="number")return;if(!Zb){const X={...e};X.terms[ce].topics[He].lessons[Je].chapters[Ae]=re,t(X),x(!1),m(null),localStorage.removeItem("chapterDraft");return}const U=`/api/lessons/${n}/term/${ce}/topic/${He}/lesson/${Je}/chapter/${Ae}`;await Ue.patch(U,re),x(!1),m(null),localStorage.removeItem("chapterDraft"),N()}catch(ce){console.error("❌ Failed to update chapter:",ce)}},_=(re,ce,He)=>{c({termIndex:re,topicIndex:ce,lessonIndex:He}),x(!0),m(null),d(null)},q=()=>{v({mode:"create",type:"term",indexes:{},initialData:{title:"",summary:"",assessment:[]}})},K=re=>{v({mode:"create",type:"topic",indexes:{termIndex:re},initialData:{title:"",summary:"",assessment:[]}})},F=(re,ce)=>{v({mode:"create",type:"lesson",indexes:{termIndex:re,topicIndex:ce},initialData:{title:"",summary:"",assessment:[]}})},Z=(re,ce)=>{m(re),i({type:"chapter",item:re,...ce}),x(!0),d(null)},Y=re=>{d(re),x(!1),m(null)},L=()=>{x(!1),m(null),c(null),localStorage.removeItem("chapterDraft")},J=async()=>{const{type:re,indexes:ce}=S;{const He={...e};re==="term"?He.terms.splice(ce.termIndex,1):re==="topic"?He.terms[ce.termIndex].topics.splice(ce.topicIndex,1):re==="lesson"?He.terms[ce.termIndex].topics[ce.topicIndex].lessons.splice(ce.lessonIndex,1):re==="chapter"&&He.terms[ce.termIndex].topics[ce.topicIndex].lessons[ce.lessonIndex].chapters.splice(ce.chapterIndex,1),t(He),v(null);return}},le=async re=>{const{mode:ce,type:He,indexes:Je}=S;{const Ae={...e};if(He==="term")ce==="edit"?Ae.terms[Je.termIndex]=re:Ae.terms.push({...re,topics:[]});else if(He==="topic"){const U=Ae.terms[Je.termIndex];U.topics||(U.topics=[]),ce==="edit"?U.topics[Je.topicIndex]=re:U.topics.push({...re,lessons:[]})}else if(He==="lesson"){const U=Ae.terms[Je.termIndex].topics[Je.topicIndex];U.lessons||(U.lessons=[]),ce==="edit"?U.lessons[Je.lessonIndex]=re:U.lessons.push({...re,chapters:[]})}t(Ae),v(null);return}};return e?y.jsxs("div",{className:"flex h-[60vh] border rounded overflow-hidden",children:[y.jsx("div",{className:"w-1/3 bg-gray-50 p-4 overflow-y-auto border-r",children:y.jsx(e3,{data:e.terms,courseId:e._id,refresh:N,onAddChapter:_,onSelectItem:i,onAddTerm:q,onAddTopic:K,onAddLesson:F})}),y.jsx("div",{className:"w-3/4 p-6 overflow-y-auto",children:b?y.jsxs(y.Fragment,{children:[y.jsx(Wj,{onSave:h?M:C,initialData:h||{title:"",summary:"",content:"",xp:10,assessment:[]}}),y.jsx("button",{onClick:L,className:"mt-4 px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"← Exit Chapter View"})]}):f?y.jsxs("div",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xl font-semibold",children:f.title}),y.jsx(Zj,{chapter:f}),y.jsx("button",{onClick:()=>d(null),className:"mt-4 px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"← Exit Chapter View"})]}):r?y.jsxs("div",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xl font-semibold",children:r.item.title}),y.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:r.item.summary||"No summary provided."}),r.item.assessment?.length>0&&y.jsxs("div",{className:"mt-4",children:[y.jsx("h3",{className:"font-semibold text-gray-800",children:"📋 Assessment"}),y.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-700",children:r.item.assessment.map((re,ce)=>y.jsxs("li",{children:[y.jsxs("strong",{children:["Q",ce+1," (",re.type,"):"]})," ",re.question]},ce))})]}),["term","topic","lesson"].includes(r.type)&&y.jsxs("div",{className:"flex gap-2 mt-4",children:[y.jsxs("button",{onClick:()=>v({mode:"edit",type:r.type,indexes:r.indexes,initialData:r.item}),className:"px-4 py-2 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600",children:["Edit ",r.type]}),y.jsxs("button",{onClick:()=>v({mode:"delete",type:r.type,indexes:r.indexes}),className:"px-4 py-2 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:["Delete ",r.type]})]}),r.type==="chapter"&&y.jsxs("div",{className:"flex gap-2 mt-4",children:[y.jsx("button",{onClick:()=>Y(r.item),className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Start Chapter"}),y.jsx("button",{onClick:()=>Z(r.item,r),className:"px-4 py-2 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Edit Chapter"}),y.jsx("button",{onClick:()=>v({mode:"delete",type:"chapter",indexes:r.indexes}),className:"px-4 py-2 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete Chapter"})]})]}):y.jsx("p",{className:"text-gray-500",children:"Select a term, topic, lesson, or chapter to view its summary."})}),S?.mode==="create"||S?.mode==="edit"?y.jsxs(y.Fragment,{children:[S.type==="term"&&y.jsx(t3,{initialData:S.initialData||{},onClose:()=>v(null),onSubmit:re=>le({...re})}),S.type==="topic"&&y.jsx(n3,{initialData:S.initialData||{},onClose:()=>v(null),onSubmit:re=>le({...re})}),S.type==="lesson"&&y.jsx(r3,{initialData:S.initialData||{},onClose:()=>v(null),onSubmit:re=>le({...re})})]}):null,S?.mode==="delete"&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center",children:y.jsxs("div",{className:"bg-white p-6 rounded max-w-md w-full space-y-4",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Confirm Deletion"}),y.jsxs("p",{children:["Are you sure you want to delete this ",S.type,"? This will also remove all nested items underneath it."]}),y.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[y.jsx("button",{onClick:()=>v(null),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),y.jsx("button",{onClick:J,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Yes, Delete"})]})]})})]}):y.jsx("p",{className:"text-gray-500",children:"Loading lesson structure..."})}const l3=!1,a3=[{_id:"lesson1",title:"Algebra Basics",subject:"Math",description:"Intro to algebraic expressions and equations",grade:"10",schedule:"Mon & Wed 10:00",learners:["l1","l2"]},{_id:"lesson2",title:"Photosynthesis",subject:"Biology",description:"Understanding plant energy conversion",grade:"9",schedule:"Tue 14:00",learners:["l3"]}],o3=()=>{const[n,e]=T.useState([]),[t,r]=T.useState(!1),[i,a]=T.useState(null),[c,f]=T.useState({title:"",subject:"",description:"",grade:"",schedule:""});Us();const d=async()=>{{e(a3);return}},h=async m=>{m.preventDefault();const b={...c,_id:Date.now().toString(),learners:[]};try{l3||e(x=>[...x,b]),f({title:"",subject:"",description:"",grade:"",schedule:""}),r(!1)}catch(x){console.error("❌ Failed to create lesson:",x)}};return T.useEffect(()=>{d()},[]),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-xl font-semibold",children:"Manage Lessons"}),y.jsx("button",{onClick:()=>r(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"+ Create Lesson"})]}),y.jsxs("table",{className:"w-full text-sm border",children:[y.jsx("thead",{className:"bg-gray-100 text-left",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-2",children:"Title"}),y.jsx("th",{children:"Subject"}),y.jsx("th",{children:"Grade"}),y.jsx("th",{children:"Schedule"}),y.jsx("th",{children:"Learners"}),y.jsx("th",{children:"Actions"})]})}),y.jsx("tbody",{children:n.map(m=>y.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[y.jsx("td",{className:"p-2",children:m.title}),y.jsx("td",{children:m.subject}),y.jsx("td",{children:m.grade}),y.jsx("td",{children:m.schedule}),y.jsx("td",{children:m.learners?.length||0}),y.jsx("td",{children:y.jsx("button",{onClick:()=>a(m),className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded hover:bg-indigo-200 text-sm",children:"View Structure"})})]},m._id))})]}),i&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white w-full max-w-5xl h-[80vh] rounded-lg shadow-lg overflow-hidden relative",children:[y.jsx("button",{onClick:()=>a(null),className:"absolute top-3 right-3 text-gray-500 hover:text-black",children:"✕"}),y.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b",children:[y.jsx("h3",{className:"text-lg font-semibold",children:i.title}),y.jsx("a",{href:`/faculty/lessons/view/${i._id}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:underline",children:"View Full Page ↗"})]}),y.jsx("div",{className:"p-4 h-full overflow-y-auto",children:y.jsx(i3,{lessonId:i._id})})]})}),t&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md relative",children:[y.jsx("button",{onClick:()=>r(!1),className:"absolute top-2 right-2 text-gray-500 hover:text-black",children:"✕"}),y.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New Lesson"}),y.jsxs("form",{onSubmit:h,className:"space-y-3",children:[["title","subject","grade","schedule"].map(m=>y.jsx("input",{type:"text",placeholder:m.charAt(0).toUpperCase()+m.slice(1),value:c[m],onChange:b=>f({...c,[m]:b.target.value}),className:"border px-3 py-2 rounded w-full",required:!0},m)),y.jsx("textarea",{placeholder:"Description",value:c.description,onChange:m=>f({...c,description:m.target.value}),className:"border px-3 py-2 rounded w-full"}),y.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 w-full",children:"Create Lesson"})]})]})})]})},c3=()=>{const[n,e]=T.useState([]),[t,r]=T.useState(""),[i,a]=T.useState(null),[c,f]=T.useState({}),[d,h]=T.useState(!1),[m,b]=T.useState(!1),[x,S]=T.useState(!1),[v,N]=T.useState(""),[C,M]=T.useState({name:"",email:"",password:"",role:"",phone:"",subject:"",bio:""}),_=()=>{const Y=localStorage.getItem("facultyCache");if(Y)e(JSON.parse(Y));else{const L=[{_id:"f1",name:"Thandi Mokoena",email:"thandi@school.edu",role:"educator",phone:"0821234567",subject:"Mathematics",bio:"Passionate about numbers and nurturing minds."}];localStorage.setItem("facultyCache",JSON.stringify(L)),e(L)}},q=()=>{const Y={...c};v&&(Y.password=v);const L=localStorage.getItem("facultyCache"),J=L?JSON.parse(L):[],le=J.findIndex(re=>re._id===Y._id);le!==-1&&(J[le]=Y),localStorage.setItem("facultyCache",JSON.stringify(J)),e(J),h(!1),N("")},K=Y=>{if(!window.confirm("Are you sure you want to delete this faculty member?"))return;const L=localStorage.getItem("facultyCache"),le=(L?JSON.parse(L):[]).filter(re=>re._id!==Y);localStorage.setItem("facultyCache",JSON.stringify(le)),e(le),a(null)},F=Y=>{Y.preventDefault();const L=localStorage.getItem("facultyCache"),J=L?JSON.parse(L):[],le={...C,_id:`offline-${Date.now()}`},re=[...J,le];localStorage.setItem("facultyCache",JSON.stringify(re)),e(re),M({name:"",email:"",password:"",role:"",phone:"",subject:"",bio:""}),b(!1)};T.useEffect(()=>{_()},[]);const Z=n.filter(Y=>Y.name.toLowerCase().includes(t.toLowerCase()));return y.jsxs("div",{className:"space-y-10",children:[y.jsx("div",{className:"bg-yellow-100 text-yellow-800 text-sm p-2 rounded mb-4",children:"You’re working offline. All changes are saved locally."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsx(ji,{icon:y.jsx(Qx,{className:"w-6 h-6"}),label:"Total Faculty",value:n.length}),y.jsx(ji,{icon:y.jsx(Wx,{className:"w-6 h-6"}),label:"New This Term",value:"5"}),y.jsx(ji,{icon:y.jsx(Jx,{className:"w-6 h-6"}),label:"Departures",value:"1"})]}),!i&&y.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Manage Faculty"}),y.jsx("button",{onClick:()=>b(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition",children:"+ Hire Faculty"})]}),y.jsxs("div",{className:"relative mb-4",children:[y.jsx(Xx,{className:"w-5 h-5 absolute left-3 top-2.5 text-gray-400"}),y.jsx("input",{type:"text",placeholder:"Search faculty...",value:t,onChange:Y=>r(Y.target.value),className:"pl-10 pr-4 py-2 border rounded w-full text-sm"})]}),y.jsxs("table",{className:"w-full text-sm text-left",children:[y.jsx("thead",{className:"text-gray-600 border-b",children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2",children:"Name"}),y.jsx("th",{children:"Email"}),y.jsx("th",{children:"Role"})]})}),y.jsx("tbody",{children:Z.map(Y=>y.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{a(Y._id),f(Y),h(!1)},children:[y.jsx("td",{className:"py-2",children:Y.name}),y.jsx("td",{children:Y.email}),y.jsx("td",{children:Y.role})]},Y._id))})]})]}),i&&c._id&&y.jsxs("div",{className:"mt-10 bg-white rounded-xl shadow-lg p-6 border border-indigo-100",children:[y.jsx("button",{onClick:()=>{a(null),h(!1)},className:"mb-4 text-indigo-600 hover:underline text-sm",children:"Back to Faculty List"}),y.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[y.jsx("img",{src:`https://api.dicebear.com/7.x/initials/svg?seed=${c.name}`,alt:"Profile",className:"w-28 h-28 rounded-full border shadow"}),y.jsxs("div",{className:"flex-1 space-y-3 text-sm text-gray-700",children:[[["Name","name"],["Email","email"],["Phone","phone"],["Subject","subject"],["Bio","bio"]].map(([Y,L])=>y.jsxs("div",{children:[y.jsxs("strong",{children:[Y,":"]})," ",d?y.jsx("input",{name:L,value:c[L]||"",onChange:J=>f({...c,[L]:J.target.value}),className:"border px-2 py-1 rounded text-sm w-full mt-1"}):y.jsx("span",{children:c[L]||"—"})]},L)),d&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Change Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:x?"text":"password",value:v,onChange:Y=>N(Y.target.value),placeholder:"New Password",className:"border px-3 py-2 rounded w-full pr-10"}),y.jsx("button",{type:"button",onClick:()=>S(!x),className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",children:x?y.jsx(IM,{className:"w-5 h-5"}):y.jsx($M,{className:"w-5 h-5"})})]})]}),y.jsx("div",{className:"flex gap-4 mt-4",children:d?y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:q,className:"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700",children:"Save"}),y.jsx("button",{onClick:()=>{h(!1),N("")},className:"text-gray-600 hover:underline",children:"Cancel"})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>h(!0),className:"text-indigo-600 hover:underline",children:"Edit Profile"}),y.jsx("button",{onClick:()=>K(c._id),className:"text-red-600 hover:underline",children:"Delete Faculty"})]})})]})]})]}),m&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md relative",children:[y.jsx("button",{onClick:()=>b(!1),className:"absolute top-2 right-2 text-gray-500 hover:text-black",children:"✕"}),y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Hire New Faculty"}),y.jsxs("form",{onSubmit:F,className:"space-y-4",children:[y.jsx("input",{type:"text",placeholder:"Full Name",value:C.name,onChange:Y=>M({...C,name:Y.target.value}),required:!0,className:"border px-3 py-2 rounded w-full"}),y.jsx("input",{type:"email",placeholder:"Email",value:C.email,onChange:Y=>M({...C,email:Y.target.value}),required:!0,className:"border px-3 py-2 rounded w-full"}),y.jsx("input",{type:"password",placeholder:"Temporary Password",value:C.password,onChange:Y=>M({...C,password:Y.target.value}),required:!0,className:"border px-3 py-2 rounded w-full"}),y.jsxs("select",{value:C.role,onChange:Y=>M({...C,role:Y.target.value}),required:!0,className:"border px-3 py-2 rounded w-full",children:[y.jsx("option",{value:"",children:"Select Role"}),y.jsx("option",{value:"educator",children:"Educator"}),y.jsx("option",{value:"contentHead",children:"Content Head"}),y.jsx("option",{value:"onboarder",children:"Onboarder"}),y.jsx("option",{value:"announcer",children:"Announcer"})]}),y.jsx("input",{type:"text",placeholder:"Phone Number",value:C.phone,onChange:Y=>M({...C,phone:Y.target.value}),className:"border px-3 py-2 rounded w-full"}),y.jsx("input",{type:"text",placeholder:"Subject / Learning Area",value:C.subject,onChange:Y=>M({...C,subject:Y.target.value}),className:"border px-3 py-2 rounded w-full"}),y.jsx("textarea",{placeholder:"Short Bio",value:C.bio,onChange:Y=>M({...C,bio:Y.target.value}),className:"border px-3 py-2 rounded w-full"}),y.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 w-full",children:"Hire Faculty"})]})]})})]})};function u3(){return y.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Manage LMS"}),y.jsx("p",{className:"text-sm text-gray-600",children:"This section will allow you to configure LMS modules, enable or disable features, and manage system-wide settings."}),y.jsx("div",{className:"mt-6 text-gray-400 italic",children:"[Feature toggles and module settings coming soon...]"})]})}function f3({activeTab:n,role:e}){switch(n){case"dashboard":return y.jsx(rT,{});case"announcements":if(["admin","announcer"].includes(e))return y.jsx(Nk,{});break;case"manage-learners":if(["admin","onboarder"].includes(e))return y.jsx(Ek,{});break;case"manage-lessons":if(["admin","contentHead"].includes(e))return y.jsx(o3,{});break;case"manage-faculty":if(e==="admin")return y.jsx(c3,{});break;case"manage-lms":if(e==="admin")return y.jsx(u3,{});break;default:return null}return y.jsxs("div",{className:"p-4 text-center text-gray-500",children:["🔒 You don’t have access to this section.",y.jsx("br",{}),"Required role: ",y.jsx("strong",{children:d3(n)})]})}function d3(n){return{announcements:["admin","announcer"],"manage-learners":["admin","onboarder"],"manage-lessons":["admin","contentHead"],"manage-faculty":["admin"],"manage-lms":["admin"]}[n]?.join(", ")||"No access"}function h3(){const[n,e]=T.useState("dashboard"),[t,r]=T.useState(""),[i,a]=T.useState(0),c=Us();T.useEffect(()=>{const d=localStorage.getItem("userRole")||"";r(d);const m={admin:10,faculty:5,educator:4,contentHead:6,announcer:3}[d]||0;a(m),m===0&&c("/unauthorized")},[c]);const f=()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole"),c("/")};return y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsxs("div",{className:"relative",children:[y.jsx(QM,{title:"Mr.",name:"WhoWho"}),y.jsxs("button",{onClick:f,className:"absolute top-4 right-4 bg-white/80 text-red-600 hover:bg-white text-sm px-3 py-1 rounded-full shadow flex items-center gap-1 transition z-10",children:[y.jsx(_M,{className:"w-4 h-4"}),"Logout"]})]}),y.jsxs("main",{className:"max-w-6xl mx-auto px-6 py-8 space-y-6",children:[y.jsx(eT,{activeTab:n,setActiveTab:e,role:t}),y.jsx(f3,{activeTab:n,role:t})]})]})}function p3(){const n=Us(),e=["School Updates","Dev Updates","Timetable"],[t,r]=Zx(e.length),i={"School Updates":["📢 Midterm exams start next week.","📢 School trip forms due Friday."],"Dev Updates":["🛠️ Dark mode launching soon!","🛠️ New badge system in testing."],Timetable:["🕒 08:00 - Math (Room 201)","🕒 10:00 - History (Room 105)","🕒 13:00 - Computer Science (Lab 3)"]},a=()=>{e[t]==="Timetable"?n("/timetable"):n("/notifications")};return y.jsxs(Ph,{children:[y.jsxs("div",{className:"text-center text-white mb-6",children:[y.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Welcome Back, Bongani"}),y.jsx("p",{className:"mt-2 text-white/90",children:"Here’s what’s happening in your learning journey today:"})]}),y.jsxs("div",{className:"backdrop-blur-md bg-white/30 rounded-lg p-4 max-h-64 overflow-y-auto shadow-inner flex flex-col justify-between",children:[y.jsx("div",{className:"space-y-3",children:i[e[t]].map((c,f)=>y.jsx("div",{onClick:a,className:"bg-white/60 p-3 rounded cursor-pointer hover:bg-white/80 transition",children:y.jsx("p",{className:"text-sm text-gray-800",children:c})},f))}),y.jsx("div",{className:"flex justify-center mt-4 space-x-4",children:e.map((c,f)=>y.jsx("button",{onClick:()=>r(f),className:`text-xs font-medium px-3 py-1 rounded-full transition ${f===t?"bg-white/80 text-gray-800":"text-white/70 hover:text-white"}`,children:c},c))})]})]})}function Gv(){const n=Us(),e=or(),t=[{name:"Dashboard",path:"/dashboard"},{name:"Classes",path:"/classes"},{name:"Timetable",path:"/timetable"},{name:"Notifications",path:"/notifications"}],r=()=>{n("/")};return y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("div",{className:"flex space-x-4",children:t.map(i=>y.jsx("button",{onClick:()=>n(i.path),className:`text-sm font-medium px-4 py-2 rounded-full transition ${e.pathname===i.path?"bg-indigo-500 text-white shadow":"text-indigo-600 hover:bg-indigo-100"}`,children:i.name},i.path))}),y.jsx("button",{onClick:r,className:"bg-red-500 text-white px-4 py-2 rounded-full text-sm hover:bg-red-600 transition",children:"Logout"})]})}function m3(){const t=[{name:"Math",progress:80},{name:"English",progress:60},{name:"Science",progress:45},{name:"Life Orientation",progress:90}],r=["Egg","Caterpillar","Chrysalis","Butterfly"];return y.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Level Progression Overview"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Growth Phase"}),y.jsxs("p",{className:"text-gray-600 mb-4",children:["You are currently in the ",y.jsx("strong",{children:r[1]})," phase."]}),y.jsxs("div",{className:"relative h-4 bg-gray-200 rounded-full overflow-hidden mb-2",children:[y.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 to-pink-400 transition-all duration-500",style:{width:"65%"}}),[0,25,50,75,100].map((i,a)=>y.jsx("div",{className:"absolute top-0 h-full border-l-2 border-white",style:{left:`${i}%`}},a))]}),y.jsxs("p",{className:"text-sm text-gray-500",children:[35,"% left until you reach the ",y.jsx("strong",{children:r[2]})," phase."]})]}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Subject Progress"}),y.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-2",children:t.map((i,a)=>y.jsxs("div",{className:"min-w-[140px] bg-white/70 p-3 rounded-lg shadow-sm flex-shrink-0",children:[y.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1 text-center",children:i.name}),y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:y.jsx("div",{className:"bg-green-500 h-full rounded-full transition-all duration-500",style:{width:`${i.progress}%`}})}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-center",children:[i.progress,"%"]})]},a))})]})]})]})}function g3(){const n=[{name:"Math",icon:"",lastAccessed:"2 hours ago"},{name:"English",icon:"",lastAccessed:"Yesterday"},{name:"Science",icon:"",lastAccessed:"3 days ago"},{name:"Life Orientation",icon:"",lastAccessed:"Last week"}];return y.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Recently Accessed Classes"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:n.map((e,t)=>y.jsxs("div",{className:"bg-white/70 border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition",children:[y.jsx("div",{className:"text-3xl mb-2",children:e.icon}),y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e.name}),y.jsxs("p",{className:"text-sm text-gray-500",children:["Last accessed: ",e.lastAccessed]})]},t))})]})}const Kv=6048e5,y3=864e5,ex=Symbol.for("constructDateFrom");function Sn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&ex in n?n[ex](e):n instanceof Date?new n.constructor(e):new Date(e)}function Rt(n,e){return Sn(e||n,n)}function b3(n,e,t){const r=Rt(n,t?.in);return isNaN(e)?Sn(n,NaN):(r.setDate(r.getDate()+e),r)}let x3={};function tu(){return x3}function qi(n,e){const t=tu(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Rt(n,e?.in),a=i.getDay(),c=(a<r?7:0)+a-r;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function Ac(n,e){return qi(n,{...e,weekStartsOn:1})}function Jv(n,e){const t=Rt(n,e?.in),r=t.getFullYear(),i=Sn(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Ac(i),c=Sn(t,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const f=Ac(c);return t.getTime()>=a.getTime()?r+1:t.getTime()>=f.getTime()?r:r-1}function tx(n){const e=Rt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function gp(n,...e){const t=Sn.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function Dc(n,e){const t=Rt(n,e?.in);return t.setHours(0,0,0,0),t}function v3(n,e,t){const[r,i]=gp(t?.in,n,e),a=Dc(r),c=Dc(i),f=+a-tx(a),d=+c-tx(c);return Math.round((f-d)/y3)}function S3(n,e){const t=Jv(n,e),r=Sn(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ac(r)}function w3(n){return Sn(n,Date.now())}function N3(n,e,t){const[r,i]=gp(t?.in,n,e);return+Dc(r)==+Dc(i)}function C3(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function E3(n){return!(!C3(n)&&typeof n!="number"||isNaN(+Rt(n)))}function M3(n,e){const t=Rt(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function T3(n,e){const t=Rt(n,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function k3(n,e){const t=Rt(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function O3(n,e){const t=e?.weekStartsOn,r=Rt(n,e?.in),i=r.getDay(),a=(i<t?-7:0)+6-(i-t);return r.setDate(r.getDate()+a),r.setHours(23,59,59,999),r}const A3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},D3=(n,e,t)=>{let r;const i=A3[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function nh(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const R3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},j3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B3={date:nh({formats:R3,defaultWidth:"full"}),time:nh({formats:j3,defaultWidth:"full"}),dateTime:nh({formats:_3,defaultWidth:"full"})},z3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},L3=(n,e,t,r)=>z3[n];function Ql(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,f=t?.width?String(t.width):c;i=n.formattingValues[f]||n.formattingValues[c]}else{const c=n.defaultWidth,f=t?.width?String(t.width):n.defaultWidth;i=n.values[f]||n.values[c]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const H3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},q3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},V3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},P3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},I3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},F3=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},$3={ordinalNumber:F3,era:Ql({values:H3,defaultWidth:"wide"}),quarter:Ql({values:U3,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ql({values:q3,defaultWidth:"wide"}),day:Ql({values:V3,defaultWidth:"wide"}),dayPeriod:Ql({values:P3,defaultWidth:"wide",formattingValues:I3,defaultFormattingWidth:"wide"})};function Wl(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const c=a[0],f=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(f)?G3(f,b=>b.test(c)):Y3(f,b=>b.test(c));let h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const m=e.slice(c.length);return{value:h,rest:m}}}function Y3(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function G3(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function K3(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let c=n.valueCallback?n.valueCallback(a[0]):a[0];c=t.valueCallback?t.valueCallback(c):c;const f=e.slice(i.length);return{value:c,rest:f}}}const J3=/^(\d+)(th|st|nd|rd)?/i,X3=/\d+/i,Q3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},W3={any:[/^b/i,/^(a|c)/i]},Z3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},e4={any:[/1/i,/2/i,/3/i,/4/i]},t4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},n4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},r4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},s4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},i4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},a4={ordinalNumber:K3({matchPattern:J3,parsePattern:X3,valueCallback:n=>parseInt(n,10)}),era:Wl({matchPatterns:Q3,defaultMatchWidth:"wide",parsePatterns:W3,defaultParseWidth:"any"}),quarter:Wl({matchPatterns:Z3,defaultMatchWidth:"wide",parsePatterns:e4,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Wl({matchPatterns:t4,defaultMatchWidth:"wide",parsePatterns:n4,defaultParseWidth:"any"}),day:Wl({matchPatterns:r4,defaultMatchWidth:"wide",parsePatterns:s4,defaultParseWidth:"any"}),dayPeriod:Wl({matchPatterns:i4,defaultMatchWidth:"any",parsePatterns:l4,defaultParseWidth:"any"})},o4={code:"en-US",formatDistance:D3,formatLong:B3,formatRelative:L3,localize:$3,match:a4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function c4(n,e){const t=Rt(n,e?.in);return v3(t,k3(t))+1}function u4(n,e){const t=Rt(n,e?.in),r=+Ac(t)-+S3(t);return Math.round(r/Kv)+1}function Xv(n,e){const t=Rt(n,e?.in),r=t.getFullYear(),i=tu(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=Sn(e?.in||n,0);c.setFullYear(r+1,0,a),c.setHours(0,0,0,0);const f=qi(c,e),d=Sn(e?.in||n,0);d.setFullYear(r,0,a),d.setHours(0,0,0,0);const h=qi(d,e);return+t>=+f?r+1:+t>=+h?r:r-1}function f4(n,e){const t=tu(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=Xv(n,e),a=Sn(e?.in||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),qi(a,e)}function d4(n,e){const t=Rt(n,e?.in),r=+qi(t,e)-+f4(t,e);return Math.round(r/Kv)+1}function Oe(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Br={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Oe(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Oe(t+1,2)},d(n,e){return Oe(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Oe(n.getHours()%12||12,e.length)},H(n,e){return Oe(n.getHours(),e.length)},m(n,e){return Oe(n.getMinutes(),e.length)},s(n,e){return Oe(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Oe(i,e.length)}},ki={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nx={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Br.y(n,e)},Y:function(n,e,t,r){const i=Xv(n,r),a=i>0?i:1-i;if(e==="YY"){const c=a%100;return Oe(c,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Oe(a,e.length)},R:function(n,e){const t=Jv(n);return Oe(t,e.length)},u:function(n,e){const t=n.getFullYear();return Oe(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Oe(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Oe(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Br.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Oe(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=d4(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Oe(i,e.length)},I:function(n,e,t){const r=u4(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Oe(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Br.d(n,e)},D:function(n,e,t){const r=c4(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Oe(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Oe(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Oe(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Oe(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=ki.noon:r===0?i=ki.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=ki.evening:r>=12?i=ki.afternoon:r>=4?i=ki.morning:i=ki.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Br.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Br.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Oe(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Oe(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Br.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Br.s(n,e)},S:function(n,e){return Br.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return sx(r);case"XXXX":case"XX":return xs(r);case"XXXXX":case"XXX":default:return xs(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return sx(r);case"xxxx":case"xx":return xs(r);case"xxxxx":case"xxx":default:return xs(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+rx(r,":");case"OOOO":default:return"GMT"+xs(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+rx(r,":");case"zzzz":default:return"GMT"+xs(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Oe(r,e.length)},T:function(n,e,t){return Oe(+n,e.length)}};function rx(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+Oe(a,2)}function sx(n,e){return n%60===0?(n>0?"-":"+")+Oe(Math.abs(n)/60,2):xs(n,e)}function xs(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Oe(Math.trunc(r/60),2),a=Oe(r%60,2);return t+i+e+a}const ix=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Qv=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},h4=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return ix(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",ix(r,e)).replace("{{time}}",Qv(i,e))},p4={p:Qv,P:h4},m4=/^D+$/,g4=/^Y+$/,y4=["D","DD","YY","YYYY"];function b4(n){return m4.test(n)}function x4(n){return g4.test(n)}function v4(n,e,t){const r=S4(n,e,t);if(console.warn(r),y4.includes(n))throw new RangeError(r)}function S4(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const w4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,N4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,C4=/^'([^]*?)'?$/,E4=/''/g,M4=/[a-zA-Z]/;function T4(n,e,t){const r=tu(),i=r.locale??o4,a=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,f=Rt(n,t?.in);if(!E3(f))throw new RangeError("Invalid time value");let d=e.match(N4).map(m=>{const b=m[0];if(b==="p"||b==="P"){const x=p4[b];return x(m,i.formatLong)}return m}).join("").match(w4).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const b=m[0];if(b==="'")return{isToken:!1,value:k4(m)};if(nx[b])return{isToken:!0,value:m};if(b.match(M4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(d=i.localize.preprocessor(f,d));const h={firstWeekContainsDate:a,weekStartsOn:c,locale:i};return d.map(m=>{if(!m.isToken)return m.value;const b=m.value;(x4(b)||b4(b))&&v4(b,e,String(n));const x=nx[b[0]];return x(f,b,i.localize,h)}).join("")}function k4(n){const e=n.match(C4);return e?e[1].replace(E4,"'"):n}function O4(n,e,t){const[r,i]=gp(t?.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function A4(n,e){return N3(Sn(n,n),w3(n))}function D4(){const e=T3(new Date),t=M3(e),r=qi(e,{weekStartsOn:1}),i=O3(t,{weekStartsOn:1}),a="d",c=[];let f=r;for(;f<=i;)for(let h=0;h<7;h++){const m=f;c.push(y.jsx("div",{className:`text-sm text-center py-2 rounded ${O4(m,e)?A4(m)?"bg-indigo-500 text-white font-semibold":"text-gray-700":"text-gray-300"}`,children:T4(m,a)},m)),f=b3(f,1)}const d=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return y.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"This Month"}),y.jsx("div",{className:"grid grid-cols-7 text-center text-sm font-medium text-gray-500 mb-2",children:d.map(h=>y.jsx("div",{children:h},h))}),y.jsx("div",{className:"grid grid-cols-7 gap-y-1",children:c})]})}function R4(){return y.jsxs("div",{children:[y.jsx(p3,{}),y.jsx(Gv,{}),y.jsx(m3,{}),y.jsx(g3,{}),y.jsx(D4,{})]})}function j4({overallProgress:n=68,subjects:e=[],currentTerm:t=2}){const r=["🥚 Egg","🐛 Caterpillar","🐚 Chrysalis","🦋 Butterfly"];return y.jsxs(Ph,{children:[y.jsx("h1",{className:"text-3xl font-bold text-center mb-4",children:"Your Classes"}),y.jsxs("p",{className:"text-center text-white/90 mb-2",children:["You are currently in the ",y.jsx("strong",{children:r[t-1]})," phase."]}),y.jsxs("div",{className:"relative h-4 bg-white/30 rounded-full overflow-hidden mb-2",children:[y.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 to-pink-400 transition-all duration-500",style:{width:`${n}%`}}),[0,25,50,75,100].map((i,a)=>y.jsx("div",{className:"absolute top-0 h-full border-l-2 border-white/70",style:{left:`${i}%`}},a))]}),y.jsxs("p",{className:"text-center text-sm text-white/90",children:[100-n,"% left to complete your classes this year."]}),y.jsx("div",{className:"mt-4 overflow-x-auto pb-2",children:y.jsx("div",{className:"flex space-x-4",children:e.map((i,a)=>y.jsxs("div",{className:"min-w-[120px] bg-white/30 p-3 rounded-lg shadow-sm flex-shrink-0",children:[y.jsx("p",{className:"text-sm font-medium text-white mb-1 text-center",children:i.name}),y.jsx("div",{className:"w-full bg-white/40 rounded-full h-2",children:y.jsx("div",{className:"bg-white h-full rounded-full",style:{width:`${i.progress}%`}})})]},a))})})]})}function _4({onTabChange:n}){const[e,t]=T.useState("subjects"),r=i=>{t(i),n(i)};return y.jsx("div",{className:"flex justify-center mt-6 mb-4",children:y.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-full p-1 flex space-x-2 shadow-inner border border-white/40 ring-1 ring-white/30",children:[y.jsxs("button",{onClick:()=>r("subjects"),className:`px-5 py-2 rounded-full text-sm font-semibold transition-all duration-300 flex items-center space-x-2 ${e==="subjects"?"bg-pink-500 text-white shadow-md":"bg-transparent text-white hover:bg-white/20"}`,children:[y.jsx("span",{role:"img","aria-label":"Subjects",children:"📚"}),y.jsx("span",{className:"inline-block",children:"Subjects"})]}),y.jsxs("button",{onClick:()=>r("chat"),className:`px-5 py-2 rounded-full text-sm font-semibold transition-all duration-300 flex items-center space-x-2 ${e==="chat"?"bg-sky-500 text-white shadow-md":"bg-transparent text-white hover:bg-white/20"}`,children:[y.jsx("span",{role:"img","aria-label":"Chat Rooms",children:"💬"}),y.jsx("span",{className:"inline-block",children:"Chat Rooms"})]})]})})}const B4=[{name:"Math",progress:80,description:"Master numbers, patterns, and problem-solving skills.",lastCompleted:"Algebra Basics",nextTopic:"Quadratic Equations",currentTopic:"Linear Equations",butterflyStage:"🦋 Chrysalis",timeSpent:"2h 15m",streak:3},{name:"English",progress:60,description:"Explore language, literature, and communication.",lastCompleted:"Essay Structure",nextTopic:"Poetry Analysis",currentTopic:"Narrative Writing",butterflyStage:"🐛 Caterpillar",timeSpent:"1h 40m",streak:2},{name:"Science",progress:45,description:"Discover the wonders of biology, chemistry, and physics.",lastCompleted:"States of Matter",nextTopic:"Photosynthesis",currentTopic:"Chemical Reactions",butterflyStage:"🦋 Egg",timeSpent:"55m",streak:1},{name:"Life Orientation",progress:90,description:"Grow in self-awareness, health, and social responsibility.",lastCompleted:"Healthy Relationships",nextTopic:"Mental Wellness",currentTopic:"Personal Values",butterflyStage:"🦋 Butterfly",timeSpent:"3h 10m",streak:5}];function z4({onSelect:n}){const[e,t]=T.useState(null);return y.jsx("div",{className:"max-w-7xl mx-auto p-6",children:y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-4",children:B4.map((r,i)=>y.jsxs("div",{onMouseEnter:()=>t(i),onMouseLeave:()=>t(null),onClick:()=>n&&n(r),className:`cursor-pointer bg-white rounded-xl shadow-md p-5 transition-all duration-300 hover:shadow-lg relative overflow-hidden ${e===i?"h-64":"h-44"}`,children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:r.name}),y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:y.jsx("div",{className:"bg-indigo-500 h-full rounded-full transition-all duration-500",style:{width:`${r.progress}%`}})}),e!==i&&y.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[y.jsxs("p",{children:["✅ ",y.jsx("strong",{children:"Last Completed:"})," ",r.lastCompleted]}),y.jsxs("p",{children:["🔜 ",y.jsx("strong",{children:"Next:"})," ",r.nextTopic]})]}),e===i&&y.jsxs("div",{className:"absolute inset-0 bg-white/95 p-4 rounded-xl shadow-inner z-10 flex flex-col justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-md font-bold text-gray-800 mb-1",children:r.name}),y.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r.description}),y.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[y.jsxs("li",{children:["🦋 ",y.jsx("strong",{children:"Progression:"})," ",r.butterflyStage]}),y.jsxs("li",{children:["📚 ",y.jsx("strong",{children:"Current Topic:"})," ",r.currentTopic]}),y.jsxs("li",{children:["🔥 ",y.jsx("strong",{children:"Streak:"})," ",r.streak,"-day"]}),y.jsxs("li",{children:["🕒 ",y.jsx("strong",{children:"Time Spent:"})," ",r.timeSpent]})]})]}),y.jsxs("div",{className:"relative h-4 bg-gray-200 rounded-full overflow-hidden mt-3",children:[y.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 to-pink-400 transition-all duration-500",style:{width:`${r.progress}%`}}),[0,25,50,75,100].map((a,c)=>y.jsx("div",{className:"absolute top-0 h-full border-l-2 border-white",style:{left:`${a}%`}},c))]})]})]},i))})})}function L4({subject:n,onBack:e}){return y.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[y.jsx("button",{onClick:e,className:"text-sm text-indigo-600 mb-4 hover:underline",children:"← Back to Subjects"}),y.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[y.jsx("h2",{className:"text-2xl font-bold mb-2",children:n.name}),y.jsx("p",{className:"text-gray-700 mb-4",children:n.description}),y.jsxs("p",{children:[y.jsx("strong",{children:"Current Topic:"})," ",n.currentTopic]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Progression:"})," ",n.butterflyStage]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Time Spent:"})," ",n.timeSpent]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Streak:"})," ",n.streak," days"]})]})]})}function H4(){const[n,e]=T.useState("subjects"),[t,r]=T.useState(null),[i,a]=T.useState(null),c=d=>{e(d)},f=()=>{n==="subjects"?r(null):a(null)};return y.jsxs("div",{children:[y.jsx(j4,{}),y.jsx(Gv,{}),y.jsx(_4,{onTabChange:c}),n==="subjects"?t?y.jsx(L4,{subject:t,onBack:f}):y.jsx(z4,{onSelect:r}):i?y.jsx(n1,{room:i,onBack:f}):y.jsx(t1,{onSelect:a})]})}function U4(){return y.jsxs("div",{className:"p-6",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"🗓️ Your Timetable"}),y.jsx("p",{className:"text-gray-600",children:"Your weekly schedule will appear here. You’ll be able to view classes by day, time, and subject."})]})}function q4(){return y.jsxs("div",{className:"p-6",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"📬 All Announcements"}),y.jsx("p",{className:"text-gray-600",children:"This is where all school and dev updates will appear."})]})}function V4(){const n=or();T.useEffect(()=>{const t=localStorage.getItem("token");t?Ue.defaults.headers.common.Authorization=`Bearer ${t}`:delete Ue.defaults.headers.common.Authorization},[]);const e=n.pathname==="/";return y.jsx("div",{className:"min-h-screen bg-white",children:e?y.jsx(C0,{children:y.jsx(bs,{path:"/",element:y.jsx(RM,{})})}):y.jsx("main",{className:"p-6 max-w-7xl mx-auto",children:y.jsxs(C0,{children:[y.jsx(bs,{path:"/dashboard",element:y.jsx(R4,{})}),y.jsx(bs,{path:"/faculty/dashboard",element:y.jsx(h3,{})}),y.jsx(bs,{path:"/classes",element:y.jsx(H4,{})}),y.jsx(bs,{path:"/timetable",element:y.jsx(U4,{})}),y.jsx(bs,{path:"/notifications",element:y.jsx(q4,{})})]})})})}ON.createRoot(document.getElementById("root")).render(y.jsx(IC,{children:y.jsx(_T,{children:y.jsx(V4,{})})}));
